{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@justoverclock/newsletter/./node_modules/eventemitter3/index.js","webpack://@justoverclock/newsletter/./node_modules/fast-diff/diff.js","webpack://@justoverclock/newsletter/./node_modules/lodash.clonedeep/index.js","webpack://@justoverclock/newsletter/./node_modules/lodash.isequal/index.js","webpack://@justoverclock/newsletter/../src/AttributeMap.ts","webpack://@justoverclock/newsletter/../src/Delta.ts","webpack://@justoverclock/newsletter/../src/Op.ts","webpack://@justoverclock/newsletter/../src/OpIterator.ts","webpack://@justoverclock/newsletter/webpack/bootstrap","webpack://@justoverclock/newsletter/webpack/runtime/compat get default export","webpack://@justoverclock/newsletter/webpack/runtime/define property getters","webpack://@justoverclock/newsletter/webpack/runtime/global","webpack://@justoverclock/newsletter/webpack/runtime/hasOwnProperty shorthand","webpack://@justoverclock/newsletter/webpack/runtime/make namespace object","webpack://@justoverclock/newsletter/webpack/runtime/node module decorator","webpack://@justoverclock/newsletter/external root \"flarum.core.compat['common/app']\"","webpack://@justoverclock/newsletter/./src/common/index.ts","webpack://@justoverclock/newsletter/external root \"flarum.core.compat['admin/app']\"","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@justoverclock/newsletter/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_listCacheClear.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/eq.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_assocIndexOf.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_listCacheDelete.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_ListCache.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_listCacheGet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_listCacheHas.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_listCacheSet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_freeGlobal.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_root.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_Symbol.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getRawTag.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_objectToString.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseGetTag.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isObject.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isFunction.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_coreJsData.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_isMasked.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_toSource.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseIsNative.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getNative.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getValue.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_Map.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_nativeCreate.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_hashGet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_hashHas.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_Hash.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_hashClear.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_hashDelete.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_hashSet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getMapData.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_isKeyable.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_MapCache.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_mapCacheClear.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_mapCacheDelete.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_mapCacheGet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_mapCacheHas.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_mapCacheSet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_Stack.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_stackClear.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_stackDelete.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_stackGet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_stackHas.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_stackSet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_defineProperty.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseAssignValue.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_assignMergeValue.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseFor.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_createBaseFor.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_cloneBuffer.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_Uint8Array.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_cloneArrayBuffer.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_cloneTypedArray.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_copyArray.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseCreate.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_overArg.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getPrototype.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_isPrototype.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_initCloneObject.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isObjectLike.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseIsArguments.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isArguments.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isArray.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isLength.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isArrayLike.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isBuffer.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/stubFalse.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isPlainObject.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseIsTypedArray.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseUnary.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_nodeUtil.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isTypedArray.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_safeGet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_assignValue.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_copyObject.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_isIndex.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_arrayLikeKeys.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseTimes.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseKeysIn.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_nativeKeysIn.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/keysIn.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseMergeDeep.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isArrayLikeObject.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/toPlainObject.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseMerge.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/identity.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_overRest.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseSetToString.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/constant.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_shortOut.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_setToString.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseRest.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_apply.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/merge.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_createAssigner.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_isIterateeCall.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/typeof.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/toPrimitive.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack://@justoverclock/newsletter/./node_modules/@babel/runtime/helpers/esm/construct.js","webpack://@justoverclock/newsletter/../src/scope.ts","webpack://@justoverclock/newsletter/../src/attributor/attributor.ts","webpack://@justoverclock/newsletter/../src/error.ts","webpack://@justoverclock/newsletter/../src/registry.ts","webpack://@justoverclock/newsletter/../src/attributor/class.ts","webpack://@justoverclock/newsletter/../src/attributor/style.ts","webpack://@justoverclock/newsletter/../src/attributor/store.ts","webpack://@justoverclock/newsletter/../src/blot/abstract/shadow.ts","webpack://@justoverclock/newsletter/../src/blot/abstract/leaf.ts","webpack://@justoverclock/newsletter/../src/collection/linked-list.ts","webpack://@justoverclock/newsletter/../src/blot/abstract/parent.ts","webpack://@justoverclock/newsletter/../src/blot/inline.ts","webpack://@justoverclock/newsletter/../src/blot/block.ts","webpack://@justoverclock/newsletter/../src/blot/abstract/container.ts","webpack://@justoverclock/newsletter/../src/blot/embed.ts","webpack://@justoverclock/newsletter/../src/blot/scroll.ts","webpack://@justoverclock/newsletter/../src/blot/text.ts","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_arrayEach.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_nativeKeys.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseKeys.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/keys.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/stubArray.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getSymbols.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_arrayFilter.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_arrayPush.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getSymbolsIn.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseGetAllKeys.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getAllKeys.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getAllKeysIn.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_DataView.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_Promise.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_Set.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_WeakMap.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_getTag.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_initCloneArray.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_cloneRegExp.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_cloneSymbol.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_initCloneByTag.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_cloneDataView.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isMap.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseIsMap.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isSet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseIsSet.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseClone.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_copySymbolsIn.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseAssignIn.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_copySymbols.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseAssign.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/cloneDeep.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_SetCache.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_setCacheAdd.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_setCacheHas.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_arraySome.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_equalArrays.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_cacheHas.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_mapToArray.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_setToArray.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_equalByTag.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_equalObjects.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseIsEqualDeep.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/_baseIsEqual.js","webpack://@justoverclock/newsletter/./node_modules/lodash-es/isEqual.js","webpack://@justoverclock/newsletter/../../src/blots/break.ts","webpack://@justoverclock/newsletter/../../src/blots/text.ts","webpack://@justoverclock/newsletter/../../src/blots/inline.ts","webpack://@justoverclock/newsletter/../../src/blots/block.ts","webpack://@justoverclock/newsletter/../../src/blots/cursor.ts","webpack://@justoverclock/newsletter/./node_modules/eventemitter3/index.mjs","webpack://@justoverclock/newsletter/../../src/core/instances.ts","webpack://@justoverclock/newsletter/../../src/core/logger.ts","webpack://@justoverclock/newsletter/../../src/core/emitter.ts","webpack://@justoverclock/newsletter/../../src/core/selection.ts","webpack://@justoverclock/newsletter/../../src/core/editor.ts","webpack://@justoverclock/newsletter/../../src/core/module.ts","webpack://@justoverclock/newsletter/../../src/blots/embed.ts","webpack://@justoverclock/newsletter/../../src/core/composition.ts","webpack://@justoverclock/newsletter/../../src/core/theme.ts","webpack://@justoverclock/newsletter/../../../src/core/utils/scrollRectIntoView.ts","webpack://@justoverclock/newsletter/../../../src/core/utils/createRegistryWithFormats.ts","webpack://@justoverclock/newsletter/../../src/core/quill.ts","webpack://@justoverclock/newsletter/../../src/blots/container.ts","webpack://@justoverclock/newsletter/../../src/blots/scroll.ts","webpack://@justoverclock/newsletter/../../src/formats/align.ts","webpack://@justoverclock/newsletter/../../src/formats/color.ts","webpack://@justoverclock/newsletter/../../src/formats/background.ts","webpack://@justoverclock/newsletter/../../src/formats/code.ts","webpack://@justoverclock/newsletter/../../src/formats/direction.ts","webpack://@justoverclock/newsletter/../../src/formats/font.ts","webpack://@justoverclock/newsletter/../../src/formats/size.ts","webpack://@justoverclock/newsletter/../../src/modules/keyboard.ts","webpack://@justoverclock/newsletter/../../../../src/modules/normalizeExternalHTML/normalizers/googleDocs.ts","webpack://@justoverclock/newsletter/../../../../src/modules/normalizeExternalHTML/normalizers/msWord.ts","webpack://@justoverclock/newsletter/../../../src/modules/normalizeExternalHTML/index.ts","webpack://@justoverclock/newsletter/../../src/modules/clipboard.ts","webpack://@justoverclock/newsletter/../../src/modules/history.ts","webpack://@justoverclock/newsletter/../../src/modules/uploader.ts","webpack://@justoverclock/newsletter/../../src/modules/input.ts","webpack://@justoverclock/newsletter/../../src/modules/uiNode.ts","webpack://@justoverclock/newsletter/../src/core.ts","webpack://@justoverclock/newsletter/../../src/formats/indent.ts","webpack://@justoverclock/newsletter/../../src/formats/blockquote.ts","webpack://@justoverclock/newsletter/../../src/formats/header.ts","webpack://@justoverclock/newsletter/../../src/formats/list.ts","webpack://@justoverclock/newsletter/../../src/formats/bold.ts","webpack://@justoverclock/newsletter/../../src/formats/italic.ts","webpack://@justoverclock/newsletter/../../src/formats/link.ts","webpack://@justoverclock/newsletter/../../src/formats/script.ts","webpack://@justoverclock/newsletter/../../src/formats/strike.ts","webpack://@justoverclock/newsletter/../../src/formats/underline.ts","webpack://@justoverclock/newsletter/../../src/formats/formula.ts","webpack://@justoverclock/newsletter/../../src/formats/image.ts","webpack://@justoverclock/newsletter/../../src/formats/video.ts","webpack://@justoverclock/newsletter/../../src/modules/syntax.ts","webpack://@justoverclock/newsletter/../../src/formats/table.ts","webpack://@justoverclock/newsletter/../../src/modules/table.ts","webpack://@justoverclock/newsletter/../../src/modules/toolbar.ts","webpack://@justoverclock/newsletter/../../src/ui/icons.ts","webpack://@justoverclock/newsletter/../../src/ui/picker.ts","webpack://@justoverclock/newsletter/../../src/ui/color-picker.ts","webpack://@justoverclock/newsletter/../../src/ui/icon-picker.ts","webpack://@justoverclock/newsletter/../../src/ui/tooltip.ts","webpack://@justoverclock/newsletter/../../src/themes/base.ts","webpack://@justoverclock/newsletter/../../src/themes/bubble.ts","webpack://@justoverclock/newsletter/../../src/themes/snow.ts","webpack://@justoverclock/newsletter/../src/quill.ts","webpack://@justoverclock/newsletter/./src/admin/components/SendEmailPage.tsx","webpack://@justoverclock/newsletter/./src/admin/index.ts"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int|Object} [cursor_pos] Edit position in text1 or object with more info\n * @param {boolean} [cleanup] Apply semantic cleanup before returning.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos, cleanup, _fix_unicode) {\n  // Check for equality\n  if (text1 === text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  if (cursor_pos != null) {\n    var editdiff = find_cursor_edit_diff(text1, text2, cursor_pos);\n    if (editdiff) {\n      return editdiff;\n    }\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs, _fix_unicode);\n  if (cleanup) {\n    diff_cleanupSemantic(diffs);\n  }\n  return diffs;\n}\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i !== -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [\n      [DIFF_INSERT, longtext.substring(0, i)],\n      [DIFF_EQUAL, shorttext],\n      [DIFF_INSERT, longtext.substring(i + shorttext.length)],\n    ];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length === 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [\n      [DIFF_DELETE, text1],\n      [DIFF_INSERT, text2],\n    ];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n}\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = delta % 2 !== 0;\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 === -d || (k1 !== d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (\n        x1 < text1_length &&\n        y1 < text2_length &&\n        text1.charAt(x1) === text2.charAt(y1)\n      ) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] !== -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 === -d || (k2 !== d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (\n        x2 < text1_length &&\n        y2 < text2_length &&\n        text1.charAt(text1_length - x2 - 1) ===\n          text2.charAt(text2_length - y2 - 1)\n      ) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] !== -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [\n    [DIFF_DELETE, text1],\n    [DIFF_INSERT, text2],\n  ];\n}\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n}\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) !== text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(pointerstart, pointermid) ==\n      text2.substring(pointerstart, pointermid)\n    ) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_start(text1.charCodeAt(pointermid - 1))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Determine if the suffix of one string is the prefix of another.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of the first\n *     string and the start of the second string.\n * @private\n */\nfunction diff_commonOverlap_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  // Eliminate the null case.\n  if (text1_length == 0 || text2_length == 0) {\n    return 0;\n  }\n  // Truncate the longer string.\n  if (text1_length > text2_length) {\n    text1 = text1.substring(text1_length - text2_length);\n  } else if (text1_length < text2_length) {\n    text2 = text2.substring(0, text1_length);\n  }\n  var text_length = Math.min(text1_length, text2_length);\n  // Quick check for the worst case.\n  if (text1 == text2) {\n    return text_length;\n  }\n\n  // Start by looking for a single character match\n  // and increase length until no match is found.\n  // Performance analysis: http://neil.fraser.name/news/2010/11/04/\n  var best = 0;\n  var length = 1;\n  while (true) {\n    var pattern = text1.substring(text_length - length);\n    var found = text2.indexOf(pattern);\n    if (found == -1) {\n      return best;\n    }\n    length += found;\n    if (\n      found == 0 ||\n      text1.substring(text_length - length) == text2.substring(0, length)\n    ) {\n      best = length;\n      length++;\n    }\n  }\n}\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.slice(-1) !== text2.slice(-1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (\n      text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n      text2.substring(text2.length - pointermid, text2.length - pointerend)\n    ) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n\n  if (is_surrogate_pair_end(text1.charCodeAt(text1.length - pointermid))) {\n    pointermid--;\n  }\n\n  return pointermid;\n}\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null; // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = \"\";\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) !== -1) {\n      var prefixLength = diff_commonPrefix(\n        longtext.substring(i),\n        shorttext.substring(j)\n      );\n      var suffixLength = diff_commonSuffix(\n        longtext.substring(0, i),\n        shorttext.substring(0, j)\n      );\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common =\n          shorttext.substring(j - suffixLength, j) +\n          shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [\n        best_longtext_a,\n        best_longtext_b,\n        best_shorttext_a,\n        best_shorttext_b,\n        best_common,\n      ];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 4)\n  );\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(\n    longtext,\n    shorttext,\n    Math.ceil(longtext.length / 2)\n  );\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n}\n\n/**\n * Reduce the number of edits by eliminating semantically trivial equalities.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemantic(diffs) {\n  var changes = false;\n  var equalities = []; // Stack of indices where equalities are found.\n  var equalitiesLength = 0; // Keeping our own length var is faster in JS.\n  /** @type {?string} */\n  var lastequality = null;\n  // Always equal to diffs[equalities[equalitiesLength - 1]][1]\n  var pointer = 0; // Index of current position.\n  // Number of characters that changed prior to the equality.\n  var length_insertions1 = 0;\n  var length_deletions1 = 0;\n  // Number of characters that changed after the equality.\n  var length_insertions2 = 0;\n  var length_deletions2 = 0;\n  while (pointer < diffs.length) {\n    if (diffs[pointer][0] == DIFF_EQUAL) {\n      // Equality found.\n      equalities[equalitiesLength++] = pointer;\n      length_insertions1 = length_insertions2;\n      length_deletions1 = length_deletions2;\n      length_insertions2 = 0;\n      length_deletions2 = 0;\n      lastequality = diffs[pointer][1];\n    } else {\n      // An insertion or deletion.\n      if (diffs[pointer][0] == DIFF_INSERT) {\n        length_insertions2 += diffs[pointer][1].length;\n      } else {\n        length_deletions2 += diffs[pointer][1].length;\n      }\n      // Eliminate an equality that is smaller or equal to the edits on both\n      // sides of it.\n      if (\n        lastequality &&\n        lastequality.length <=\n          Math.max(length_insertions1, length_deletions1) &&\n        lastequality.length <= Math.max(length_insertions2, length_deletions2)\n      ) {\n        // Duplicate record.\n        diffs.splice(equalities[equalitiesLength - 1], 0, [\n          DIFF_DELETE,\n          lastequality,\n        ]);\n        // Change second copy to insert.\n        diffs[equalities[equalitiesLength - 1] + 1][0] = DIFF_INSERT;\n        // Throw away the equality we just deleted.\n        equalitiesLength--;\n        // Throw away the previous equality (it needs to be reevaluated).\n        equalitiesLength--;\n        pointer = equalitiesLength > 0 ? equalities[equalitiesLength - 1] : -1;\n        length_insertions1 = 0; // Reset the counters.\n        length_deletions1 = 0;\n        length_insertions2 = 0;\n        length_deletions2 = 0;\n        lastequality = null;\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n\n  // Normalize the diff.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n  diff_cleanupSemanticLossless(diffs);\n\n  // Find any overlaps between deletions and insertions.\n  // e.g: <del>abcxxx</del><ins>xxxdef</ins>\n  //   -> <del>abc</del>xxx<ins>def</ins>\n  // e.g: <del>xxxabc</del><ins>defxxx</ins>\n  //   -> <ins>def</ins>xxx<del>abc</del>\n  // Only extract an overlap if it is as big as the edit ahead or behind it.\n  pointer = 1;\n  while (pointer < diffs.length) {\n    if (\n      diffs[pointer - 1][0] == DIFF_DELETE &&\n      diffs[pointer][0] == DIFF_INSERT\n    ) {\n      var deletion = diffs[pointer - 1][1];\n      var insertion = diffs[pointer][1];\n      var overlap_length1 = diff_commonOverlap_(deletion, insertion);\n      var overlap_length2 = diff_commonOverlap_(insertion, deletion);\n      if (overlap_length1 >= overlap_length2) {\n        if (\n          overlap_length1 >= deletion.length / 2 ||\n          overlap_length1 >= insertion.length / 2\n        ) {\n          // Overlap found.  Insert an equality and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            insertion.substring(0, overlap_length1),\n          ]);\n          diffs[pointer - 1][1] = deletion.substring(\n            0,\n            deletion.length - overlap_length1\n          );\n          diffs[pointer + 1][1] = insertion.substring(overlap_length1);\n          pointer++;\n        }\n      } else {\n        if (\n          overlap_length2 >= deletion.length / 2 ||\n          overlap_length2 >= insertion.length / 2\n        ) {\n          // Reverse overlap found.\n          // Insert an equality and swap and trim the surrounding edits.\n          diffs.splice(pointer, 0, [\n            DIFF_EQUAL,\n            deletion.substring(0, overlap_length2),\n          ]);\n          diffs[pointer - 1][0] = DIFF_INSERT;\n          diffs[pointer - 1][1] = insertion.substring(\n            0,\n            insertion.length - overlap_length2\n          );\n          diffs[pointer + 1][0] = DIFF_DELETE;\n          diffs[pointer + 1][1] = deletion.substring(overlap_length2);\n          pointer++;\n        }\n      }\n      pointer++;\n    }\n    pointer++;\n  }\n}\n\nvar nonAlphaNumericRegex_ = /[^a-zA-Z0-9]/;\nvar whitespaceRegex_ = /\\s/;\nvar linebreakRegex_ = /[\\r\\n]/;\nvar blanklineEndRegex_ = /\\n\\r?\\n$/;\nvar blanklineStartRegex_ = /^\\r?\\n\\r?\\n/;\n\n/**\n * Look for single edits surrounded on both sides by equalities\n * which can be shifted sideways to align the edit to a word boundary.\n * e.g: The c<ins>at c</ins>ame. -> The <ins>cat </ins>came.\n * @param {!Array.<!diff_match_patch.Diff>} diffs Array of diff tuples.\n */\nfunction diff_cleanupSemanticLossless(diffs) {\n  /**\n   * Given two strings, compute a score representing whether the internal\n   * boundary falls on logical boundaries.\n   * Scores range from 6 (best) to 0 (worst).\n   * Closure, but does not reference any external variables.\n   * @param {string} one First string.\n   * @param {string} two Second string.\n   * @return {number} The score.\n   * @private\n   */\n  function diff_cleanupSemanticScore_(one, two) {\n    if (!one || !two) {\n      // Edges are the best.\n      return 6;\n    }\n\n    // Each port of this function behaves slightly differently due to\n    // subtle differences in each language's definition of things like\n    // 'whitespace'.  Since this function's purpose is largely cosmetic,\n    // the choice has been made to use each language's native features\n    // rather than force total conformity.\n    var char1 = one.charAt(one.length - 1);\n    var char2 = two.charAt(0);\n    var nonAlphaNumeric1 = char1.match(nonAlphaNumericRegex_);\n    var nonAlphaNumeric2 = char2.match(nonAlphaNumericRegex_);\n    var whitespace1 = nonAlphaNumeric1 && char1.match(whitespaceRegex_);\n    var whitespace2 = nonAlphaNumeric2 && char2.match(whitespaceRegex_);\n    var lineBreak1 = whitespace1 && char1.match(linebreakRegex_);\n    var lineBreak2 = whitespace2 && char2.match(linebreakRegex_);\n    var blankLine1 = lineBreak1 && one.match(blanklineEndRegex_);\n    var blankLine2 = lineBreak2 && two.match(blanklineStartRegex_);\n\n    if (blankLine1 || blankLine2) {\n      // Five points for blank lines.\n      return 5;\n    } else if (lineBreak1 || lineBreak2) {\n      // Four points for line breaks.\n      return 4;\n    } else if (nonAlphaNumeric1 && !whitespace1 && whitespace2) {\n      // Three points for end of sentences.\n      return 3;\n    } else if (whitespace1 || whitespace2) {\n      // Two points for whitespace.\n      return 2;\n    } else if (nonAlphaNumeric1 || nonAlphaNumeric2) {\n      // One point for non-alphanumeric.\n      return 1;\n    }\n    return 0;\n  }\n\n  var pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] == DIFF_EQUAL &&\n      diffs[pointer + 1][0] == DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      var equality1 = diffs[pointer - 1][1];\n      var edit = diffs[pointer][1];\n      var equality2 = diffs[pointer + 1][1];\n\n      // First, shift the edit as far left as possible.\n      var commonOffset = diff_commonSuffix(equality1, edit);\n      if (commonOffset) {\n        var commonString = edit.substring(edit.length - commonOffset);\n        equality1 = equality1.substring(0, equality1.length - commonOffset);\n        edit = commonString + edit.substring(0, edit.length - commonOffset);\n        equality2 = commonString + equality2;\n      }\n\n      // Second, step character by character right, looking for the best fit.\n      var bestEquality1 = equality1;\n      var bestEdit = edit;\n      var bestEquality2 = equality2;\n      var bestScore =\n        diff_cleanupSemanticScore_(equality1, edit) +\n        diff_cleanupSemanticScore_(edit, equality2);\n      while (edit.charAt(0) === equality2.charAt(0)) {\n        equality1 += edit.charAt(0);\n        edit = edit.substring(1) + equality2.charAt(0);\n        equality2 = equality2.substring(1);\n        var score =\n          diff_cleanupSemanticScore_(equality1, edit) +\n          diff_cleanupSemanticScore_(edit, equality2);\n        // The >= encourages trailing rather than leading whitespace on edits.\n        if (score >= bestScore) {\n          bestScore = score;\n          bestEquality1 = equality1;\n          bestEdit = edit;\n          bestEquality2 = equality2;\n        }\n      }\n\n      if (diffs[pointer - 1][1] != bestEquality1) {\n        // We have an improvement, save it back to the diff.\n        if (bestEquality1) {\n          diffs[pointer - 1][1] = bestEquality1;\n        } else {\n          diffs.splice(pointer - 1, 1);\n          pointer--;\n        }\n        diffs[pointer][1] = bestEdit;\n        if (bestEquality2) {\n          diffs[pointer + 1][1] = bestEquality2;\n        } else {\n          diffs.splice(pointer + 1, 1);\n          pointer--;\n        }\n      }\n    }\n    pointer++;\n  }\n}\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n * @param {boolean} fix_unicode Whether to normalize to a unicode-correct diff\n */\nfunction diff_cleanupMerge(diffs, fix_unicode) {\n  diffs.push([DIFF_EQUAL, \"\"]); // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = \"\";\n  var text_insert = \"\";\n  var commonlength;\n  while (pointer < diffs.length) {\n    if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n      diffs.splice(pointer, 1);\n      continue;\n    }\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        var previous_equality = pointer - count_insert - count_delete - 1;\n        if (fix_unicode) {\n          // prevent splitting of unicode surrogate pairs.  when fix_unicode is true,\n          // we assume that the old and new text in the diff are complete and correct\n          // unicode-encoded JS strings, but the tuple boundaries may fall between\n          // surrogate pairs.  we fix this by shaving off stray surrogates from the end\n          // of the previous equality and the beginning of this equality.  this may create\n          // empty equalities or a common prefix or suffix.  for example, if AB and AC are\n          // emojis, `[[0, 'A'], [-1, 'BA'], [0, 'C']]` would turn into deleting 'ABAC' and\n          // inserting 'AC', and then the common suffix 'AC' will be eliminated.  in this\n          // particular case, both equalities go away, we absorb any previous inequalities,\n          // and we keep scanning for the next equality before rewriting the tuples.\n          if (\n            previous_equality >= 0 &&\n            ends_with_pair_start(diffs[previous_equality][1])\n          ) {\n            var stray = diffs[previous_equality][1].slice(-1);\n            diffs[previous_equality][1] = diffs[previous_equality][1].slice(\n              0,\n              -1\n            );\n            text_delete = stray + text_delete;\n            text_insert = stray + text_insert;\n            if (!diffs[previous_equality][1]) {\n              // emptied out previous equality, so delete it and include previous delete/insert\n              diffs.splice(previous_equality, 1);\n              pointer--;\n              var k = previous_equality - 1;\n              if (diffs[k] && diffs[k][0] === DIFF_INSERT) {\n                count_insert++;\n                text_insert = diffs[k][1] + text_insert;\n                k--;\n              }\n              if (diffs[k] && diffs[k][0] === DIFF_DELETE) {\n                count_delete++;\n                text_delete = diffs[k][1] + text_delete;\n                k--;\n              }\n              previous_equality = k;\n            }\n          }\n          if (starts_with_pair_end(diffs[pointer][1])) {\n            var stray = diffs[pointer][1].charAt(0);\n            diffs[pointer][1] = diffs[pointer][1].slice(1);\n            text_delete += stray;\n            text_insert += stray;\n          }\n        }\n        if (pointer < diffs.length - 1 && !diffs[pointer][1]) {\n          // for empty equality not at end, wait for next equality\n          diffs.splice(pointer, 1);\n          break;\n        }\n        if (text_delete.length > 0 || text_insert.length > 0) {\n          // note that diff_commonPrefix and diff_commonSuffix are unicode-aware\n          if (text_delete.length > 0 && text_insert.length > 0) {\n            // Factor out any common prefixes.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if (previous_equality >= 0) {\n                diffs[previous_equality][1] += text_insert.substring(\n                  0,\n                  commonlength\n                );\n              } else {\n                diffs.splice(0, 0, [\n                  DIFF_EQUAL,\n                  text_insert.substring(0, commonlength),\n                ]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixes.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] =\n                text_insert.substring(text_insert.length - commonlength) +\n                diffs[pointer][1];\n              text_insert = text_insert.substring(\n                0,\n                text_insert.length - commonlength\n              );\n              text_delete = text_delete.substring(\n                0,\n                text_delete.length - commonlength\n              );\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          var n = count_insert + count_delete;\n          if (text_delete.length === 0 && text_insert.length === 0) {\n            diffs.splice(pointer - n, n);\n            pointer = pointer - n;\n          } else if (text_delete.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_INSERT, text_insert]);\n            pointer = pointer - n + 1;\n          } else if (text_insert.length === 0) {\n            diffs.splice(pointer - n, n, [DIFF_DELETE, text_delete]);\n            pointer = pointer - n + 1;\n          } else {\n            diffs.splice(\n              pointer - n,\n              n,\n              [DIFF_DELETE, text_delete],\n              [DIFF_INSERT, text_insert]\n            );\n            pointer = pointer - n + 2;\n          }\n        }\n        if (pointer !== 0 && diffs[pointer - 1][0] === DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = \"\";\n        text_insert = \"\";\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === \"\") {\n    diffs.pop(); // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (\n      diffs[pointer - 1][0] === DIFF_EQUAL &&\n      diffs[pointer + 1][0] === DIFF_EQUAL\n    ) {\n      // This is a single edit surrounded by equalities.\n      if (\n        diffs[pointer][1].substring(\n          diffs[pointer][1].length - diffs[pointer - 1][1].length\n        ) === diffs[pointer - 1][1]\n      ) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] =\n          diffs[pointer - 1][1] +\n          diffs[pointer][1].substring(\n            0,\n            diffs[pointer][1].length - diffs[pointer - 1][1].length\n          );\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (\n        diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n        diffs[pointer + 1][1]\n      ) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n          diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n          diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs, fix_unicode);\n  }\n}\n\nfunction is_surrogate_pair_start(charCode) {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n}\n\nfunction is_surrogate_pair_end(charCode) {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n}\n\nfunction starts_with_pair_end(str) {\n  return is_surrogate_pair_end(str.charCodeAt(0));\n}\n\nfunction ends_with_pair_start(str) {\n  return is_surrogate_pair_start(str.charCodeAt(str.length - 1));\n}\n\nfunction remove_empty_tuples(tuples) {\n  var ret = [];\n  for (var i = 0; i < tuples.length; i++) {\n    if (tuples[i][1].length > 0) {\n      ret.push(tuples[i]);\n    }\n  }\n  return ret;\n}\n\nfunction make_edit_splice(before, oldMiddle, newMiddle, after) {\n  if (ends_with_pair_start(before) || starts_with_pair_end(after)) {\n    return null;\n  }\n  return remove_empty_tuples([\n    [DIFF_EQUAL, before],\n    [DIFF_DELETE, oldMiddle],\n    [DIFF_INSERT, newMiddle],\n    [DIFF_EQUAL, after],\n  ]);\n}\n\nfunction find_cursor_edit_diff(oldText, newText, cursor_pos) {\n  // note: this runs after equality check has ruled out exact equality\n  var oldRange =\n    typeof cursor_pos === \"number\"\n      ? { index: cursor_pos, length: 0 }\n      : cursor_pos.oldRange;\n  var newRange = typeof cursor_pos === \"number\" ? null : cursor_pos.newRange;\n  // take into account the old and new selection to generate the best diff\n  // possible for a text edit.  for example, a text change from \"xxx\" to \"xx\"\n  // could be a delete or forwards-delete of any one of the x's, or the\n  // result of selecting two of the x's and typing \"x\".\n  var oldLength = oldText.length;\n  var newLength = newText.length;\n  if (oldRange.length === 0 && (newRange === null || newRange.length === 0)) {\n    // see if we have an insert or delete before or after cursor\n    var oldCursor = oldRange.index;\n    var oldBefore = oldText.slice(0, oldCursor);\n    var oldAfter = oldText.slice(oldCursor);\n    var maybeNewCursor = newRange ? newRange.index : null;\n    editBefore: {\n      // is this an insert or delete right before oldCursor?\n      var newCursor = oldCursor + newLength - oldLength;\n      if (maybeNewCursor !== null && maybeNewCursor !== newCursor) {\n        break editBefore;\n      }\n      if (newCursor < 0 || newCursor > newLength) {\n        break editBefore;\n      }\n      var newBefore = newText.slice(0, newCursor);\n      var newAfter = newText.slice(newCursor);\n      if (newAfter !== oldAfter) {\n        break editBefore;\n      }\n      var prefixLength = Math.min(oldCursor, newCursor);\n      var oldPrefix = oldBefore.slice(0, prefixLength);\n      var newPrefix = newBefore.slice(0, prefixLength);\n      if (oldPrefix !== newPrefix) {\n        break editBefore;\n      }\n      var oldMiddle = oldBefore.slice(prefixLength);\n      var newMiddle = newBefore.slice(prefixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldAfter);\n    }\n    editAfter: {\n      // is this an insert or delete right after oldCursor?\n      if (maybeNewCursor !== null && maybeNewCursor !== oldCursor) {\n        break editAfter;\n      }\n      var cursor = oldCursor;\n      var newBefore = newText.slice(0, cursor);\n      var newAfter = newText.slice(cursor);\n      if (newBefore !== oldBefore) {\n        break editAfter;\n      }\n      var suffixLength = Math.min(oldLength - cursor, newLength - cursor);\n      var oldSuffix = oldAfter.slice(oldAfter.length - suffixLength);\n      var newSuffix = newAfter.slice(newAfter.length - suffixLength);\n      if (oldSuffix !== newSuffix) {\n        break editAfter;\n      }\n      var oldMiddle = oldAfter.slice(0, oldAfter.length - suffixLength);\n      var newMiddle = newAfter.slice(0, newAfter.length - suffixLength);\n      return make_edit_splice(oldBefore, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n  if (oldRange.length > 0 && newRange && newRange.length === 0) {\n    replaceRange: {\n      // see if diff could be a splice of the old selection range\n      var oldPrefix = oldText.slice(0, oldRange.index);\n      var oldSuffix = oldText.slice(oldRange.index + oldRange.length);\n      var prefixLength = oldPrefix.length;\n      var suffixLength = oldSuffix.length;\n      if (newLength < prefixLength + suffixLength) {\n        break replaceRange;\n      }\n      var newPrefix = newText.slice(0, prefixLength);\n      var newSuffix = newText.slice(newLength - suffixLength);\n      if (oldPrefix !== newPrefix || oldSuffix !== newSuffix) {\n        break replaceRange;\n      }\n      var oldMiddle = oldText.slice(prefixLength, oldLength - suffixLength);\n      var newMiddle = newText.slice(prefixLength, newLength - suffixLength);\n      return make_edit_splice(oldPrefix, oldMiddle, newMiddle, oldSuffix);\n    }\n  }\n\n  return null;\n}\n\nfunction diff(text1, text2, cursor_pos, cleanup) {\n  // only pass fix_unicode=true at the top level, not when diff_main is\n  // recursively invoked\n  return diff_main(text1, text2, cursor_pos, cleanup, true);\n}\n\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n",null,null,null,null,"// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('justoverclock/newsletter', () => {\n  console.log('[justoverclock/newsletter] Hello, forum and admin!');\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","function _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\nexport { _setPrototypeOf as default };","import setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _inheritsLoose(t, o) {\n  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf(t, o);\n}\nexport { _inheritsLoose as default };","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","function _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (e.includes(n)) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nexport { _objectWithoutPropertiesLoose as default };","function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nexport { _extends as default };","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nexport default listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","import eq from './eq.js';\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nexport default assocIndexOf;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nexport default listCacheDelete;\n","import listCacheClear from './_listCacheClear.js';\nimport listCacheDelete from './_listCacheDelete.js';\nimport listCacheGet from './_listCacheGet.js';\nimport listCacheHas from './_listCacheHas.js';\nimport listCacheSet from './_listCacheSet.js';\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nexport default ListCache;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nexport default listCacheGet;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nexport default listCacheHas;\n","import assocIndexOf from './_assocIndexOf.js';\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nexport default listCacheSet;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nexport default Map;\n","import getNative from './_getNative.js';\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nexport default nativeCreate;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nexport default hashGet;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nexport default hashHas;\n","import hashClear from './_hashClear.js';\nimport hashDelete from './_hashDelete.js';\nimport hashGet from './_hashGet.js';\nimport hashHas from './_hashHas.js';\nimport hashSet from './_hashSet.js';\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nexport default Hash;\n","import nativeCreate from './_nativeCreate.js';\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nexport default hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default hashDelete;\n","import nativeCreate from './_nativeCreate.js';\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nexport default hashSet;\n","import isKeyable from './_isKeyable.js';\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nexport default getMapData;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nexport default isKeyable;\n","import mapCacheClear from './_mapCacheClear.js';\nimport mapCacheDelete from './_mapCacheDelete.js';\nimport mapCacheGet from './_mapCacheGet.js';\nimport mapCacheHas from './_mapCacheHas.js';\nimport mapCacheSet from './_mapCacheSet.js';\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nexport default MapCache;\n","import Hash from './_Hash.js';\nimport ListCache from './_ListCache.js';\nimport Map from './_Map.js';\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nexport default mapCacheClear;\n","import getMapData from './_getMapData.js';\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nexport default mapCacheDelete;\n","import getMapData from './_getMapData.js';\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nexport default mapCacheGet;\n","import getMapData from './_getMapData.js';\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nexport default mapCacheHas;\n","import getMapData from './_getMapData.js';\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nexport default mapCacheSet;\n","import ListCache from './_ListCache.js';\nimport stackClear from './_stackClear.js';\nimport stackDelete from './_stackDelete.js';\nimport stackGet from './_stackGet.js';\nimport stackHas from './_stackHas.js';\nimport stackSet from './_stackSet.js';\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nexport default Stack;\n","import ListCache from './_ListCache.js';\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nexport default stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nexport default stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nexport default stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nexport default stackHas;\n","import ListCache from './_ListCache.js';\nimport Map from './_Map.js';\nimport MapCache from './_MapCache.js';\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nexport default stackSet;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import defineProperty from './_defineProperty.js';\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nexport default baseAssignValue;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/**\n * This function is like `assignValue` except that it doesn't assign\n * `undefined` values.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignMergeValue(object, key, value) {\n  if ((value !== undefined && !eq(object[key], value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignMergeValue;\n","import createBaseFor from './_createBaseFor.js';\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nexport default baseFor;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nexport default createBaseFor;\n","import root from './_root.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nexport default cloneBuffer;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nexport default Uint8Array;\n","import Uint8Array from './_Uint8Array.js';\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nexport default cloneArrayBuffer;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nexport default cloneTypedArray;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import isObject from './isObject.js';\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nexport default baseCreate;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import overArg from './_overArg.js';\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nexport default getPrototype;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import baseCreate from './_baseCreate.js';\nimport getPrototype from './_getPrototype.js';\nimport isPrototype from './_isPrototype.js';\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nexport default initCloneObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import baseGetTag from './_baseGetTag.js';\nimport getPrototype from './_getPrototype.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nexport default isPlainObject;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * Gets the value at `key`, unless `key` is \"__proto__\" or \"constructor\".\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction safeGet(object, key) {\n  if (key === 'constructor' && typeof object[key] === 'function') {\n    return;\n  }\n\n  if (key == '__proto__') {\n    return;\n  }\n\n  return object[key];\n}\n\nexport default safeGet;\n","import baseAssignValue from './_baseAssignValue.js';\nimport eq from './eq.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nexport default assignValue;\n","import assignValue from './_assignValue.js';\nimport baseAssignValue from './_baseAssignValue.js';\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nexport default copyObject;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import assignMergeValue from './_assignMergeValue.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\nimport copyArray from './_copyArray.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isArrayLikeObject from './isArrayLikeObject.js';\nimport isBuffer from './isBuffer.js';\nimport isFunction from './isFunction.js';\nimport isObject from './isObject.js';\nimport isPlainObject from './isPlainObject.js';\nimport isTypedArray from './isTypedArray.js';\nimport safeGet from './_safeGet.js';\nimport toPlainObject from './toPlainObject.js';\n\n/**\n * A specialized version of `baseMerge` for arrays and objects which performs\n * deep merges and tracks traversed objects enabling objects with circular\n * references to be merged.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {string} key The key of the value to merge.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} mergeFunc The function to merge values.\n * @param {Function} [customizer] The function to customize assigned values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {\n  var objValue = safeGet(object, key),\n      srcValue = safeGet(source, key),\n      stacked = stack.get(srcValue);\n\n  if (stacked) {\n    assignMergeValue(object, key, stacked);\n    return;\n  }\n  var newValue = customizer\n    ? customizer(objValue, srcValue, (key + ''), object, source, stack)\n    : undefined;\n\n  var isCommon = newValue === undefined;\n\n  if (isCommon) {\n    var isArr = isArray(srcValue),\n        isBuff = !isArr && isBuffer(srcValue),\n        isTyped = !isArr && !isBuff && isTypedArray(srcValue);\n\n    newValue = srcValue;\n    if (isArr || isBuff || isTyped) {\n      if (isArray(objValue)) {\n        newValue = objValue;\n      }\n      else if (isArrayLikeObject(objValue)) {\n        newValue = copyArray(objValue);\n      }\n      else if (isBuff) {\n        isCommon = false;\n        newValue = cloneBuffer(srcValue, true);\n      }\n      else if (isTyped) {\n        isCommon = false;\n        newValue = cloneTypedArray(srcValue, true);\n      }\n      else {\n        newValue = [];\n      }\n    }\n    else if (isPlainObject(srcValue) || isArguments(srcValue)) {\n      newValue = objValue;\n      if (isArguments(objValue)) {\n        newValue = toPlainObject(objValue);\n      }\n      else if (!isObject(objValue) || isFunction(objValue)) {\n        newValue = initCloneObject(srcValue);\n      }\n    }\n    else {\n      isCommon = false;\n    }\n  }\n  if (isCommon) {\n    // Recursively merge objects and arrays (susceptible to call stack limits).\n    stack.set(srcValue, newValue);\n    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);\n    stack['delete'](srcValue);\n  }\n  assignMergeValue(object, key, newValue);\n}\n\nexport default baseMergeDeep;\n","import isArrayLike from './isArrayLike.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nexport default isArrayLikeObject;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Converts `value` to a plain object flattening inherited enumerable string\n * keyed properties of `value` to own properties of the plain object.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {Object} Returns the converted plain object.\n * @example\n *\n * function Foo() {\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.assign({ 'a': 1 }, new Foo);\n * // => { 'a': 1, 'b': 2 }\n *\n * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));\n * // => { 'a': 1, 'b': 2, 'c': 3 }\n */\nfunction toPlainObject(value) {\n  return copyObject(value, keysIn(value));\n}\n\nexport default toPlainObject;\n","import Stack from './_Stack.js';\nimport assignMergeValue from './_assignMergeValue.js';\nimport baseFor from './_baseFor.js';\nimport baseMergeDeep from './_baseMergeDeep.js';\nimport isObject from './isObject.js';\nimport keysIn from './keysIn.js';\nimport safeGet from './_safeGet.js';\n\n/**\n * The base implementation of `_.merge` without support for multiple sources.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @param {number} srcIndex The index of `source`.\n * @param {Function} [customizer] The function to customize merged values.\n * @param {Object} [stack] Tracks traversed source values and their merged\n *  counterparts.\n */\nfunction baseMerge(object, source, srcIndex, customizer, stack) {\n  if (object === source) {\n    return;\n  }\n  baseFor(source, function(srcValue, key) {\n    stack || (stack = new Stack);\n    if (isObject(srcValue)) {\n      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);\n    }\n    else {\n      var newValue = customizer\n        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)\n        : undefined;\n\n      if (newValue === undefined) {\n        newValue = srcValue;\n      }\n      assignMergeValue(object, key, newValue);\n    }\n  }, keysIn);\n}\n\nexport default baseMerge;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import baseMerge from './_baseMerge.js';\nimport createAssigner from './_createAssigner.js';\n\n/**\n * This method is like `_.assign` except that it recursively merges own and\n * inherited enumerable string keyed properties of source objects into the\n * destination object. Source properties that resolve to `undefined` are\n * skipped if a destination value exists. Array and plain object properties\n * are merged recursively. Other objects and value types are overridden by\n * assignment. Source objects are applied from left to right. Subsequent\n * sources overwrite property assignments of previous sources.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @memberOf _\n * @since 0.5.0\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @example\n *\n * var object = {\n *   'a': [{ 'b': 2 }, { 'd': 4 }]\n * };\n *\n * var other = {\n *   'a': [{ 'c': 3 }, { 'e': 5 }]\n * };\n *\n * _.merge(object, other);\n * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }\n */\nvar merge = createAssigner(function(object, source, srcIndex) {\n  baseMerge(object, source, srcIndex);\n});\n\nexport default merge;\n","import baseRest from './_baseRest.js';\nimport isIterateeCall from './_isIterateeCall.js';\n\n/**\n * Creates a function like `_.assign`.\n *\n * @private\n * @param {Function} assigner The function to assign values.\n * @returns {Function} Returns the new assigner function.\n */\nfunction createAssigner(assigner) {\n  return baseRest(function(object, sources) {\n    var index = -1,\n        length = sources.length,\n        customizer = length > 1 ? sources[length - 1] : undefined,\n        guard = length > 2 ? sources[2] : undefined;\n\n    customizer = (assigner.length > 3 && typeof customizer == 'function')\n      ? (length--, customizer)\n      : undefined;\n\n    if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n      customizer = length < 3 ? undefined : customizer;\n      length = 1;\n    }\n    object = Object(object);\n    while (++index < length) {\n      var source = sources[index];\n      if (source) {\n        assigner(object, source, index, customizer);\n      }\n    }\n    return object;\n  });\n}\n\nexport default createAssigner;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","function _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nexport { _assertThisInitialized as default };","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nexport { _typeof as default };","import _typeof from \"./typeof.js\";\nimport toPrimitive from \"./toPrimitive.js\";\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nexport { toPropertyKey as default };","import _typeof from \"./typeof.js\";\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nexport { toPrimitive as default };","import toPropertyKey from \"./toPropertyKey.js\";\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nexport { _createClass as default };","function _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nexport { _getPrototypeOf as default };","function _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nexport { _isNativeReflectConstruct as default };","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nfunction _wrapNativeSuper(t) {\n  var r = \"function\" == typeof Map ? new Map() : void 0;\n  return _wrapNativeSuper = function _wrapNativeSuper(t) {\n    if (null === t || !isNativeFunction(t)) return t;\n    if (\"function\" != typeof t) throw new TypeError(\"Super expression must either be null or a function\");\n    if (void 0 !== r) {\n      if (r.has(t)) return r.get(t);\n      r.set(t, Wrapper);\n    }\n    function Wrapper() {\n      return construct(t, arguments, getPrototypeOf(this).constructor);\n    }\n    return Wrapper.prototype = Object.create(t.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: !1,\n        writable: !0,\n        configurable: !0\n      }\n    }), setPrototypeOf(Wrapper, t);\n  }, _wrapNativeSuper(t);\n}\nexport { _wrapNativeSuper as default };","function _isNativeFunction(t) {\n  try {\n    return -1 !== Function.toString.call(t).indexOf(\"[native code]\");\n  } catch (n) {\n    return \"function\" == typeof t;\n  }\n}\nexport { _isNativeFunction as default };","import isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nfunction _construct(t, e, r) {\n  if (isNativeReflectConstruct()) return Reflect.construct.apply(null, arguments);\n  var o = [null];\n  o.push.apply(o, e);\n  var p = new (t.bind.apply(t, o))();\n  return r && setPrototypeOf(p, r.prototype), p;\n}\nexport { _construct as default };","enum Scope {\n  TYPE = (1 << 2) - 1, // 0011 Lower two bits\n  LEVEL = ((1 << 2) - 1) << 2, // 1100 Higher two bits\n\n  ATTRIBUTE = (1 << 0) | LEVEL, // 1101\n  BLOT = (1 << 1) | LEVEL, // 1110\n  INLINE = (1 << 2) | TYPE, // 0111\n  BLOCK = (1 << 3) | TYPE, // 1011\n\n  BLOCK_BLOT = BLOCK & BLOT, // 1010\n  INLINE_BLOT = INLINE & BLOT, // 0110\n  BLOCK_ATTRIBUTE = BLOCK & ATTRIBUTE, // 1001\n  INLINE_ATTRIBUTE = INLINE & ATTRIBUTE, // 0101\n\n  ANY = TYPE | LEVEL,\n}\n\nexport default Scope;\n","import Scope from '../scope.js';\n\nexport interface AttributorOptions {\n  scope?: Scope;\n  whitelist?: string[];\n}\n\nexport default class Attributor {\n  public static keys(node: HTMLElement): string[] {\n    return Array.from(node.attributes).map((item: Attr) => item.name);\n  }\n\n  public scope: Scope;\n  public whitelist: string[] | undefined;\n\n  constructor(\n    public readonly attrName: string,\n    public readonly keyName: string,\n    options: AttributorOptions = {},\n  ) {\n    const attributeBit = Scope.TYPE & Scope.ATTRIBUTE;\n    this.scope =\n      options.scope != null\n        ? // Ignore type bits, force attribute bit\n          (options.scope & Scope.LEVEL) | attributeBit\n        : Scope.ATTRIBUTE;\n    if (options.whitelist != null) {\n      this.whitelist = options.whitelist;\n    }\n  }\n\n  public add(node: HTMLElement, value: any): boolean {\n    if (!this.canAdd(node, value)) {\n      return false;\n    }\n    node.setAttribute(this.keyName, value);\n    return true;\n  }\n\n  public canAdd(_node: HTMLElement, value: any): boolean {\n    if (this.whitelist == null) {\n      return true;\n    }\n    if (typeof value === 'string') {\n      return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n    } else {\n      return this.whitelist.indexOf(value) > -1;\n    }\n  }\n\n  public remove(node: HTMLElement): void {\n    node.removeAttribute(this.keyName);\n  }\n\n  public value(node: HTMLElement): any {\n    const value = node.getAttribute(this.keyName);\n    if (this.canAdd(node, value) && value) {\n      return value;\n    }\n    return '';\n  }\n}\n","export default class ParchmentError extends Error {\n  public message: string;\n  public name: string;\n  public stack!: string;\n\n  constructor(message: string) {\n    message = '[Parchment] ' + message;\n    super(message);\n    this.message = message;\n    this.name = this.constructor.name;\n  }\n}\n","import Attributor from './attributor/attributor.js';\nimport {\n  type Blot,\n  type BlotConstructor,\n  type Root,\n} from './blot/abstract/blot.js';\nimport ParchmentError from './error.js';\nimport Scope from './scope.js';\n\nexport type RegistryDefinition = Attributor | BlotConstructor;\n\nexport interface RegistryInterface {\n  create(scroll: Root, input: Node | string | Scope, value?: any): Blot;\n  query(query: string | Node | Scope, scope: Scope): RegistryDefinition | null;\n  register(...definitions: any[]): any;\n}\n\nexport default class Registry implements RegistryInterface {\n  public static blots = new WeakMap<Node, Blot>();\n\n  public static find(node?: Node | null, bubble = false): Blot | null {\n    if (node == null) {\n      return null;\n    }\n    if (this.blots.has(node)) {\n      return this.blots.get(node) || null;\n    }\n    if (bubble) {\n      let parentNode: Node | null = null;\n      try {\n        parentNode = node.parentNode;\n      } catch (err) {\n        // Probably hit a permission denied error.\n        // A known case is in Firefox, event targets can be anonymous DIVs\n        // inside an input element.\n        // https://bugzilla.mozilla.org/show_bug.cgi?id=208427\n        return null;\n      }\n      return this.find(parentNode, bubble);\n    }\n    return null;\n  }\n\n  private attributes: { [key: string]: Attributor } = {};\n  private classes: { [key: string]: BlotConstructor } = {};\n  private tags: { [key: string]: BlotConstructor } = {};\n  private types: { [key: string]: RegistryDefinition } = {};\n\n  public create(scroll: Root, input: Node | string | Scope, value?: any): Blot {\n    const match = this.query(input);\n    if (match == null) {\n      throw new ParchmentError(`Unable to create ${input} blot`);\n    }\n    const blotClass = match as BlotConstructor;\n    const node =\n      // @ts-expect-error Fix me later\n      input instanceof Node || input.nodeType === Node.TEXT_NODE\n        ? input\n        : blotClass.create(value);\n\n    const blot = new blotClass(scroll, node as Node, value);\n    Registry.blots.set(blot.domNode, blot);\n    return blot;\n  }\n\n  public find(node: Node | null, bubble = false): Blot | null {\n    return Registry.find(node, bubble);\n  }\n\n  public query(\n    query: string | Node | Scope,\n    scope: Scope = Scope.ANY,\n  ): RegistryDefinition | null {\n    let match;\n    if (typeof query === 'string') {\n      match = this.types[query] || this.attributes[query];\n      // @ts-expect-error Fix me later\n    } else if (query instanceof Text || query.nodeType === Node.TEXT_NODE) {\n      match = this.types.text;\n    } else if (typeof query === 'number') {\n      if (query & Scope.LEVEL & Scope.BLOCK) {\n        match = this.types.block;\n      } else if (query & Scope.LEVEL & Scope.INLINE) {\n        match = this.types.inline;\n      }\n    } else if (query instanceof Element) {\n      const names = (query.getAttribute('class') || '').split(/\\s+/);\n      names.some((name) => {\n        match = this.classes[name];\n        if (match) {\n          return true;\n        }\n        return false;\n      });\n      match = match || this.tags[query.tagName];\n    }\n    if (match == null) {\n      return null;\n    }\n    if (\n      'scope' in match &&\n      scope & Scope.LEVEL & match.scope &&\n      scope & Scope.TYPE & match.scope\n    ) {\n      return match;\n    }\n    return null;\n  }\n\n  public register(...definitions: RegistryDefinition[]): RegistryDefinition[] {\n    return definitions.map((definition) => {\n      const isBlot = 'blotName' in definition;\n      const isAttr = 'attrName' in definition;\n      if (!isBlot && !isAttr) {\n        throw new ParchmentError('Invalid definition');\n      } else if (isBlot && definition.blotName === 'abstract') {\n        throw new ParchmentError('Cannot register abstract class');\n      }\n      const key = isBlot\n        ? definition.blotName\n        : isAttr\n          ? definition.attrName\n          : (undefined as never); // already handled by above checks\n      this.types[key] = definition;\n\n      if (isAttr) {\n        if (typeof definition.keyName === 'string') {\n          this.attributes[definition.keyName] = definition;\n        }\n      } else if (isBlot) {\n        if (definition.className) {\n          this.classes[definition.className] = definition;\n        }\n        if (definition.tagName) {\n          if (Array.isArray(definition.tagName)) {\n            definition.tagName = definition.tagName.map((tagName: string) => {\n              return tagName.toUpperCase();\n            });\n          } else {\n            definition.tagName = definition.tagName.toUpperCase();\n          }\n          const tagNames = Array.isArray(definition.tagName)\n            ? definition.tagName\n            : [definition.tagName];\n          tagNames.forEach((tag: string) => {\n            if (this.tags[tag] == null || definition.className == null) {\n              this.tags[tag] = definition;\n            }\n          });\n        }\n      }\n      return definition;\n    });\n  }\n}\n","import Attributor from './attributor.js';\n\nfunction match(node: HTMLElement, prefix: string): string[] {\n  const className = node.getAttribute('class') || '';\n  return className\n    .split(/\\s+/)\n    .filter((name) => name.indexOf(`${prefix}-`) === 0);\n}\n\nclass ClassAttributor extends Attributor {\n  public static keys(node: HTMLElement): string[] {\n    return (node.getAttribute('class') || '')\n      .split(/\\s+/)\n      .map((name) => name.split('-').slice(0, -1).join('-'));\n  }\n\n  public add(node: HTMLElement, value: any): boolean {\n    if (!this.canAdd(node, value)) {\n      return false;\n    }\n    this.remove(node);\n    node.classList.add(`${this.keyName}-${value}`);\n    return true;\n  }\n\n  public remove(node: HTMLElement): void {\n    const matches = match(node, this.keyName);\n    matches.forEach((name) => {\n      node.classList.remove(name);\n    });\n    if (node.classList.length === 0) {\n      node.removeAttribute('class');\n    }\n  }\n\n  public value(node: HTMLElement): any {\n    const result = match(node, this.keyName)[0] || '';\n    const value = result.slice(this.keyName.length + 1); // +1 for hyphen\n    return this.canAdd(node, value) ? value : '';\n  }\n}\n\nexport default ClassAttributor;\n","import Attributor from './attributor.js';\n\nfunction camelize(name: string): string {\n  const parts = name.split('-');\n  const rest = parts\n    .slice(1)\n    .map((part: string) => part[0].toUpperCase() + part.slice(1))\n    .join('');\n  return parts[0] + rest;\n}\n\nclass StyleAttributor extends Attributor {\n  public static keys(node: HTMLElement): string[] {\n    return (node.getAttribute('style') || '').split(';').map((value) => {\n      const arr = value.split(':');\n      return arr[0].trim();\n    });\n  }\n\n  public add(node: HTMLElement, value: any): boolean {\n    if (!this.canAdd(node, value)) {\n      return false;\n    }\n    // @ts-expect-error Fix me later\n    node.style[camelize(this.keyName)] = value;\n    return true;\n  }\n\n  public remove(node: HTMLElement): void {\n    // @ts-expect-error Fix me later\n    node.style[camelize(this.keyName)] = '';\n    if (!node.getAttribute('style')) {\n      node.removeAttribute('style');\n    }\n  }\n\n  public value(node: HTMLElement): any {\n    // @ts-expect-error Fix me later\n    const value = node.style[camelize(this.keyName)];\n    return this.canAdd(node, value) ? value : '';\n  }\n}\n\nexport default StyleAttributor;\n","import type { Formattable } from '../blot/abstract/blot.js';\nimport Registry from '../registry.js';\nimport Scope from '../scope.js';\nimport Attributor from './attributor.js';\nimport ClassAttributor from './class.js';\nimport StyleAttributor from './style.js';\n\nclass AttributorStore {\n  private attributes: { [key: string]: Attributor } = {};\n  private domNode: HTMLElement;\n\n  constructor(domNode: HTMLElement) {\n    this.domNode = domNode;\n    this.build();\n  }\n\n  public attribute(attribute: Attributor, value: any): void {\n    // verb\n    if (value) {\n      if (attribute.add(this.domNode, value)) {\n        if (attribute.value(this.domNode) != null) {\n          this.attributes[attribute.attrName] = attribute;\n        } else {\n          delete this.attributes[attribute.attrName];\n        }\n      }\n    } else {\n      attribute.remove(this.domNode);\n      delete this.attributes[attribute.attrName];\n    }\n  }\n\n  public build(): void {\n    this.attributes = {};\n    const blot = Registry.find(this.domNode);\n    if (blot == null) {\n      return;\n    }\n    const attributes = Attributor.keys(this.domNode);\n    const classes = ClassAttributor.keys(this.domNode);\n    const styles = StyleAttributor.keys(this.domNode);\n    attributes\n      .concat(classes)\n      .concat(styles)\n      .forEach((name) => {\n        const attr = blot.scroll.query(name, Scope.ATTRIBUTE);\n        if (attr instanceof Attributor) {\n          this.attributes[attr.attrName] = attr;\n        }\n      });\n  }\n\n  public copy(target: Formattable): void {\n    Object.keys(this.attributes).forEach((key) => {\n      const value = this.attributes[key].value(this.domNode);\n      target.format(key, value);\n    });\n  }\n\n  public move(target: Formattable): void {\n    this.copy(target);\n    Object.keys(this.attributes).forEach((key) => {\n      this.attributes[key].remove(this.domNode);\n    });\n    this.attributes = {};\n  }\n\n  public values(): { [key: string]: any } {\n    return Object.keys(this.attributes).reduce(\n      (attributes: { [key: string]: any }, name: string) => {\n        attributes[name] = this.attributes[name].value(this.domNode);\n        return attributes;\n      },\n      {},\n    );\n  }\n}\n\nexport default AttributorStore;\n","import ParchmentError from '../../error.js';\nimport Registry from '../../registry.js';\nimport Scope from '../../scope.js';\nimport type {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Parent,\n  Root,\n} from './blot.js';\n\nclass ShadowBlot implements Blot {\n  public static blotName = 'abstract';\n  public static className: string;\n  public static requiredContainer: BlotConstructor;\n  public static scope: Scope;\n  public static tagName: string | string[];\n\n  public static create(rawValue?: unknown): Node {\n    if (this.tagName == null) {\n      throw new ParchmentError('Blot definition missing tagName');\n    }\n    let node: HTMLElement;\n    let value: string | number | undefined;\n    if (Array.isArray(this.tagName)) {\n      if (typeof rawValue === 'string') {\n        value = rawValue.toUpperCase();\n        if (parseInt(value, 10).toString() === value) {\n          value = parseInt(value, 10);\n        }\n      } else if (typeof rawValue === 'number') {\n        value = rawValue;\n      }\n      if (typeof value === 'number') {\n        node = document.createElement(this.tagName[value - 1]);\n      } else if (value && this.tagName.indexOf(value) > -1) {\n        node = document.createElement(value);\n      } else {\n        node = document.createElement(this.tagName[0]);\n      }\n    } else {\n      node = document.createElement(this.tagName);\n    }\n    if (this.className) {\n      node.classList.add(this.className);\n    }\n    return node;\n  }\n\n  public prev: Blot | null;\n  public next: Blot | null;\n  // @ts-expect-error Fix me later\n  public parent: Parent;\n\n  // Hack for accessing inherited static methods\n  get statics(): any {\n    return this.constructor;\n  }\n  constructor(\n    public scroll: Root,\n    public domNode: Node,\n  ) {\n    Registry.blots.set(domNode, this);\n    this.prev = null;\n    this.next = null;\n  }\n\n  public attach(): void {\n    // Nothing to do\n  }\n\n  public clone(): Blot {\n    const domNode = this.domNode.cloneNode(false);\n    return this.scroll.create(domNode);\n  }\n\n  public detach(): void {\n    if (this.parent != null) {\n      this.parent.removeChild(this);\n    }\n    Registry.blots.delete(this.domNode);\n  }\n\n  public deleteAt(index: number, length: number): void {\n    const blot = this.isolate(index, length);\n    blot.remove();\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    const blot = this.isolate(index, length);\n    if (this.scroll.query(name, Scope.BLOT) != null && value) {\n      blot.wrap(name, value);\n    } else if (this.scroll.query(name, Scope.ATTRIBUTE) != null) {\n      const parent = this.scroll.create(this.statics.scope) as Parent &\n        Formattable;\n      blot.wrap(parent);\n      parent.format(name, value);\n    }\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    const blot =\n      def == null\n        ? this.scroll.create('text', value)\n        : this.scroll.create(value, def);\n    const ref = this.split(index);\n    this.parent.insertBefore(blot, ref || undefined);\n  }\n\n  public isolate(index: number, length: number): Blot {\n    const target = this.split(index);\n    if (target == null) {\n      throw new Error('Attempt to isolate at end');\n    }\n    target.split(length);\n    return target;\n  }\n\n  public length(): number {\n    return 1;\n  }\n\n  public offset(root: Blot = this.parent): number {\n    if (this.parent == null || this === root) {\n      return 0;\n    }\n    return this.parent.children.offset(this) + this.parent.offset(root);\n  }\n\n  public optimize(_context?: { [key: string]: any }): void {\n    if (\n      this.statics.requiredContainer &&\n      !(this.parent instanceof this.statics.requiredContainer)\n    ) {\n      this.wrap(this.statics.requiredContainer.blotName);\n    }\n  }\n\n  public remove(): void {\n    if (this.domNode.parentNode != null) {\n      this.domNode.parentNode.removeChild(this.domNode);\n    }\n    this.detach();\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement =\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\n    if (this.parent != null) {\n      this.parent.insertBefore(replacement, this.next || undefined);\n      this.remove();\n    }\n    return replacement;\n  }\n\n  public split(index: number, _force?: boolean): Blot | null {\n    return index === 0 ? this : this.next;\n  }\n\n  public update(\n    _mutations: MutationRecord[],\n    _context: { [key: string]: any },\n  ): void {\n    // Nothing to do by default\n  }\n\n  public wrap(name: string | Parent, value?: any): Parent {\n    const wrapper =\n      typeof name === 'string'\n        ? (this.scroll.create(name, value) as Parent)\n        : name;\n    if (this.parent != null) {\n      this.parent.insertBefore(wrapper, this.next || undefined);\n    }\n    if (typeof wrapper.appendChild !== 'function') {\n      throw new ParchmentError(`Cannot wrap ${name}`);\n    }\n    wrapper.appendChild(this);\n    return wrapper;\n  }\n}\n\nexport default ShadowBlot;\n","import Scope from '../../scope.js';\nimport type { Leaf } from './blot.js';\nimport ShadowBlot from './shadow.js';\n\nclass LeafBlot extends ShadowBlot implements Leaf {\n  public static scope = Scope.INLINE_BLOT;\n\n  /**\n   * Returns the value represented by domNode if it is this Blot's type\n   * No checking that domNode can represent this Blot type is required so\n   * applications needing it should check externally before calling.\n   */\n  public static value(_domNode: Node): any {\n    return true;\n  }\n\n  /**\n   * Given location represented by node and offset from DOM Selection Range,\n   * return index to that location.\n   */\n  public index(node: Node, offset: number): number {\n    if (\n      this.domNode === node ||\n      this.domNode.compareDocumentPosition(node) &\n        Node.DOCUMENT_POSITION_CONTAINED_BY\n    ) {\n      return Math.min(offset, 1);\n    }\n    return -1;\n  }\n\n  /**\n   * Given index to location within blot, return node and offset representing\n   * that location, consumable by DOM Selection Range\n   */\n  public position(index: number, _inclusive?: boolean): [Node, number] {\n    const childNodes: Node[] = Array.from(this.parent.domNode.childNodes);\n    let offset = childNodes.indexOf(this.domNode);\n    if (index > 0) {\n      offset += 1;\n    }\n    return [this.parent.domNode, offset];\n  }\n\n  /**\n   * Return value represented by this blot\n   * Should not change without interaction from API or\n   * user change detectable by update()\n   */\n  public value(): any {\n    return {\n      [this.statics.blotName]: this.statics.value(this.domNode) || true,\n    };\n  }\n}\n\nexport default LeafBlot;\n","import type LinkedNode from './linked-node.js';\n\nclass LinkedList<T extends LinkedNode> {\n  public head: T | null;\n  public tail: T | null;\n  public length: number;\n\n  constructor() {\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  public append(...nodes: T[]): void {\n    this.insertBefore(nodes[0], null);\n    if (nodes.length > 1) {\n      const rest = nodes.slice(1);\n      this.append(...rest);\n    }\n  }\n\n  public at(index: number): T | null {\n    const next = this.iterator();\n    let cur = next();\n    while (cur && index > 0) {\n      index -= 1;\n      cur = next();\n    }\n    return cur;\n  }\n\n  public contains(node: T): boolean {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      if (cur === node) {\n        return true;\n      }\n      cur = next();\n    }\n    return false;\n  }\n\n  public indexOf(node: T): number {\n    const next = this.iterator();\n    let cur = next();\n    let index = 0;\n    while (cur) {\n      if (cur === node) {\n        return index;\n      }\n      index += 1;\n      cur = next();\n    }\n    return -1;\n  }\n\n  public insertBefore(node: T | null, refNode: T | null): void {\n    if (node == null) {\n      return;\n    }\n    this.remove(node);\n    node.next = refNode;\n    if (refNode != null) {\n      node.prev = refNode.prev;\n      if (refNode.prev != null) {\n        refNode.prev.next = node;\n      }\n      refNode.prev = node;\n      if (refNode === this.head) {\n        this.head = node;\n      }\n    } else if (this.tail != null) {\n      this.tail.next = node;\n      node.prev = this.tail;\n      this.tail = node;\n    } else {\n      node.prev = null;\n      this.head = this.tail = node;\n    }\n    this.length += 1;\n  }\n\n  public offset(target: T): number {\n    let index = 0;\n    let cur = this.head;\n    while (cur != null) {\n      if (cur === target) {\n        return index;\n      }\n      index += cur.length();\n      cur = cur.next as T;\n    }\n    return -1;\n  }\n\n  public remove(node: T): void {\n    if (!this.contains(node)) {\n      return;\n    }\n    if (node.prev != null) {\n      node.prev.next = node.next;\n    }\n    if (node.next != null) {\n      node.next.prev = node.prev;\n    }\n    if (node === this.head) {\n      this.head = node.next as T;\n    }\n    if (node === this.tail) {\n      this.tail = node.prev as T;\n    }\n    this.length -= 1;\n  }\n\n  public iterator(curNode: T | null = this.head): () => T | null {\n    // TODO use yield when we can\n    return (): T | null => {\n      const ret = curNode;\n      if (curNode != null) {\n        curNode = curNode.next as T;\n      }\n      return ret;\n    };\n  }\n\n  public find(index: number, inclusive = false): [T | null, number] {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      const length = cur.length();\n      if (\n        index < length ||\n        (inclusive &&\n          index === length &&\n          (cur.next == null || cur.next.length() !== 0))\n      ) {\n        return [cur, index];\n      }\n      index -= length;\n      cur = next();\n    }\n    return [null, 0];\n  }\n\n  public forEach(callback: (cur: T) => void): void {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      callback(cur);\n      cur = next();\n    }\n  }\n\n  public forEachAt(\n    index: number,\n    length: number,\n    callback: (cur: T, offset: number, length: number) => void,\n  ): void {\n    if (length <= 0) {\n      return;\n    }\n    const [startNode, offset] = this.find(index);\n    let curIndex = index - offset;\n    const next = this.iterator(startNode);\n    let cur = next();\n    while (cur && curIndex < index + length) {\n      const curLength = cur.length();\n      if (index > curIndex) {\n        callback(\n          cur,\n          index - curIndex,\n          Math.min(length, curIndex + curLength - index),\n        );\n      } else {\n        callback(cur, 0, Math.min(curLength, index + length - curIndex));\n      }\n      curIndex += curLength;\n      cur = next();\n    }\n  }\n\n  public map(callback: (cur: T) => any): any[] {\n    return this.reduce((memo: T[], cur: T) => {\n      memo.push(callback(cur));\n      return memo;\n    }, []);\n  }\n\n  public reduce<M>(callback: (memo: M, cur: T) => M, memo: M): M {\n    const next = this.iterator();\n    let cur = next();\n    while (cur) {\n      memo = callback(memo, cur);\n      cur = next();\n    }\n    return memo;\n  }\n}\n\nexport default LinkedList;\n","import LinkedList from '../../collection/linked-list.js';\nimport ParchmentError from '../../error.js';\nimport Scope from '../../scope.js';\nimport type { Blot, BlotConstructor, Parent, Root } from './blot.js';\nimport ShadowBlot from './shadow.js';\n\nfunction makeAttachedBlot(node: Node, scroll: Root): Blot {\n  const found = scroll.find(node);\n  if (found) return found;\n  try {\n    return scroll.create(node);\n  } catch (e) {\n    const blot = scroll.create(Scope.INLINE);\n    Array.from(node.childNodes).forEach((child: Node) => {\n      blot.domNode.appendChild(child);\n    });\n    if (node.parentNode) {\n      node.parentNode.replaceChild(blot.domNode, node);\n    }\n    blot.attach();\n    return blot;\n  }\n}\n\nclass ParentBlot extends ShadowBlot implements Parent {\n  /**\n   * Whitelist array of Blots that can be direct children.\n   */\n  public static allowedChildren?: BlotConstructor[];\n\n  /**\n   * Default child blot to be inserted if this blot becomes empty.\n   */\n  public static defaultChild?: BlotConstructor;\n  public static uiClass = '';\n\n  public children!: LinkedList<Blot>;\n  public domNode!: HTMLElement;\n  public uiNode: HTMLElement | null = null;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.build();\n  }\n\n  public appendChild(other: Blot): void {\n    this.insertBefore(other);\n  }\n\n  public attach(): void {\n    super.attach();\n    this.children.forEach((child) => {\n      child.attach();\n    });\n  }\n\n  public attachUI(node: HTMLElement): void {\n    if (this.uiNode != null) {\n      this.uiNode.remove();\n    }\n    this.uiNode = node;\n    if (ParentBlot.uiClass) {\n      this.uiNode.classList.add(ParentBlot.uiClass);\n    }\n    this.uiNode.setAttribute('contenteditable', 'false');\n    this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n  }\n\n  /**\n   * Called during construction, should fill its own children LinkedList.\n   */\n  public build(): void {\n    this.children = new LinkedList<Blot>();\n    // Need to be reversed for if DOM nodes already in order\n    Array.from(this.domNode.childNodes)\n      .filter((node: Node) => node !== this.uiNode)\n      .reverse()\n      .forEach((node: Node) => {\n        try {\n          const child = makeAttachedBlot(node, this.scroll);\n          this.insertBefore(child, this.children.head || undefined);\n        } catch (err) {\n          if (err instanceof ParchmentError) {\n            return;\n          } else {\n            throw err;\n          }\n        }\n      });\n  }\n\n  public deleteAt(index: number, length: number): void {\n    if (index === 0 && length === this.length()) {\n      return this.remove();\n    }\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.deleteAt(offset, childLength);\n    });\n  }\n\n  public descendant<T extends Blot>(\n    criteria: new (...args: any[]) => T,\n    index: number,\n  ): [T | null, number];\n  public descendant(\n    criteria: (blot: Blot) => boolean,\n    index: number,\n  ): [Blot | null, number];\n  public descendant(criteria: any, index = 0): [Blot | null, number] {\n    const [child, offset] = this.children.find(index);\n    if (\n      (criteria.blotName == null && criteria(child)) ||\n      (criteria.blotName != null && child instanceof criteria)\n    ) {\n      return [child as any, offset];\n    } else if (child instanceof ParentBlot) {\n      return child.descendant(criteria, offset);\n    } else {\n      return [null, -1];\n    }\n  }\n\n  public descendants<T extends Blot>(\n    criteria: new (...args: any[]) => T,\n    index?: number,\n    length?: number,\n  ): T[];\n  public descendants(\n    criteria: (blot: Blot) => boolean,\n    index?: number,\n    length?: number,\n  ): Blot[];\n  public descendants(\n    criteria: any,\n    index = 0,\n    length: number = Number.MAX_VALUE,\n  ): Blot[] {\n    let descendants: Blot[] = [];\n    let lengthLeft = length;\n    this.children.forEachAt(\n      index,\n      length,\n      (child: Blot, childIndex: number, childLength: number) => {\n        if (\n          (criteria.blotName == null && criteria(child)) ||\n          (criteria.blotName != null && child instanceof criteria)\n        ) {\n          descendants.push(child);\n        }\n        if (child instanceof ParentBlot) {\n          descendants = descendants.concat(\n            child.descendants(criteria, childIndex, lengthLeft),\n          );\n        }\n        lengthLeft -= childLength;\n      },\n    );\n    return descendants;\n  }\n\n  public detach(): void {\n    this.children.forEach((child) => {\n      child.detach();\n    });\n    super.detach();\n  }\n\n  public enforceAllowedChildren(): void {\n    let done = false;\n    this.children.forEach((child: Blot) => {\n      if (done) {\n        return;\n      }\n      const allowed = this.statics.allowedChildren.some(\n        (def: BlotConstructor) => child instanceof def,\n      );\n      if (allowed) {\n        return;\n      }\n      if (child.statics.scope === Scope.BLOCK_BLOT) {\n        if (child.next != null) {\n          this.splitAfter(child);\n        }\n        if (child.prev != null) {\n          this.splitAfter(child.prev);\n        }\n        child.parent.unwrap();\n        done = true;\n      } else if (child instanceof ParentBlot) {\n        child.unwrap();\n      } else {\n        child.remove();\n      }\n    });\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    this.children.forEachAt(index, length, (child, offset, childLength) => {\n      child.formatAt(offset, childLength, name, value);\n    });\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    const [child, offset] = this.children.find(index);\n    if (child) {\n      child.insertAt(offset, value, def);\n    } else {\n      const blot =\n        def == null\n          ? this.scroll.create('text', value)\n          : this.scroll.create(value, def);\n      this.appendChild(blot);\n    }\n  }\n\n  public insertBefore(childBlot: Blot, refBlot?: Blot | null): void {\n    if (childBlot.parent != null) {\n      childBlot.parent.children.remove(childBlot);\n    }\n    let refDomNode: Node | null = null;\n    this.children.insertBefore(childBlot, refBlot || null);\n    childBlot.parent = this;\n    if (refBlot != null) {\n      refDomNode = refBlot.domNode;\n    }\n    if (\n      this.domNode.parentNode !== childBlot.domNode ||\n      this.domNode.nextSibling !== refDomNode\n    ) {\n      this.domNode.insertBefore(childBlot.domNode, refDomNode);\n    }\n    childBlot.attach();\n  }\n\n  public length(): number {\n    return this.children.reduce((memo, child) => {\n      return memo + child.length();\n    }, 0);\n  }\n\n  public moveChildren(targetParent: Parent, refNode?: Blot | null): void {\n    this.children.forEach((child) => {\n      targetParent.insertBefore(child, refNode);\n    });\n  }\n\n  public optimize(context?: { [key: string]: any }): void {\n    super.optimize(context);\n    this.enforceAllowedChildren();\n    if (this.uiNode != null && this.uiNode !== this.domNode.firstChild) {\n      this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n    }\n    if (this.children.length === 0) {\n      if (this.statics.defaultChild != null) {\n        const child = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(child);\n        // TODO double check if necessary\n        // child.optimize(context);\n      } else {\n        this.remove();\n      }\n    }\n  }\n\n  public path(index: number, inclusive = false): [Blot, number][] {\n    const [child, offset] = this.children.find(index, inclusive);\n    const position: [Blot, number][] = [[this, index]];\n    if (child instanceof ParentBlot) {\n      return position.concat(child.path(offset, inclusive));\n    } else if (child != null) {\n      position.push([child, offset]);\n    }\n    return position;\n  }\n\n  public removeChild(child: Blot): void {\n    this.children.remove(child);\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement =\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\n    if (replacement instanceof ParentBlot) {\n      this.moveChildren(replacement);\n    }\n    return super.replaceWith(replacement);\n  }\n\n  public split(index: number, force = false): Blot | null {\n    if (!force) {\n      if (index === 0) {\n        return this;\n      }\n      if (index === this.length()) {\n        return this.next;\n      }\n    }\n    const after = this.clone() as ParentBlot;\n    if (this.parent) {\n      this.parent.insertBefore(after, this.next || undefined);\n    }\n    this.children.forEachAt(index, this.length(), (child, offset, _length) => {\n      const split = child.split(offset, force);\n      if (split != null) {\n        after.appendChild(split);\n      }\n    });\n    return after;\n  }\n\n  public splitAfter(child: Blot): Parent {\n    const after = this.clone() as ParentBlot;\n    while (child.next != null) {\n      after.appendChild(child.next);\n    }\n    if (this.parent) {\n      this.parent.insertBefore(after, this.next || undefined);\n    }\n    return after;\n  }\n\n  public unwrap(): void {\n    if (this.parent) {\n      this.moveChildren(this.parent, this.next || undefined);\n    }\n    this.remove();\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    _context: { [key: string]: any },\n  ): void {\n    const addedNodes: Node[] = [];\n    const removedNodes: Node[] = [];\n    mutations.forEach((mutation) => {\n      if (mutation.target === this.domNode && mutation.type === 'childList') {\n        addedNodes.push(...mutation.addedNodes);\n        removedNodes.push(...mutation.removedNodes);\n      }\n    });\n    removedNodes.forEach((node: Node) => {\n      // Check node has actually been removed\n      // One exception is Chrome does not immediately remove IFRAMEs\n      // from DOM but MutationRecord is correct in its reported removal\n      if (\n        node.parentNode != null &&\n        // @ts-expect-error Fix me later\n        node.tagName !== 'IFRAME' &&\n        document.body.compareDocumentPosition(node) &\n          Node.DOCUMENT_POSITION_CONTAINED_BY\n      ) {\n        return;\n      }\n      const blot = this.scroll.find(node);\n      if (blot == null) {\n        return;\n      }\n      if (\n        blot.domNode.parentNode == null ||\n        blot.domNode.parentNode === this.domNode\n      ) {\n        blot.detach();\n      }\n    });\n    addedNodes\n      .filter((node) => {\n        return node.parentNode === this.domNode && node !== this.uiNode;\n      })\n      .sort((a, b) => {\n        if (a === b) {\n          return 0;\n        }\n        if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n          return 1;\n        }\n        return -1;\n      })\n      .forEach((node) => {\n        let refBlot: Blot | null = null;\n        if (node.nextSibling != null) {\n          refBlot = this.scroll.find(node.nextSibling);\n        }\n        const blot = makeAttachedBlot(node, this.scroll);\n        if (blot.next !== refBlot || blot.next == null) {\n          if (blot.parent != null) {\n            blot.parent.removeChild(this);\n          }\n          this.insertBefore(blot, refBlot || undefined);\n        }\n      });\n    this.enforceAllowedChildren();\n  }\n}\n\nexport default ParentBlot;\n","import Attributor from '../attributor/attributor.js';\nimport AttributorStore from '../attributor/store.js';\nimport Scope from '../scope.js';\nimport type {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Parent,\n  Root,\n} from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\nimport ParentBlot from './abstract/parent.js';\n\n// Shallow object comparison\nfunction isEqual(\n  obj1: Record<string, unknown>,\n  obj2: Record<string, unknown>,\n): boolean {\n  if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n    return false;\n  }\n  for (const prop in obj1) {\n    if (obj1[prop] !== obj2[prop]) {\n      return false;\n    }\n  }\n  return true;\n}\n\nclass InlineBlot extends ParentBlot implements Formattable {\n  public static allowedChildren: BlotConstructor[] = [InlineBlot, LeafBlot];\n  public static blotName = 'inline';\n  public static scope = Scope.INLINE_BLOT;\n  public static tagName: string | string[] = 'SPAN';\n\n  static create(value?: unknown) {\n    return super.create(value) as HTMLElement;\n  }\n\n  public static formats(domNode: HTMLElement, scroll: Root): any {\n    const match = scroll.query(InlineBlot.blotName);\n    if (\n      match != null &&\n      domNode.tagName === (match as BlotConstructor).tagName\n    ) {\n      return undefined;\n    } else if (typeof this.tagName === 'string') {\n      return true;\n    } else if (Array.isArray(this.tagName)) {\n      return domNode.tagName.toLowerCase();\n    }\n    return undefined;\n  }\n\n  protected attributes: AttributorStore;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  public format(name: string, value: any): void {\n    if (name === this.statics.blotName && !value) {\n      this.children.forEach((child) => {\n        if (!(child instanceof InlineBlot)) {\n          child = child.wrap(InlineBlot.blotName, true);\n        }\n        this.attributes.copy(child as InlineBlot);\n      });\n      this.unwrap();\n    } else {\n      const format = this.scroll.query(name, Scope.INLINE);\n      if (format == null) {\n        return;\n      }\n      if (format instanceof Attributor) {\n        this.attributes.attribute(format, value);\n      } else if (\n        value &&\n        (name !== this.statics.blotName || this.formats()[name] !== value)\n      ) {\n        this.replaceWith(name, value);\n      }\n    }\n  }\n\n  public formats(): { [index: string]: any } {\n    const formats = this.attributes.values();\n    const format = this.statics.formats(this.domNode, this.scroll);\n    if (format != null) {\n      formats[this.statics.blotName] = format;\n    }\n    return formats;\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    if (\n      this.formats()[name] != null ||\n      this.scroll.query(name, Scope.ATTRIBUTE)\n    ) {\n      const blot = this.isolate(index, length) as InlineBlot;\n      blot.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  public optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    const formats = this.formats();\n    if (Object.keys(formats).length === 0) {\n      return this.unwrap(); // unformatted span\n    }\n    const next = this.next;\n    if (\n      next instanceof InlineBlot &&\n      next.prev === this &&\n      isEqual(formats, next.formats())\n    ) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement = super.replaceWith(name, value) as InlineBlot;\n    this.attributes.copy(replacement);\n    return replacement;\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    context: { [key: string]: any },\n  ): void {\n    super.update(mutations, context);\n    const attributeChanged = mutations.some(\n      (mutation) =>\n        mutation.target === this.domNode && mutation.type === 'attributes',\n    );\n    if (attributeChanged) {\n      this.attributes.build();\n    }\n  }\n\n  public wrap(name: string | Parent, value?: any): Parent {\n    const wrapper = super.wrap(name, value);\n    if (wrapper instanceof InlineBlot) {\n      this.attributes.move(wrapper);\n    }\n    return wrapper;\n  }\n}\n\nexport default InlineBlot;\n","import Attributor from '../attributor/attributor.js';\nimport AttributorStore from '../attributor/store.js';\nimport Scope from '../scope.js';\nimport type {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Root,\n} from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\nimport ParentBlot from './abstract/parent.js';\nimport InlineBlot from './inline.js';\n\nclass BlockBlot extends ParentBlot implements Formattable {\n  public static blotName = 'block';\n  public static scope = Scope.BLOCK_BLOT;\n  public static tagName: string | string[] = 'P';\n  public static allowedChildren: BlotConstructor[] = [\n    InlineBlot,\n    BlockBlot,\n    LeafBlot,\n  ];\n\n  static create(value?: unknown) {\n    return super.create(value) as HTMLElement;\n  }\n\n  public static formats(domNode: HTMLElement, scroll: Root): any {\n    const match = scroll.query(BlockBlot.blotName);\n    if (\n      match != null &&\n      domNode.tagName === (match as BlotConstructor).tagName\n    ) {\n      return undefined;\n    } else if (typeof this.tagName === 'string') {\n      return true;\n    } else if (Array.isArray(this.tagName)) {\n      return domNode.tagName.toLowerCase();\n    }\n  }\n\n  protected attributes: AttributorStore;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  public format(name: string, value: any): void {\n    const format = this.scroll.query(name, Scope.BLOCK);\n    if (format == null) {\n      return;\n    } else if (format instanceof Attributor) {\n      this.attributes.attribute(format, value);\n    } else if (name === this.statics.blotName && !value) {\n      this.replaceWith(BlockBlot.blotName);\n    } else if (\n      value &&\n      (name !== this.statics.blotName || this.formats()[name] !== value)\n    ) {\n      this.replaceWith(name, value);\n    }\n  }\n\n  public formats(): { [index: string]: any } {\n    const formats = this.attributes.values();\n    const format = this.statics.formats(this.domNode, this.scroll);\n    if (format != null) {\n      formats[this.statics.blotName] = format;\n    }\n    return formats;\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    if (this.scroll.query(name, Scope.BLOCK) != null) {\n      this.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    if (def == null || this.scroll.query(value, Scope.INLINE) != null) {\n      // Insert text or inline\n      super.insertAt(index, value, def);\n    } else {\n      const after = this.split(index);\n      if (after != null) {\n        const blot = this.scroll.create(value, def);\n        after.parent.insertBefore(blot, after);\n      } else {\n        throw new Error('Attempt to insertAt after block boundaries');\n      }\n    }\n  }\n\n  public replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement = super.replaceWith(name, value) as BlockBlot;\n    this.attributes.copy(replacement);\n    return replacement;\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    context: { [key: string]: any },\n  ): void {\n    super.update(mutations, context);\n    const attributeChanged = mutations.some(\n      (mutation) =>\n        mutation.target === this.domNode && mutation.type === 'attributes',\n    );\n    if (attributeChanged) {\n      this.attributes.build();\n    }\n  }\n}\n\nexport default BlockBlot;\n","import Scope from '../../scope.js';\nimport BlockBlot from '../block.js';\nimport ParentBlot from './parent.js';\n\nclass ContainerBlot extends ParentBlot {\n  public static blotName = 'container';\n  public static scope = Scope.BLOCK_BLOT;\n  public static tagName: string | string[];\n\n  public prev!: BlockBlot | ContainerBlot | null;\n  public next!: BlockBlot | ContainerBlot | null;\n\n  public checkMerge(): boolean {\n    return (\n      this.next !== null && this.next.statics.blotName === this.statics.blotName\n    );\n  }\n\n  public deleteAt(index: number, length: number): void {\n    super.deleteAt(index, length);\n    this.enforceAllowedChildren();\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    super.formatAt(index, length, name, value);\n    this.enforceAllowedChildren();\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    super.insertAt(index, value, def);\n    this.enforceAllowedChildren();\n  }\n\n  public optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    if (this.children.length > 0 && this.next != null && this.checkMerge()) {\n      this.next.moveChildren(this);\n      this.next.remove();\n    }\n  }\n}\n\nexport default ContainerBlot;\n","import type { Formattable, Root } from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\n\nclass EmbedBlot extends LeafBlot implements Formattable {\n  public static formats(_domNode: HTMLElement, _scroll: Root): any {\n    return undefined;\n  }\n\n  public format(name: string, value: any): void {\n    // super.formatAt wraps, which is what we want in general,\n    // but this allows subclasses to overwrite for formats\n    // that just apply to particular embeds\n    super.formatAt(0, this.length(), name, value);\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    if (index === 0 && length === this.length()) {\n      this.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  public formats(): { [index: string]: any } {\n    return this.statics.formats(this.domNode, this.scroll);\n  }\n}\n\nexport default EmbedBlot;\n","import Registry, { type RegistryDefinition } from '../registry.js';\nimport Scope from '../scope.js';\nimport type { Blot, BlotConstructor, Root } from './abstract/blot.js';\nimport ContainerBlot from './abstract/container.js';\nimport ParentBlot from './abstract/parent.js';\nimport BlockBlot from './block.js';\n\nconst OBSERVER_CONFIG = {\n  attributes: true,\n  characterData: true,\n  characterDataOldValue: true,\n  childList: true,\n  subtree: true,\n};\n\nconst MAX_OPTIMIZE_ITERATIONS = 100;\n\nclass ScrollBlot extends ParentBlot implements Root {\n  public static blotName = 'scroll';\n  public static defaultChild = BlockBlot;\n  public static allowedChildren: BlotConstructor[] = [BlockBlot, ContainerBlot];\n  public static scope = Scope.BLOCK_BLOT;\n  public static tagName = 'DIV';\n\n  public observer: MutationObserver;\n\n  constructor(\n    public registry: Registry,\n    node: HTMLDivElement,\n  ) {\n    // @ts-expect-error scroll is the root with no parent\n    super(null, node);\n    this.scroll = this;\n    this.build();\n    this.observer = new MutationObserver((mutations: MutationRecord[]) => {\n      this.update(mutations);\n    });\n    this.observer.observe(this.domNode, OBSERVER_CONFIG);\n    this.attach();\n  }\n\n  public create(input: Node | string | Scope, value?: any): Blot {\n    return this.registry.create(this, input, value);\n  }\n\n  public find(node: Node | null, bubble = false): Blot | null {\n    const blot = this.registry.find(node, bubble);\n    if (!blot) {\n      return null;\n    }\n    if (blot.scroll === this) {\n      return blot;\n    }\n    return bubble ? this.find(blot.scroll.domNode.parentNode, true) : null;\n  }\n\n  public query(\n    query: string | Node | Scope,\n    scope: Scope = Scope.ANY,\n  ): RegistryDefinition | null {\n    return this.registry.query(query, scope);\n  }\n\n  public register(...definitions: RegistryDefinition[]) {\n    return this.registry.register(...definitions);\n  }\n\n  public build(): void {\n    if (this.scroll == null) {\n      return;\n    }\n    super.build();\n  }\n\n  public detach(): void {\n    super.detach();\n    this.observer.disconnect();\n  }\n\n  public deleteAt(index: number, length: number): void {\n    this.update();\n    if (index === 0 && length === this.length()) {\n      this.children.forEach((child) => {\n        child.remove();\n      });\n    } else {\n      super.deleteAt(index, length);\n    }\n  }\n\n  public formatAt(\n    index: number,\n    length: number,\n    name: string,\n    value: any,\n  ): void {\n    this.update();\n    super.formatAt(index, length, name, value);\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    this.update();\n    super.insertAt(index, value, def);\n  }\n\n  public optimize(context?: { [key: string]: any }): void;\n  public optimize(\n    mutations: MutationRecord[],\n    context: { [key: string]: any },\n  ): void;\n  public optimize(mutations: any = [], context: any = {}): void {\n    super.optimize(context);\n    const mutationsMap = context.mutationsMap || new WeakMap();\n    // We must modify mutations directly, cannot make copy and then modify\n    let records = Array.from(this.observer.takeRecords());\n    // Array.push currently seems to be implemented by a non-tail recursive function\n    // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n    while (records.length > 0) {\n      mutations.push(records.pop());\n    }\n    const mark = (blot: Blot | null, markParent = true): void => {\n      if (blot == null || blot === this) {\n        return;\n      }\n      if (blot.domNode.parentNode == null) {\n        return;\n      }\n      if (!mutationsMap.has(blot.domNode)) {\n        mutationsMap.set(blot.domNode, []);\n      }\n      if (markParent) {\n        mark(blot.parent);\n      }\n    };\n    const optimize = (blot: Blot): void => {\n      // Post-order traversal\n      if (!mutationsMap.has(blot.domNode)) {\n        return;\n      }\n      if (blot instanceof ParentBlot) {\n        blot.children.forEach(optimize);\n      }\n      mutationsMap.delete(blot.domNode);\n      blot.optimize(context);\n    };\n    let remaining = mutations;\n    for (let i = 0; remaining.length > 0; i += 1) {\n      if (i >= MAX_OPTIMIZE_ITERATIONS) {\n        throw new Error('[Parchment] Maximum optimize iterations reached');\n      }\n      remaining.forEach((mutation: MutationRecord) => {\n        const blot = this.find(mutation.target, true);\n        if (blot == null) {\n          return;\n        }\n        if (blot.domNode === mutation.target) {\n          if (mutation.type === 'childList') {\n            mark(this.find(mutation.previousSibling, false));\n            Array.from(mutation.addedNodes).forEach((node: Node) => {\n              const child = this.find(node, false);\n              mark(child, false);\n              if (child instanceof ParentBlot) {\n                child.children.forEach((grandChild: Blot) => {\n                  mark(grandChild, false);\n                });\n              }\n            });\n          } else if (mutation.type === 'attributes') {\n            mark(blot.prev);\n          }\n        }\n        mark(blot);\n      });\n      this.children.forEach(optimize);\n      remaining = Array.from(this.observer.takeRecords());\n      records = remaining.slice();\n      while (records.length > 0) {\n        mutations.push(records.pop());\n      }\n    }\n  }\n\n  public update(\n    mutations?: MutationRecord[],\n    context: { [key: string]: any } = {},\n  ): void {\n    mutations = mutations || this.observer.takeRecords();\n    const mutationsMap = new WeakMap();\n    mutations\n      .map((mutation: MutationRecord) => {\n        const blot = this.find(mutation.target, true);\n        if (blot == null) {\n          return null;\n        }\n        if (mutationsMap.has(blot.domNode)) {\n          mutationsMap.get(blot.domNode).push(mutation);\n          return null;\n        } else {\n          mutationsMap.set(blot.domNode, [mutation]);\n          return blot;\n        }\n      })\n      .forEach((blot: Blot | null) => {\n        if (blot != null && blot !== this && mutationsMap.has(blot.domNode)) {\n          blot.update(mutationsMap.get(blot.domNode) || [], context);\n        }\n      });\n    context.mutationsMap = mutationsMap;\n    if (mutationsMap.has(this.domNode)) {\n      super.update(mutationsMap.get(this.domNode), context);\n    }\n    this.optimize(mutations, context);\n  }\n}\n\nexport default ScrollBlot;\n","import Scope from '../scope.js';\nimport type { Blot, Leaf, Root } from './abstract/blot.js';\nimport LeafBlot from './abstract/leaf.js';\n\nclass TextBlot extends LeafBlot implements Leaf {\n  public static readonly blotName = 'text';\n  public static scope = Scope.INLINE_BLOT;\n\n  public static create(value: string): Text {\n    return document.createTextNode(value);\n  }\n\n  public static value(domNode: Text): string {\n    return domNode.data;\n  }\n\n  public domNode!: Text;\n  protected text: string;\n\n  constructor(scroll: Root, node: Node) {\n    super(scroll, node);\n    this.text = this.statics.value(this.domNode);\n  }\n\n  public deleteAt(index: number, length: number): void {\n    this.domNode.data = this.text =\n      this.text.slice(0, index) + this.text.slice(index + length);\n  }\n\n  public index(node: Node, offset: number): number {\n    if (this.domNode === node) {\n      return offset;\n    }\n    return -1;\n  }\n\n  public insertAt(index: number, value: string, def?: any): void {\n    if (def == null) {\n      this.text = this.text.slice(0, index) + value + this.text.slice(index);\n      this.domNode.data = this.text;\n    } else {\n      super.insertAt(index, value, def);\n    }\n  }\n\n  public length(): number {\n    return this.text.length;\n  }\n\n  public optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    this.text = this.statics.value(this.domNode);\n    if (this.text.length === 0) {\n      this.remove();\n    } else if (this.next instanceof TextBlot && this.next.prev === this) {\n      this.insertAt(this.length(), (this.next as TextBlot).value());\n      this.next.remove();\n    }\n  }\n\n  public position(index: number, _inclusive = false): [Node, number] {\n    return [this.domNode, index];\n  }\n\n  public split(index: number, force = false): Blot | null {\n    if (!force) {\n      if (index === 0) {\n        return this;\n      }\n      if (index === this.length()) {\n        return this.next;\n      }\n    }\n    const after = this.scroll.create(this.domNode.splitText(index));\n    this.parent.insertBefore(after, this.next || undefined);\n    this.text = this.statics.value(this.domNode);\n    return after;\n  }\n\n  public update(\n    mutations: MutationRecord[],\n    _context: { [key: string]: any },\n  ): void {\n    if (\n      mutations.some((mutation) => {\n        return (\n          mutation.type === 'characterData' && mutation.target === this.domNode\n        );\n      })\n    ) {\n      this.text = this.statics.value(this.domNode);\n    }\n  }\n\n  public value(): string {\n    return this.text;\n  }\n}\n\nexport default TextBlot;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nexport default arrayEach;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nexport default stubArray;\n","import arrayFilter from './_arrayFilter.js';\nimport stubArray from './stubArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nexport default getSymbols;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nexport default arrayFilter;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nexport default arrayPush;\n","import arrayPush from './_arrayPush.js';\nimport getPrototype from './_getPrototype.js';\nimport getSymbols from './_getSymbols.js';\nimport stubArray from './stubArray.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nexport default getSymbolsIn;\n","import arrayPush from './_arrayPush.js';\nimport isArray from './isArray.js';\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nexport default baseGetAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbols from './_getSymbols.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nexport default getAllKeys;\n","import baseGetAllKeys from './_baseGetAllKeys.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\nimport keysIn from './keysIn.js';\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nexport default getAllKeysIn;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nexport default DataView;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nexport default Promise;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nexport default Set;\n","import getNative from './_getNative.js';\nimport root from './_root.js';\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nexport default WeakMap;\n","import DataView from './_DataView.js';\nimport Map from './_Map.js';\nimport Promise from './_Promise.js';\nimport Set from './_Set.js';\nimport WeakMap from './_WeakMap.js';\nimport baseGetTag from './_baseGetTag.js';\nimport toSource from './_toSource.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nexport default getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nexport default initCloneArray;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nexport default cloneRegExp;\n","import Symbol from './_Symbol.js';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nexport default cloneSymbol;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\nimport cloneDataView from './_cloneDataView.js';\nimport cloneRegExp from './_cloneRegExp.js';\nimport cloneSymbol from './_cloneSymbol.js';\nimport cloneTypedArray from './_cloneTypedArray.js';\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nexport default initCloneByTag;\n","import cloneArrayBuffer from './_cloneArrayBuffer.js';\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nexport default cloneDataView;\n","import baseIsMap from './_baseIsMap.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nexport default isMap;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nexport default baseIsMap;\n","import baseIsSet from './_baseIsSet.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nexport default isSet;\n","import getTag from './_getTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nexport default baseIsSet;\n","import Stack from './_Stack.js';\nimport arrayEach from './_arrayEach.js';\nimport assignValue from './_assignValue.js';\nimport baseAssign from './_baseAssign.js';\nimport baseAssignIn from './_baseAssignIn.js';\nimport cloneBuffer from './_cloneBuffer.js';\nimport copyArray from './_copyArray.js';\nimport copySymbols from './_copySymbols.js';\nimport copySymbolsIn from './_copySymbolsIn.js';\nimport getAllKeys from './_getAllKeys.js';\nimport getAllKeysIn from './_getAllKeysIn.js';\nimport getTag from './_getTag.js';\nimport initCloneArray from './_initCloneArray.js';\nimport initCloneByTag from './_initCloneByTag.js';\nimport initCloneObject from './_initCloneObject.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isMap from './isMap.js';\nimport isObject from './isObject.js';\nimport isSet from './isSet.js';\nimport keys from './keys.js';\nimport keysIn from './keysIn.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nexport default baseClone;\n","import copyObject from './_copyObject.js';\nimport getSymbolsIn from './_getSymbolsIn.js';\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nexport default copySymbolsIn;\n","import copyObject from './_copyObject.js';\nimport keysIn from './keysIn.js';\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nexport default baseAssignIn;\n","import copyObject from './_copyObject.js';\nimport getSymbols from './_getSymbols.js';\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nexport default copySymbols;\n","import copyObject from './_copyObject.js';\nimport keys from './keys.js';\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nexport default baseAssign;\n","import baseClone from './_baseClone.js';\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nexport default cloneDeep;\n","import MapCache from './_MapCache.js';\nimport setCacheAdd from './_setCacheAdd.js';\nimport setCacheHas from './_setCacheHas.js';\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nexport default SetCache;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nexport default setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nexport default setCacheHas;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nexport default arraySome;\n","import SetCache from './_SetCache.js';\nimport arraySome from './_arraySome.js';\nimport cacheHas from './_cacheHas.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Check that cyclic values are equal.\n  var arrStacked = stack.get(array);\n  var othStacked = stack.get(other);\n  if (arrStacked && othStacked) {\n    return arrStacked == other && othStacked == array;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalArrays;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nexport default cacheHas;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nexport default mapToArray;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nexport default setToArray;\n","import Symbol from './_Symbol.js';\nimport Uint8Array from './_Uint8Array.js';\nimport eq from './eq.js';\nimport equalArrays from './_equalArrays.js';\nimport mapToArray from './_mapToArray.js';\nimport setToArray from './_setToArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nexport default equalByTag;\n","import getAllKeys from './_getAllKeys.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Check that cyclic values are equal.\n  var objStacked = stack.get(object);\n  var othStacked = stack.get(other);\n  if (objStacked && othStacked) {\n    return objStacked == other && othStacked == object;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nexport default equalObjects;\n","import Stack from './_Stack.js';\nimport equalArrays from './_equalArrays.js';\nimport equalByTag from './_equalByTag.js';\nimport equalObjects from './_equalObjects.js';\nimport getTag from './_getTag.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nexport default baseIsEqualDeep;\n","import baseIsEqualDeep from './_baseIsEqualDeep.js';\nimport isObjectLike from './isObjectLike.js';\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nexport default baseIsEqual;\n","import baseIsEqual from './_baseIsEqual.js';\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nexport default isEqual;\n","import { EmbedBlot } from 'parchment';\n\nclass Break extends EmbedBlot {\n  static value() {\n    return undefined;\n  }\n\n  optimize() {\n    if (this.prev || this.next) {\n      this.remove();\n    }\n  }\n\n  length() {\n    return 0;\n  }\n\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\nexport default Break;\n","import { TextBlot } from 'parchment';\n\nclass Text extends TextBlot {}\n\n// https://lodash.com/docs#escape\nconst entityMap: Record<string, string> = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;',\n  '\"': '&quot;',\n  \"'\": '&#39;',\n};\n\nfunction escapeText(text: string) {\n  return text.replace(/[&<>\"']/g, (s) => entityMap[s]);\n}\n\nexport { Text as default, escapeText };\n","import { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport type { BlotConstructor } from 'parchment';\nimport Break from './break.js';\nimport Text from './text.js';\n\nclass Inline extends InlineBlot {\n  static allowedChildren: BlotConstructor[] = [Inline, Break, EmbedBlot, Text];\n  // Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n  static order = [\n    'cursor',\n    'inline', // Must be lower\n    'link', // Chrome wants <a> to be lower\n    'underline',\n    'strike',\n    'italic',\n    'bold',\n    'script',\n    'code', // Must be higher\n  ];\n\n  static compare(self: string, other: string) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    }\n    if (self === other) {\n      return 0;\n    }\n    if (self < other) {\n      return -1;\n    }\n    return 1;\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (\n      Inline.compare(this.statics.blotName, name) < 0 &&\n      this.scroll.query(name, Scope.BLOT)\n    ) {\n      const blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    if (\n      this.parent instanceof Inline &&\n      Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0\n    ) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      // @ts-expect-error TODO: make isolate generic\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\n\nexport default Inline;\n","import {\n  AttributorStore,\n  BlockBlot,\n  EmbedBlot,\n  LeafBlot,\n  Scope,\n} from 'parchment';\nimport type { Blot, Parent } from 'parchment';\nimport Delta from 'quill-delta';\nimport Break from './break.js';\nimport Inline from './inline.js';\nimport TextBlot from './text.js';\n\nconst NEWLINE_LENGTH = 1;\n\nclass Block extends BlockBlot {\n  cache: { delta?: Delta | null; length?: number } = {};\n\n  delta(): Delta {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n    return this.cache.delta;\n  }\n\n  deleteAt(index: number, length: number) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (length <= 0) return;\n    if (this.scroll.query(name, Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(\n        index,\n        Math.min(length, this.length() - index - 1),\n        name,\n        value,\n      );\n    }\n    this.cache = {};\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      this.cache = {};\n      return;\n    }\n    if (value.length === 0) return;\n    const lines = value.split('\\n');\n    const text = lines.shift() as string;\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let block: Blot | this = this;\n    lines.reduce((lineIndex, line) => {\n      // @ts-expect-error Fix me later\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot: Blot, ref?: Blot | null) {\n    const { head } = this.children;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n\n  moveChildren(target: Parent, ref?: Blot | null) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.cache = {};\n  }\n\n  path(index: number) {\n    return super.path(index, true);\n  }\n\n  removeChild(child: Blot) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index: number, force: boolean | undefined = false): Blot | null {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = Break;\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\n\nclass BlockEmbed extends EmbedBlot {\n  attributes: AttributorStore;\n  domNode: HTMLElement;\n\n  attach() {\n    super.attach();\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  delta() {\n    return new Delta().insert(this.value(), {\n      ...this.formats(),\n      ...this.attributes.values(),\n    });\n  }\n\n  format(name: string, value: unknown) {\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      // @ts-expect-error TODO: Scroll#query() should return Attributor when scope is attribute\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    this.format(name, value);\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      return;\n    }\n    const lines = value.split('\\n');\n    const text = lines.pop();\n    const blocks = lines.map((line) => {\n      const block = this.scroll.create(Block.blotName);\n      block.insertAt(0, line);\n      return block;\n    });\n    const ref = this.split(index);\n    blocks.forEach((block) => {\n      this.parent.insertBefore(block, ref);\n    });\n    if (text) {\n      this.parent.insertBefore(this.scroll.create('text', text), ref);\n    }\n  }\n}\nBlockEmbed.scope = Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot: BlockBlot, filter = true) {\n  return blot\n    .descendants(LeafBlot)\n    .reduce((delta, leaf) => {\n      if (leaf.length() === 0) {\n        return delta;\n      }\n      return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\n    }, new Delta())\n    .insert('\\n', bubbleFormats(blot));\n}\n\nfunction bubbleFormats(\n  blot: Blot | null,\n  formats: Record<string, unknown> = {},\n  filter = true,\n): Record<string, unknown> {\n  if (blot == null) return formats;\n  if ('formats' in blot && typeof blot.formats === 'function') {\n    formats = {\n      ...formats,\n      ...blot.formats(),\n    };\n    if (filter) {\n      // exclude syntax highlighting from deltas and getFormat()\n      delete formats['code-token'];\n    }\n  }\n  if (\n    blot.parent == null ||\n    blot.parent.statics.blotName === 'scroll' ||\n    blot.parent.statics.scope !== blot.statics.scope\n  ) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats, filter);\n}\n\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\n","import { EmbedBlot, Scope } from 'parchment';\nimport type { Parent, ScrollBlot } from 'parchment';\nimport type Selection from '../core/selection.js';\nimport TextBlot from './text.js';\nimport type { EmbedContextRange } from './embed.js';\n\nclass Cursor extends EmbedBlot {\n  static blotName = 'cursor';\n  static className = 'ql-cursor';\n  static tagName = 'span';\n  static CONTENTS = '\\uFEFF'; // Zero width no break space\n\n  static value() {\n    return undefined;\n  }\n\n  selection: Selection;\n  textNode: Text;\n  savedLength: number;\n\n  constructor(scroll: ScrollBlot, domNode: HTMLElement, selection: Selection) {\n    super(scroll, domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this.savedLength = 0;\n  }\n\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (this.savedLength !== 0) {\n      super.format(name, value);\n      return;\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let target: Parent | this = this;\n    let index = 0;\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this.savedLength = Cursor.CONTENTS.length;\n      // @ts-expect-error TODO: allow empty context in Parchment\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this.savedLength = 0;\n    }\n  }\n\n  index(node: Node, offset: number) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n\n  length() {\n    return this.savedLength;\n  }\n\n  position(): [Text, number] {\n    return [this.textNode, this.textNode.data.length];\n  }\n\n  remove() {\n    super.remove();\n    // @ts-expect-error Fix me later\n    this.parent = null;\n  }\n\n  restore(): EmbedContextRange | null {\n    if (this.selection.composing || this.parent == null) return null;\n    const range = this.selection.getNativeRange();\n    // Browser may push down styles/nodes inside the cursor blot.\n    // https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#push-down-values\n    while (\n      this.domNode.lastChild != null &&\n      this.domNode.lastChild !== this.textNode\n    ) {\n      // @ts-expect-error Fix me later\n      this.domNode.parentNode.insertBefore(\n        this.domNode.lastChild,\n        this.domNode,\n      );\n    }\n\n    const prevTextBlot = this.prev instanceof TextBlot ? this.prev : null;\n    const prevTextLength = prevTextBlot ? prevTextBlot.length() : 0;\n    const nextTextBlot = this.next instanceof TextBlot ? this.next : null;\n    // @ts-expect-error TODO: make TextBlot.text public\n    const nextText = nextTextBlot ? nextTextBlot.text : '';\n    const { textNode } = this;\n    // take text from inside this blot and reset it\n    const newText = textNode.data.split(Cursor.CONTENTS).join('');\n    textNode.data = Cursor.CONTENTS;\n\n    // proactively merge TextBlots around cursor so that optimization\n    // doesn't lose the cursor.  the reason we are here in cursor.restore\n    // could be that the user clicked in prevTextBlot or nextTextBlot, or\n    // the user typed something.\n    let mergedTextBlot;\n    if (prevTextBlot) {\n      mergedTextBlot = prevTextBlot;\n      if (newText || nextTextBlot) {\n        prevTextBlot.insertAt(prevTextBlot.length(), newText + nextText);\n        if (nextTextBlot) {\n          nextTextBlot.remove();\n        }\n      }\n    } else if (nextTextBlot) {\n      mergedTextBlot = nextTextBlot;\n      nextTextBlot.insertAt(0, newText);\n    } else {\n      const newTextNode = document.createTextNode(newText);\n      mergedTextBlot = this.scroll.create(newTextNode);\n      this.parent.insertBefore(mergedTextBlot, this);\n    }\n\n    this.remove();\n    if (range) {\n      // calculate selection to restore\n      const remapOffset = (node: Node, offset: number) => {\n        if (prevTextBlot && node === prevTextBlot.domNode) {\n          return offset;\n        }\n        if (node === textNode) {\n          return prevTextLength + offset - 1;\n        }\n        if (nextTextBlot && node === nextTextBlot.domNode) {\n          return prevTextLength + newText.length + offset;\n        }\n        return null;\n      };\n\n      const start = remapOffset(range.start.node, range.start.offset);\n      const end = remapOffset(range.end.node, range.end.offset);\n      if (start !== null && end !== null) {\n        return {\n          startNode: mergedTextBlot.domNode,\n          startOffset: start,\n          endNode: mergedTextBlot.domNode,\n          endOffset: end,\n        };\n      }\n    }\n    return null;\n  }\n\n  update(mutations: MutationRecord[], context: Record<string, unknown>) {\n    if (\n      mutations.some((mutation) => {\n        return (\n          mutation.type === 'characterData' && mutation.target === this.textNode\n        );\n      })\n    ) {\n      const range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  // Avoid .ql-cursor being a descendant of `<a/>`.\n  // The reason is Safari pushes down `<a/>` on text insertion.\n  // That will cause DOM nodes not sync with the model.\n  //\n  // For example ({I} is the caret), given the markup:\n  //    <a><span class=\"ql-cursor\">\\uFEFF{I}</span></a>\n  // When typing a char \"x\", `<a/>` will be pushed down inside the `<span>` first:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF{I}</a></span>\n  // And then \"x\" will be inserted after `<a/>`:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF</a>d{I}</span>\n  optimize(context?: unknown) {\n    // @ts-expect-error Fix me later\n    super.optimize(context);\n\n    let { parent } = this;\n    while (parent) {\n      if (parent.domNode.tagName === 'A') {\n        this.savedLength = Cursor.CONTENTS.length;\n        // @ts-expect-error TODO: make isolate generic\n        parent.isolate(this.offset(parent), this.length()).unwrap();\n        this.savedLength = 0;\n        break;\n      }\n      parent = parent.parent;\n    }\n  }\n\n  value() {\n    return '';\n  }\n}\n\nexport default Cursor;\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","import type Quill from '../core.js';\n\nexport default new WeakMap<Node, Quill>();\n","const levels = ['error', 'warn', 'log', 'info'] as const;\nexport type DebugLevel = (typeof levels)[number];\nlet level: DebugLevel | false = 'warn';\n\nfunction debug(method: DebugLevel, ...args: unknown[]) {\n  if (level) {\n    if (levels.indexOf(method) <= levels.indexOf(level)) {\n      console[method](...args); // eslint-disable-line no-console\n    }\n  }\n}\n\nfunction namespace(\n  ns: string,\n): Record<DebugLevel, (...args: unknown[]) => void> {\n  return levels.reduce(\n    (logger, method) => {\n      logger[method] = debug.bind(console, method, ns);\n      return logger;\n    },\n    {} as Record<DebugLevel, (...args: unknown[]) => void>,\n  );\n}\n\nnamespace.level = (newLevel: DebugLevel | false) => {\n  level = newLevel;\n};\ndebug.level = namespace.level;\n\nexport default namespace;\n","import { EventEmitter } from 'eventemitter3';\nimport instances from './instances.js';\nimport logger from './logger.js';\n\nconst debug = logger('quill:events');\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach((eventName) => {\n  document.addEventListener(eventName, (...args) => {\n    Array.from(document.querySelectorAll('.ql-container')).forEach((node) => {\n      const quill = instances.get(node);\n      if (quill && quill.emitter) {\n        quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\n\nclass Emitter extends EventEmitter<string> {\n  static events = {\n    EDITOR_CHANGE: 'editor-change',\n    SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n    SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\n    SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\n    SCROLL_OPTIMIZE: 'scroll-optimize',\n    SCROLL_UPDATE: 'scroll-update',\n    SCROLL_EMBED_UPDATE: 'scroll-embed-update',\n    SELECTION_CHANGE: 'selection-change',\n    TEXT_CHANGE: 'text-change',\n    COMPOSITION_BEFORE_START: 'composition-before-start',\n    COMPOSITION_START: 'composition-start',\n    COMPOSITION_BEFORE_END: 'composition-before-end',\n    COMPOSITION_END: 'composition-end',\n  } as const;\n\n  static sources = {\n    API: 'api',\n    SILENT: 'silent',\n    USER: 'user',\n  } as const;\n\n  protected domListeners: Record<string, { node: Node; handler: Function }[]>;\n\n  constructor() {\n    super();\n    this.domListeners = {};\n    this.on('error', debug.error);\n  }\n\n  emit(...args: unknown[]): boolean {\n    debug.log.call(debug, ...args);\n    // @ts-expect-error\n    return super.emit(...args);\n  }\n\n  handleDOM(event: Event, ...args: unknown[]) {\n    (this.domListeners[event.type] || []).forEach(({ node, handler }) => {\n      if (event.target === node || node.contains(event.target as Node)) {\n        handler(event, ...args);\n      }\n    });\n  }\n\n  listenDOM(eventName: string, node: Node, handler: EventListener) {\n    if (!this.domListeners[eventName]) {\n      this.domListeners[eventName] = [];\n    }\n    this.domListeners[eventName].push({ node, handler });\n  }\n}\n\nexport type EmitterSource =\n  (typeof Emitter.sources)[keyof typeof Emitter.sources];\n\nexport default Emitter;\n","import { LeafBlot, Scope } from 'parchment';\nimport { cloneDeep, isEqual } from 'lodash-es';\nimport Emitter from './emitter.js';\nimport type { EmitterSource } from './emitter.js';\nimport logger from './logger.js';\nimport type Cursor from '../blots/cursor.js';\nimport type Scroll from '../blots/scroll.js';\n\nconst debug = logger('quill:selection');\n\ntype NativeRange = AbstractRange;\n\ninterface NormalizedRange {\n  start: {\n    node: NativeRange['startContainer'];\n    offset: NativeRange['startOffset'];\n  };\n  end: { node: NativeRange['endContainer']; offset: NativeRange['endOffset'] };\n  native: NativeRange;\n}\n\nexport interface Bounds {\n  bottom: number;\n  height: number;\n  left: number;\n  right: number;\n  top: number;\n  width: number;\n}\n\nexport class Range {\n  constructor(\n    public index: number,\n    public length = 0,\n  ) {}\n}\n\nclass Selection {\n  scroll: Scroll;\n  emitter: Emitter;\n  composing: boolean;\n  mouseDown: boolean;\n\n  root: HTMLElement;\n  cursor: Cursor;\n  savedRange: Range;\n  lastRange: Range | null;\n  lastNative: NormalizedRange | null;\n\n  constructor(scroll: Scroll, emitter: Emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    // @ts-expect-error\n    this.cursor = this.scroll.create('cursor', this);\n    // savedRange is last non-null range\n    this.savedRange = new Range(0, 0);\n    this.lastRange = this.savedRange;\n    this.lastNative = null;\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown && !this.composing) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      const native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\n      this.emitter.once(\n        Emitter.events.SCROLL_UPDATE,\n        (source, mutations: MutationRecord[]) => {\n          try {\n            if (\n              this.root.contains(native.start.node) &&\n              this.root.contains(native.end.node)\n            ) {\n              this.setNativeRange(\n                native.start.node,\n                native.start.offset,\n                native.end.node,\n                native.end.offset,\n              );\n            }\n            const triggeredByTyping = mutations.some(\n              (mutation) =>\n                mutation.type === 'characterData' ||\n                mutation.type === 'childList' ||\n                (mutation.type === 'attributes' &&\n                  mutation.target === this.root),\n            );\n            this.update(triggeredByTyping ? Emitter.sources.SILENT : source);\n          } catch (ignored) {\n            // ignore\n          }\n        },\n      );\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const { startNode, startOffset, endNode, endOffset } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n\n  handleComposition() {\n    this.emitter.on(Emitter.events.COMPOSITION_BEFORE_START, () => {\n      this.composing = true;\n    });\n    this.emitter.on(Emitter.events.COMPOSITION_END, () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(\n            range.startNode,\n            range.startOffset,\n            range.endNode,\n            range.endOffset,\n          );\n        }, 1);\n      }\n    });\n  }\n\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus({ preventScroll: true });\n    this.setRange(this.savedRange);\n  }\n\n  format(format: string, value: unknown) {\n    this.scroll.update();\n    const nativeRange = this.getNativeRange();\n    if (\n      nativeRange == null ||\n      !nativeRange.native.collapsed ||\n      this.scroll.query(format, Scope.BLOCK)\n    )\n      return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      const blot = this.scroll.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof LeafBlot) {\n        const after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        // @ts-expect-error TODO: nativeRange.start.node doesn't seem to match function signature\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n\n  getBounds(index: number, length = 0) {\n    const scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node: Node;\n    let [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    if (length > 0 && offset === leaf.length()) {\n      const [next] = this.scroll.leaf(index + 1);\n      if (next) {\n        const [line] = this.scroll.line(index);\n        const [nextLine] = this.scroll.line(index + 1);\n        if (line === nextLine) {\n          leaf = next;\n          offset = 0;\n        }\n      }\n    }\n    [node, offset] = leaf.position(offset, true);\n    const range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    }\n    let side: 'left' | 'right' = 'left';\n    let rect: DOMRect;\n    if (node instanceof Text) {\n      // Return null if the text node is empty because it is\n      // not able to get a useful client rect:\n      // https://github.com/w3c/csswg-drafts/issues/2514.\n      // Empty text nodes are most likely caused by TextBlot#optimize()\n      // not getting called when editor content changes.\n      if (!node.data.length) {\n        return null;\n      }\n      if (offset < node.data.length) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + 1);\n      } else {\n        range.setStart(node, offset - 1);\n        range.setEnd(node, offset);\n        side = 'right';\n      }\n      rect = range.getBoundingClientRect();\n    } else {\n      if (!(leaf.domNode instanceof Element)) return null;\n      rect = leaf.domNode.getBoundingClientRect();\n      if (offset > 0) side = 'right';\n    }\n    return {\n      bottom: rect.top + rect.height,\n      height: rect.height,\n      left: rect[side],\n      right: rect[side],\n      top: rect.top,\n      width: 0,\n    };\n  }\n\n  getNativeRange(): NormalizedRange | null {\n    const selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    const nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    const range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n\n  getRange(): [Range, NormalizedRange] | [null, null] {\n    const root = this.scroll.domNode;\n    if ('isConnected' in root && !root.isConnected) {\n      // document.getSelection() forces layout on Blink, so we trend to\n      // not calling it.\n      return [null, null];\n    }\n    const normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    const range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n\n  hasFocus(): boolean {\n    return (\n      document.activeElement === this.root ||\n      (document.activeElement != null &&\n        contains(this.root, document.activeElement))\n    );\n  }\n\n  normalizedToRange(range: NormalizedRange) {\n    const positions: [Node, number][] = [\n      [range.start.node, range.start.offset],\n    ];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    const indexes = positions.map((position) => {\n      const [node, offset] = position;\n      const blot = this.scroll.find(node, true);\n      // @ts-expect-error Fix me later\n      const index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      }\n      if (blot instanceof LeafBlot) {\n        return index + blot.index(node, offset);\n      }\n      // @ts-expect-error Fix me later\n      return index + blot.length();\n    });\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    const start = Math.min(end, ...indexes);\n    return new Range(start, end - start);\n  }\n\n  normalizeNative(nativeRange: NativeRange) {\n    if (\n      !contains(this.root, nativeRange.startContainer) ||\n      (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))\n    ) {\n      return null;\n    }\n    const range = {\n      start: {\n        node: nativeRange.startContainer,\n        offset: nativeRange.startOffset,\n      },\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n      native: nativeRange,\n    };\n    [range.start, range.end].forEach((position) => {\n      let { node, offset } = position;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          // @ts-expect-error Fix me later\n          node = node.lastChild;\n          if (node instanceof Text) {\n            offset = node.data.length;\n          } else if (node.childNodes.length > 0) {\n            // Container case\n            offset = node.childNodes.length;\n          } else {\n            // Embed case\n            offset = node.childNodes.length + 1;\n          }\n        } else {\n          break;\n        }\n      }\n      position.node = node;\n      position.offset = offset;\n    });\n    return range;\n  }\n\n  rangeToNative(range: Range): [Node | null, number, Node | null, number] {\n    const scrollLength = this.scroll.length();\n\n    const getPosition = (\n      index: number,\n      inclusive: boolean,\n    ): [Node | null, number] => {\n      index = Math.min(scrollLength - 1, index);\n      const [leaf, leafOffset] = this.scroll.leaf(index);\n      return leaf ? leaf.position(leafOffset, inclusive) : [null, -1];\n    };\n    return [\n      ...getPosition(range.index, false),\n      ...getPosition(range.index + range.length, true),\n    ];\n  }\n\n  setNativeRange(\n    startNode: Node | null,\n    startOffset?: number,\n    endNode = startNode,\n    endOffset = startOffset,\n    force = false,\n  ) {\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (\n      startNode != null &&\n      (this.root.parentNode == null ||\n        startNode.parentNode == null ||\n        // @ts-expect-error Fix me later\n        endNode.parentNode == null)\n    ) {\n      return;\n    }\n    const selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus({ preventScroll: true });\n      const { native } = this.getNativeRange() || {};\n      if (\n        native == null ||\n        force ||\n        startNode !== native.startContainer ||\n        startOffset !== native.startOffset ||\n        endNode !== native.endContainer ||\n        endOffset !== native.endOffset\n      ) {\n        if (startNode instanceof Element && startNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(\n            startNode,\n          );\n          startNode = startNode.parentNode;\n        }\n        if (endNode instanceof Element && endNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(\n            endNode,\n          );\n          endNode = endNode.parentNode;\n        }\n        const range = document.createRange();\n        // @ts-expect-error Fix me later\n        range.setStart(startNode, startOffset);\n        // @ts-expect-error Fix me later\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n    }\n  }\n\n  setRange(range: Range | null, force: boolean, source?: EmitterSource): void;\n  setRange(range: Range | null, source?: EmitterSource): void;\n  setRange(\n    range: Range | null,\n    force: boolean | EmitterSource = false,\n    source: EmitterSource = Emitter.sources.API,\n  ): void {\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      const args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n\n  update(source: EmitterSource = Emitter.sources.USER) {\n    const oldRange = this.lastRange;\n    const [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    this.lastNative = nativeRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!isEqual(oldRange, this.lastRange)) {\n      if (\n        !this.composing &&\n        nativeRange != null &&\n        nativeRange.native.collapsed &&\n        nativeRange.start.node !== this.cursor.textNode\n      ) {\n        const range = this.cursor.restore();\n        if (range) {\n          this.setNativeRange(\n            range.startNode,\n            range.startOffset,\n            range.endNode,\n            range.endOffset,\n          );\n        }\n      }\n      const args = [\n        Emitter.events.SELECTION_CHANGE,\n        cloneDeep(this.lastRange),\n        cloneDeep(oldRange),\n        source,\n      ];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\n\nfunction contains(parent: Node, descendant: Node) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode; // eslint-disable-line @typescript-eslint/no-unused-expressions\n  } catch (e) {\n    return false;\n  }\n  return parent.contains(descendant);\n}\n\nexport default Selection;\n","import { cloneDeep, isEqual, merge } from 'lodash-es';\nimport { LeafBlot, EmbedBlot, Scope, ParentBlot } from 'parchment';\nimport type { Blot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Block, { BlockEmbed, bubbleFormats } from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport type Scroll from '../blots/scroll.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport { Range } from './selection.js';\n\nconst ASCII = /^[ -~]*$/;\n\ntype SelectionInfo = {\n  newRange: Range;\n  oldRange: Range;\n};\n\nclass Editor {\n  scroll: Scroll;\n  delta: Delta;\n\n  constructor(scroll: Scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  applyDelta(delta: Delta): Delta {\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    const normalizedDelta = normalizeDelta(delta);\n    const deleteDelta = new Delta();\n    const normalizedOps = splitOpLines(normalizedDelta.ops.slice());\n    normalizedOps.reduce((index, op) => {\n      const length = Op.length(op);\n      let attributes = op.attributes || {};\n      let isImplicitNewlinePrepended = false;\n      let isImplicitNewlineAppended = false;\n      if (op.insert != null) {\n        deleteDelta.retain(length);\n        if (typeof op.insert === 'string') {\n          const text = op.insert;\n          isImplicitNewlineAppended =\n            !text.endsWith('\\n') &&\n            (scrollLength <= index ||\n              !!this.scroll.descendant(BlockEmbed, index)[0]);\n          this.scroll.insertAt(index, text);\n          const [line, offset] = this.scroll.line(index);\n          let formats = merge({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            const [leaf] = line.descendant(LeafBlot, offset);\n            if (leaf) {\n              formats = merge(formats, bubbleFormats(leaf));\n            }\n          }\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          const key = Object.keys(op.insert)[0]; // There should only be one key\n          if (key == null) return index;\n          const isInlineEmbed = this.scroll.query(key, Scope.INLINE) != null;\n          if (isInlineEmbed) {\n            if (\n              scrollLength <= index ||\n              !!this.scroll.descendant(BlockEmbed, index)[0]\n            ) {\n              isImplicitNewlineAppended = true;\n            }\n          } else if (index > 0) {\n            const [leaf, offset] = this.scroll.descendant(LeafBlot, index - 1);\n            if (leaf instanceof TextBlot) {\n              const text = leaf.value();\n              if (text[offset] !== '\\n') {\n                isImplicitNewlinePrepended = true;\n              }\n            } else if (\n              leaf instanceof EmbedBlot &&\n              leaf.statics.scope === Scope.INLINE_BLOT\n            ) {\n              isImplicitNewlinePrepended = true;\n            }\n          }\n          this.scroll.insertAt(index, key, op.insert[key]);\n\n          if (isInlineEmbed) {\n            const [leaf] = this.scroll.descendant(LeafBlot, index);\n            if (leaf) {\n              const formats = merge({}, bubbleFormats(leaf));\n              attributes = AttributeMap.diff(formats, attributes) || {};\n            }\n          }\n        }\n        scrollLength += length;\n      } else {\n        deleteDelta.push(op);\n\n        if (op.retain !== null && typeof op.retain === 'object') {\n          const key = Object.keys(op.retain)[0];\n          if (key == null) return index;\n          this.scroll.updateEmbedAt(index, key, op.retain[key]);\n        }\n      }\n      Object.keys(attributes).forEach((name) => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      const prependedLength = isImplicitNewlinePrepended ? 1 : 0;\n      const addedLength = isImplicitNewlineAppended ? 1 : 0;\n      scrollLength += prependedLength + addedLength;\n      deleteDelta.retain(prependedLength);\n      deleteDelta.delete(addedLength);\n      return index + length + prependedLength + addedLength;\n    }, 0);\n    deleteDelta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + Op.length(op);\n    }, 0);\n    this.scroll.batchEnd();\n    this.scroll.optimize();\n    return this.update(normalizedDelta);\n  }\n\n  deleteText(index: number, length: number): Delta {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n\n  formatLine(\n    index: number,\n    length: number,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    this.scroll.update();\n    Object.keys(formats).forEach((format) => {\n      this.scroll.lines(index, Math.max(length, 1)).forEach((line) => {\n        line.format(format, formats[format]);\n      });\n    });\n    this.scroll.optimize();\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n\n  formatText(\n    index: number,\n    length: number,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n\n  getContents(index: number, length: number): Delta {\n    return this.delta.slice(index, index + length);\n  }\n\n  getDelta(): Delta {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n\n  getFormat(index: number, length = 0): Record<string, unknown> {\n    let lines: (Block | BlockEmbed)[] = [];\n    let leaves: LeafBlot[] = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach((path) => {\n        const [blot] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof LeafBlot) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(LeafBlot, index, length);\n    }\n    const [lineFormats, leafFormats] = [lines, leaves].map((blots) => {\n      const blot = blots.shift();\n      if (blot == null) return {};\n      let formats = bubbleFormats(blot);\n      while (Object.keys(formats).length > 0) {\n        const blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return { ...lineFormats, ...leafFormats };\n  }\n\n  getHTML(index: number, length: number): string {\n    const [line, lineOffset] = this.scroll.line(index);\n    if (line) {\n      const lineLength = line.length();\n      const isWithinLine = line.length() >= lineOffset + length;\n      if (isWithinLine && !(lineOffset === 0 && length === lineLength)) {\n        return convertHTML(line, lineOffset, length, true);\n      }\n      return convertHTML(this.scroll, index, length, true);\n    }\n    return '';\n  }\n\n  getText(index: number, length: number): string {\n    return this.getContents(index, length)\n      .filter((op) => typeof op.insert === 'string')\n      .map((op) => op.insert)\n      .join('');\n  }\n\n  insertContents(index: number, contents: Delta): Delta {\n    const normalizedDelta = normalizeDelta(contents);\n    const change = new Delta().retain(index).concat(normalizedDelta);\n    this.scroll.insertContents(index, normalizedDelta);\n    return this.update(change);\n  }\n\n  insertEmbed(index: number, embed: string, value: unknown): Delta {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\n  }\n\n  insertText(\n    index: number,\n    text: string,\n    formats: Record<string, unknown> = {},\n  ): Delta {\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach((format) => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(\n      new Delta().retain(index).insert(text, cloneDeep(formats)),\n    );\n  }\n\n  isBlank(): boolean {\n    if (this.scroll.children.length === 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    const blot = this.scroll.children.head;\n    if (blot?.statics.blotName !== Block.blotName) return false;\n    const block = blot as Block;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n\n  removeFormat(index: number, length: number): Delta {\n    const text = this.getText(index, length);\n    const [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0;\n    let suffix = new Delta();\n    if (line != null) {\n      suffixLength = line.length() - offset;\n      suffix = line\n        .delta()\n        .slice(offset, offset + suffixLength - 1)\n        .insert('\\n');\n    }\n    const contents = this.getContents(index, length + suffixLength);\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\n    const delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n\n  update(\n    change: Delta | null,\n    mutations: MutationRecord[] = [],\n    selectionInfo: SelectionInfo | undefined = undefined,\n  ): Delta {\n    const oldDelta = this.delta;\n    if (\n      mutations.length === 1 &&\n      mutations[0].type === 'characterData' &&\n      // @ts-expect-error Fix me later\n      mutations[0].target.data.match(ASCII) &&\n      this.scroll.find(mutations[0].target)\n    ) {\n      // Optimization for character changes\n      const textBlot = this.scroll.find(mutations[0].target) as Blot;\n      const formats = bubbleFormats(textBlot);\n      const index = textBlot.offset(this.scroll);\n      // @ts-expect-error Fix me later\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      const oldText = new Delta().insert(oldValue);\n      // @ts-expect-error\n      const newText = new Delta().insert(textBlot.value());\n      const relativeSelectionInfo = selectionInfo && {\n        oldRange: shiftRange(selectionInfo.oldRange, -index),\n        newRange: shiftRange(selectionInfo.newRange, -index),\n      };\n      const diffDelta = new Delta()\n        .retain(index)\n        .concat(oldText.diff(newText, relativeSelectionInfo));\n      change = diffDelta.reduce((delta, op) => {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        }\n        return delta.push(op);\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !isEqual(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, selectionInfo);\n      }\n    }\n    return change;\n  }\n}\n\ninterface ListItem {\n  child: Blot;\n  offset: number;\n  length: number;\n  indent: number;\n  type: string;\n}\nfunction convertListHTML(\n  items: ListItem[],\n  lastIndent: number,\n  types: string[],\n): string {\n  if (items.length === 0) {\n    const [endTag] = getListType(types.pop());\n    if (lastIndent <= 0) {\n      return `</li></${endTag}>`;\n    }\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\n  }\n  const [{ child, offset, length, indent, type }, ...rest] = items;\n  const [tag, attribute] = getListType(type);\n  if (indent > lastIndent) {\n    types.push(type);\n    if (indent === lastIndent + 1) {\n      return `<${tag}><li${attribute}>${convertHTML(\n        child,\n        offset,\n        length,\n      )}${convertListHTML(rest, indent, types)}`;\n    }\n    return `<${tag}><li>${convertListHTML(items, lastIndent + 1, types)}`;\n  }\n  const previousType = types[types.length - 1];\n  if (indent === lastIndent && type === previousType) {\n    return `</li><li${attribute}>${convertHTML(\n      child,\n      offset,\n      length,\n    )}${convertListHTML(rest, indent, types)}`;\n  }\n  const [endTag] = getListType(types.pop());\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\n}\n\nfunction convertHTML(\n  blot: Blot,\n  index: number,\n  length: number,\n  isRoot = false,\n): string {\n  if ('html' in blot && typeof blot.html === 'function') {\n    return blot.html(index, length);\n  }\n  if (blot instanceof TextBlot) {\n    const escapedText = escapeText(blot.value().slice(index, index + length));\n    return escapedText.replaceAll(' ', '&nbsp;');\n  }\n  if (blot instanceof ParentBlot) {\n    // TODO fix API\n    if (blot.statics.blotName === 'list-container') {\n      const items: any[] = [];\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\n        const formats =\n          'formats' in child && typeof child.formats === 'function'\n            ? child.formats()\n            : {};\n        items.push({\n          child,\n          offset,\n          length: childLength,\n          indent: formats.indent || 0,\n          type: formats.list,\n        });\n      });\n      return convertListHTML(items, -1, []);\n    }\n    const parts: string[] = [];\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\n      parts.push(convertHTML(child, offset, childLength));\n    });\n    if (isRoot || blot.statics.blotName === 'list') {\n      return parts.join('');\n    }\n    const { outerHTML, innerHTML } = blot.domNode as Element;\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\n    // TODO cleanup\n    if (start === '<table') {\n      return `<table style=\"border: 1px solid #000;\">${parts.join('')}<${end}`;\n    }\n    return `${start}>${parts.join('')}<${end}`;\n  }\n  return blot.domNode instanceof Element ? blot.domNode.outerHTML : '';\n}\n\nfunction combineFormats(\n  formats: Record<string, unknown>,\n  combined: Record<string, unknown>,\n): Record<string, unknown> {\n  return Object.keys(combined).reduce(\n    (merged, name) => {\n      if (formats[name] == null) return merged;\n      const combinedValue = combined[name];\n      if (combinedValue === formats[name]) {\n        merged[name] = combinedValue;\n      } else if (Array.isArray(combinedValue)) {\n        if (combinedValue.indexOf(formats[name]) < 0) {\n          merged[name] = combinedValue.concat([formats[name]]);\n        } else {\n          // If style already exists, don't add to an array, but don't lose other styles\n          merged[name] = combinedValue;\n        }\n      } else {\n        merged[name] = [combinedValue, formats[name]];\n      }\n      return merged;\n    },\n    {} as Record<string, unknown>,\n  );\n}\n\nfunction getListType(type: string | undefined) {\n  const tag = type === 'ordered' ? 'ol' : 'ul';\n  switch (type) {\n    case 'checked':\n      return [tag, ' data-list=\"checked\"'];\n    case 'unchecked':\n      return [tag, ' data-list=\"unchecked\"'];\n    default:\n      return [tag, ''];\n  }\n}\n\nfunction normalizeDelta(delta: Delta) {\n  return delta.reduce((normalizedDelta, op) => {\n    if (typeof op.insert === 'string') {\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return normalizedDelta.insert(text, op.attributes);\n    }\n    return normalizedDelta.push(op);\n  }, new Delta());\n}\n\nfunction shiftRange({ index, length }: Range, amount: number) {\n  return new Range(index + amount, length);\n}\n\nfunction splitOpLines(ops: Op[]) {\n  const split: Op[] = [];\n  ops.forEach((op) => {\n    if (typeof op.insert === 'string') {\n      const lines = op.insert.split('\\n');\n      lines.forEach((line, index) => {\n        if (index) split.push({ insert: '\\n', attributes: op.attributes });\n        if (line) split.push({ insert: line, attributes: op.attributes });\n      });\n    } else {\n      split.push(op);\n    }\n  });\n\n  return split;\n}\n\nexport default Editor;\n","import type Quill from './quill.js';\n\nabstract class Module<T extends {} = {}> {\n  static DEFAULTS = {};\n\n  constructor(\n    public quill: Quill,\n    protected options: Partial<T> = {},\n  ) {}\n}\n\nexport default Module;\n","import type { ScrollBlot } from 'parchment';\nimport { EmbedBlot } from 'parchment';\nimport TextBlot from './text.js';\n\nconst GUARD_TEXT = '\\uFEFF';\n\nexport interface EmbedContextRange {\n  startNode: Node | Text;\n  startOffset: number;\n  endNode?: Node | Text;\n  endOffset?: number;\n}\n\nclass Embed extends EmbedBlot {\n  contentNode: HTMLSpanElement;\n  leftGuard: Text;\n  rightGuard: Text;\n\n  constructor(scroll: ScrollBlot, node: Node) {\n    super(scroll, node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', 'false');\n    Array.from(this.domNode.childNodes).forEach((childNode) => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n\n  index(node: Node, offset: number) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n\n  restore(node: Text): EmbedContextRange | null {\n    let range: EmbedContextRange | null = null;\n    let textNode: Text;\n    const text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        const prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n\n  update(mutations: MutationRecord[], context: Record<string, unknown>) {\n    mutations.forEach((mutation) => {\n      if (\n        mutation.type === 'characterData' &&\n        (mutation.target === this.leftGuard ||\n          mutation.target === this.rightGuard)\n      ) {\n        const range = this.restore(mutation.target as Text);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\n\nexport default Embed;\n","import Embed from '../blots/embed.js';\nimport type Scroll from '../blots/scroll.js';\nimport Emitter from './emitter.js';\n\nclass Composition {\n  isComposing = false;\n\n  constructor(\n    private scroll: Scroll,\n    private emitter: Emitter,\n  ) {\n    this.setupListeners();\n  }\n\n  private setupListeners() {\n    this.scroll.domNode.addEventListener('compositionstart', (event) => {\n      if (!this.isComposing) {\n        this.handleCompositionStart(event);\n      }\n    });\n\n    this.scroll.domNode.addEventListener('compositionend', (event) => {\n      if (this.isComposing) {\n        // Webkit makes DOM changes after compositionend, so we use microtask to\n        // ensure the order.\n        // https://bugs.webkit.org/show_bug.cgi?id=31902\n        queueMicrotask(() => {\n          this.handleCompositionEnd(event);\n        });\n      }\n    });\n  }\n\n  private handleCompositionStart(event: CompositionEvent) {\n    const blot =\n      event.target instanceof Node\n        ? this.scroll.find(event.target, true)\n        : null;\n\n    if (blot && !(blot instanceof Embed)) {\n      this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START, event);\n      this.scroll.batchStart();\n      this.emitter.emit(Emitter.events.COMPOSITION_START, event);\n      this.isComposing = true;\n    }\n  }\n\n  private handleCompositionEnd(event: CompositionEvent) {\n    this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END, event);\n    this.scroll.batchEnd();\n    this.emitter.emit(Emitter.events.COMPOSITION_END, event);\n    this.isComposing = false;\n  }\n}\n\nexport default Composition;\n","import type Quill from '../core.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type { ToolbarProps } from '../modules/toolbar.js';\nimport type Uploader from '../modules/uploader.js';\n\nexport interface ThemeOptions {\n  modules: Record<string, unknown> & {\n    toolbar?: null | ToolbarProps;\n  };\n}\n\nclass Theme {\n  static DEFAULTS: ThemeOptions = {\n    modules: {},\n  };\n\n  static themes = {\n    default: Theme,\n  };\n\n  modules: ThemeOptions['modules'] = {};\n\n  constructor(\n    protected quill: Quill,\n    protected options: ThemeOptions,\n  ) {}\n\n  init() {\n    Object.keys(this.options.modules).forEach((name) => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n\n  addModule(name: 'clipboard'): Clipboard;\n  addModule(name: 'keyboard'): Keyboard;\n  addModule(name: 'uploader'): Uploader;\n  addModule(name: 'history'): History;\n  addModule(name: string): unknown;\n  addModule(name: string) {\n    // @ts-expect-error\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new ModuleClass(\n      this.quill,\n      this.options.modules[name] || {},\n    );\n    return this.modules[name];\n  }\n}\n\nexport interface ThemeConstructor {\n  new (quill: Quill, options: unknown): Theme;\n  DEFAULTS: ThemeOptions;\n}\n\nexport default Theme;\n","export type Rect = {\n  top: number;\n  right: number;\n  bottom: number;\n  left: number;\n};\n\nconst getParentElement = (element: Node): Element | null =>\n  element.parentElement || (element.getRootNode() as ShadowRoot).host || null;\n\nconst getElementRect = (element: Element): Rect => {\n  const rect = element.getBoundingClientRect();\n  const scaleX =\n    ('offsetWidth' in element &&\n      Math.abs(rect.width) / (element as HTMLElement).offsetWidth) ||\n    1;\n  const scaleY =\n    ('offsetHeight' in element &&\n      Math.abs(rect.height) / (element as HTMLElement).offsetHeight) ||\n    1;\n  return {\n    top: rect.top,\n    right: rect.left + element.clientWidth * scaleX,\n    bottom: rect.top + element.clientHeight * scaleY,\n    left: rect.left,\n  };\n};\n\nconst paddingValueToInt = (value: string) => {\n  const number = parseInt(value, 10);\n  return Number.isNaN(number) ? 0 : number;\n};\n\n// Follow the steps described in https://www.w3.org/TR/cssom-view-1/#element-scrolling-members,\n// assuming that the scroll option is set to 'nearest'.\nconst getScrollDistance = (\n  targetStart: number,\n  targetEnd: number,\n  scrollStart: number,\n  scrollEnd: number,\n  scrollPaddingStart: number,\n  scrollPaddingEnd: number,\n) => {\n  if (targetStart < scrollStart && targetEnd > scrollEnd) {\n    return 0;\n  }\n\n  if (targetStart < scrollStart) {\n    return -(scrollStart - targetStart + scrollPaddingStart);\n  }\n\n  if (targetEnd > scrollEnd) {\n    return targetEnd - targetStart > scrollEnd - scrollStart\n      ? targetStart + scrollPaddingStart - scrollStart\n      : targetEnd - scrollEnd + scrollPaddingEnd;\n  }\n  return 0;\n};\n\nconst scrollRectIntoView = (root: HTMLElement, targetRect: Rect) => {\n  const document = root.ownerDocument;\n\n  let rect = targetRect;\n\n  let current: Element | null = root;\n  while (current) {\n    const isDocumentBody: boolean = current === document.body;\n    const bounding = isDocumentBody\n      ? {\n          top: 0,\n          right:\n            window.visualViewport?.width ??\n            document.documentElement.clientWidth,\n          bottom:\n            window.visualViewport?.height ??\n            document.documentElement.clientHeight,\n          left: 0,\n        }\n      : getElementRect(current);\n\n    const style = getComputedStyle(current);\n    const scrollDistanceX = getScrollDistance(\n      rect.left,\n      rect.right,\n      bounding.left,\n      bounding.right,\n      paddingValueToInt(style.scrollPaddingLeft),\n      paddingValueToInt(style.scrollPaddingRight),\n    );\n    const scrollDistanceY = getScrollDistance(\n      rect.top,\n      rect.bottom,\n      bounding.top,\n      bounding.bottom,\n      paddingValueToInt(style.scrollPaddingTop),\n      paddingValueToInt(style.scrollPaddingBottom),\n    );\n    if (scrollDistanceX || scrollDistanceY) {\n      if (isDocumentBody) {\n        document.defaultView?.scrollBy(scrollDistanceX, scrollDistanceY);\n      } else {\n        const { scrollLeft, scrollTop } = current;\n        if (scrollDistanceY) {\n          current.scrollTop += scrollDistanceY;\n        }\n        if (scrollDistanceX) {\n          current.scrollLeft += scrollDistanceX;\n        }\n        const scrolledLeft = current.scrollLeft - scrollLeft;\n        const scrolledTop = current.scrollTop - scrollTop;\n        rect = {\n          left: rect.left - scrolledLeft,\n          top: rect.top - scrolledTop,\n          right: rect.right - scrolledLeft,\n          bottom: rect.bottom - scrolledTop,\n        };\n      }\n    }\n\n    current =\n      isDocumentBody || style.position === 'fixed'\n        ? null\n        : getParentElement(current);\n  }\n};\n\nexport default scrollRectIntoView;\n","import { Registry } from 'parchment';\n\nconst MAX_REGISTER_ITERATIONS = 100;\nconst CORE_FORMATS = ['block', 'break', 'cursor', 'inline', 'scroll', 'text'];\n\nconst createRegistryWithFormats = (\n  formats: string[],\n  sourceRegistry: Registry,\n  debug: { error: (errorMessage: string) => void },\n) => {\n  const registry = new Registry();\n  CORE_FORMATS.forEach((name) => {\n    const coreBlot = sourceRegistry.query(name);\n    if (coreBlot) registry.register(coreBlot);\n  });\n\n  formats.forEach((name) => {\n    let format = sourceRegistry.query(name);\n    if (!format) {\n      debug.error(\n        `Cannot register \"${name}\" specified in \"formats\" config. Are you sure it was registered?`,\n      );\n    }\n    let iterations = 0;\n    while (format) {\n      registry.register(format);\n      format = 'blotName' in format ? format.requiredContainer ?? null : null;\n\n      iterations += 1;\n      if (iterations > MAX_REGISTER_ITERATIONS) {\n        debug.error(\n          `Cycle detected in registering blot requiredContainer: \"${name}\"`,\n        );\n        break;\n      }\n    }\n  });\n\n  return registry;\n};\n\nexport default createRegistryWithFormats;\n","import { merge } from 'lodash-es';\nimport * as Parchment from 'parchment';\nimport type { Op } from 'quill-delta';\nimport Delta from 'quill-delta';\nimport type { BlockEmbed } from '../blots/block.js';\nimport type Block from '../blots/block.js';\nimport type Scroll from '../blots/scroll.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type Uploader from '../modules/uploader.js';\nimport Editor from './editor.js';\nimport Emitter from './emitter.js';\nimport type { EmitterSource } from './emitter.js';\nimport instances from './instances.js';\nimport logger from './logger.js';\nimport type { DebugLevel } from './logger.js';\nimport Module from './module.js';\nimport Selection, { Range } from './selection.js';\nimport type { Bounds } from './selection.js';\nimport Composition from './composition.js';\nimport Theme from './theme.js';\nimport type { ThemeConstructor } from './theme.js';\nimport scrollRectIntoView from './utils/scrollRectIntoView.js';\nimport type { Rect } from './utils/scrollRectIntoView.js';\nimport createRegistryWithFormats from './utils/createRegistryWithFormats.js';\n\nconst debug = logger('quill');\n\nconst globalRegistry = new Parchment.Registry();\nParchment.ParentBlot.uiClass = 'ql-ui';\n\n/**\n * Options for initializing a Quill instance\n */\nexport interface QuillOptions {\n  theme?: string;\n  debug?: DebugLevel | boolean;\n  registry?: Parchment.Registry;\n  /**\n   * Whether to disable the editing\n   * @default false\n   */\n  readOnly?: boolean;\n\n  /**\n   * Placeholder text to display when the editor is empty\n   * @default \"\"\n   */\n  placeholder?: string;\n  bounds?: HTMLElement | string | null;\n  modules?: Record<string, unknown>;\n\n  /**\n   * A list of formats that are recognized and can exist within the editor contents.\n   * `null` means all formats are allowed.\n   * @default null\n   */\n  formats?: string[] | null;\n}\n\n/**\n * Similar to QuillOptions, but with all properties expanded to their default values,\n * and all selectors resolved to HTMLElements.\n */\nexport interface ExpandedQuillOptions\n  extends Omit<QuillOptions, 'theme' | 'formats'> {\n  theme: ThemeConstructor;\n  registry: Parchment.Registry;\n  container: HTMLElement;\n  modules: Record<string, unknown>;\n  bounds?: HTMLElement | null;\n  readOnly: boolean;\n}\n\nclass Quill {\n  static DEFAULTS = {\n    bounds: null,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true,\n      uploader: true,\n    },\n    placeholder: '',\n    readOnly: false,\n    registry: globalRegistry,\n    theme: 'default',\n  } satisfies Partial<QuillOptions>;\n  static events = Emitter.events;\n  static sources = Emitter.sources;\n  static version = typeof QUILL_VERSION === 'undefined' ? 'dev' : QUILL_VERSION;\n\n  static imports: Record<string, unknown> = {\n    delta: Delta,\n    parchment: Parchment,\n    'core/module': Module,\n    'core/theme': Theme,\n  };\n\n  static debug(limit: DebugLevel | boolean) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n\n  static find(node: Node, bubble = false) {\n    return instances.get(node) || globalRegistry.find(node, bubble);\n  }\n\n  static import(name: 'core/module'): typeof Module;\n  static import(name: `themes/${string}`): typeof Theme;\n  static import(name: 'parchment'): typeof Parchment;\n  static import(name: 'delta'): typeof Delta;\n  static import(name: string): unknown;\n  static import(name: string) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n\n  static register(\n    targets: Record<\n      string,\n      | Parchment.RegistryDefinition\n      | Record<string, unknown> // any objects\n      | Theme\n      | Module\n      | Function // ES5 constructors\n    >,\n    overwrite?: boolean,\n  ): void;\n  static register(\n    target: Parchment.RegistryDefinition,\n    overwrite?: boolean,\n  ): void;\n  static register(path: string, target: any, overwrite?: boolean): void;\n  static register(...args: any[]): void {\n    if (typeof args[0] !== 'string') {\n      const target = args[0];\n      const overwrite = !!args[1];\n\n      const name = 'attrName' in target ? target.attrName : target.blotName;\n      if (typeof name === 'string') {\n        // Shortcut for formats:\n        // register(Blot | Attributor, overwrite)\n        this.register(`formats/${name}`, target, overwrite);\n      } else {\n        Object.keys(target).forEach((key) => {\n          this.register(key, target[key], overwrite);\n        });\n      }\n    } else {\n      const path = args[0];\n      const target = args[1];\n      const overwrite = !!args[2];\n\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if (\n        (path.startsWith('blots/') || path.startsWith('formats/')) &&\n        target &&\n        typeof target !== 'boolean' &&\n        target.blotName !== 'abstract'\n      ) {\n        globalRegistry.register(target);\n      }\n      if (typeof target.register === 'function') {\n        target.register(globalRegistry);\n      }\n    }\n  }\n\n  container: HTMLElement;\n  root: HTMLDivElement;\n  scroll: Scroll;\n  emitter: Emitter;\n  protected allowReadOnlyEdits: boolean;\n  editor: Editor;\n  composition: Composition;\n  selection: Selection;\n\n  theme: Theme;\n  keyboard: Keyboard;\n  clipboard: Clipboard;\n  history: History;\n  uploader: Uploader;\n\n  options: ExpandedQuillOptions;\n\n  constructor(container: HTMLElement | string, options: QuillOptions = {}) {\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      debug.error('Invalid Quill container', container);\n      return;\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    const html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    instances.set(this.container, this);\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.emitter = new Emitter();\n    const scrollBlotName = Parchment.ScrollBlot.blotName;\n    const ScrollBlot = this.options.registry.query(scrollBlotName);\n    if (!ScrollBlot || !('blotName' in ScrollBlot)) {\n      throw new Error(\n        `Cannot initialize Quill without \"${scrollBlotName}\" blot`,\n      );\n    }\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\n      emitter: this.emitter,\n    }) as Scroll;\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.composition = new Composition(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.uploader = this.theme.addModule('uploader');\n    this.theme.addModule('input');\n    this.theme.addModule('uiNode');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, (type) => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo =\n        oldRange && newRange ? { oldRange, newRange } : undefined;\n      modify.call(\n        this,\n        () => this.editor.update(null, mutations, selectionInfo),\n        source,\n      );\n    });\n    this.emitter.on(Emitter.events.SCROLL_EMBED_UPDATE, (blot, delta) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo =\n        oldRange && newRange ? { oldRange, newRange } : undefined;\n      modify.call(\n        this,\n        () => {\n          const change = new Delta()\n            .retain(blot.offset(this))\n            .retain({ [blot.statics.blotName]: delta });\n          return this.editor.update(change, [], selectionInfo);\n        },\n        Quill.sources.USER,\n      );\n    });\n    if (html) {\n      const contents = this.clipboard.convert({\n        html: `${html}<p><br></p>`,\n        text: '\\n',\n      });\n      this.setContents(contents);\n    }\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n    this.allowReadOnlyEdits = false;\n  }\n\n  addContainer(container: string, refNode?: Node | null): HTMLDivElement;\n  addContainer(container: HTMLElement, refNode?: Node | null): HTMLElement;\n  addContainer(\n    container: string | HTMLElement,\n    refNode: Node | null = null,\n  ): HTMLDivElement | HTMLElement {\n    if (typeof container === 'string') {\n      const className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n\n  blur() {\n    this.selection.setRange(null);\n  }\n\n  deleteText(range: Range, source?: EmitterSource): Delta;\n  deleteText(index: number, length: number, source?: EmitterSource): Delta;\n  deleteText(\n    index: number | Range,\n    length?: number | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    // @ts-expect-error\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.deleteText(index, length);\n      },\n      source,\n      index,\n      -1 * length,\n    );\n  }\n\n  disable() {\n    this.enable(false);\n  }\n\n  editReadOnly<T>(modifier: () => T): T {\n    this.allowReadOnlyEdits = true;\n    const value = modifier();\n    this.allowReadOnlyEdits = false;\n    return value;\n  }\n\n  enable(enabled = true) {\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n\n  focus(options: { preventScroll?: boolean } = {}) {\n    this.selection.focus();\n    if (!options.preventScroll) {\n      this.scrollSelectionIntoView();\n    }\n  }\n\n  format(\n    name: string,\n    value: unknown,\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        const range = this.getSelection(true);\n        let change = new Delta();\n        if (range == null) return change;\n        if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\n          change = this.editor.formatLine(range.index, range.length, {\n            [name]: value,\n          });\n        } else if (range.length === 0) {\n          this.selection.format(name, value);\n          return change;\n        } else {\n          change = this.editor.formatText(range.index, range.length, {\n            [name]: value,\n          });\n        }\n        this.setSelection(range, Emitter.sources.SILENT);\n        return change;\n      },\n      source,\n    );\n  }\n\n  formatLine(\n    index: number,\n    length: number,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  formatLine(\n    index: number,\n    length: number,\n    name: string,\n    value?: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatLine(\n    index: number,\n    length: number,\n    name: string | Record<string, unknown>,\n    value?: unknown | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      index,\n      length,\n      // @ts-expect-error\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatLine(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  formatText(\n    range: Range,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number,\n    length: number,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number,\n    length: number,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  formatText(\n    index: number | Range,\n    length: number | string,\n    name: string | unknown,\n    value?: unknown | EmitterSource,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      // @ts-expect-error\n      index,\n      length,\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatText(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  getBounds(index: number | Range, length = 0): Bounds | null {\n    let bounds: Bounds | null = null;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    if (!bounds) return null;\n    const containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width,\n    };\n  }\n\n  getContents(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n\n  getFormat(index?: number, length?: number): { [format: string]: unknown };\n  getFormat(range?: Range): {\n    [format: string]: unknown;\n  };\n  getFormat(\n    index: Range | number = this.getSelection(true),\n    length = 0,\n  ): { [format: string]: unknown } {\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    }\n    return this.editor.getFormat(index.index, index.length);\n  }\n\n  getIndex(blot: Parchment.Blot) {\n    return blot.offset(this.scroll);\n  }\n\n  getLength() {\n    return this.scroll.length();\n  }\n\n  getLeaf(index: number) {\n    return this.scroll.leaf(index);\n  }\n\n  getLine(index: number) {\n    return this.scroll.line(index);\n  }\n\n  getLines(range: Range): (Block | BlockEmbed)[];\n  getLines(index?: number, length?: number): (Block | BlockEmbed)[];\n  getLines(\n    index: Range | number = 0,\n    length = Number.MAX_VALUE,\n  ): (Block | BlockEmbed)[] {\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    }\n    return this.scroll.lines(index, length);\n  }\n\n  getModule(name: string) {\n    return this.theme.modules[name];\n  }\n\n  getSelection(focus: true): Range;\n  getSelection(focus?: boolean): Range | null;\n  getSelection(focus = false): Range | null {\n    if (focus) this.focus();\n    this.update(); // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n\n  getSemanticHTML(range: Range): string;\n  getSemanticHTML(index?: number, length?: number): string;\n  getSemanticHTML(index: Range | number = 0, length?: number) {\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getHTML(index, length);\n  }\n\n  getText(range?: Range): string;\n  getText(index?: number, length?: number): string;\n  getText(index: Range | number = 0, length?: number): string {\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n\n  insertEmbed(\n    index: number,\n    embed: string,\n    value: unknown,\n    source: EmitterSource = Quill.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertEmbed(index, embed, value);\n      },\n      source,\n      index,\n    );\n  }\n\n  insertText(index: number, text: string, source?: EmitterSource): Delta;\n  insertText(\n    index: number,\n    text: string,\n    formats: Record<string, unknown>,\n    source?: EmitterSource,\n  ): Delta;\n  insertText(\n    index: number,\n    text: string,\n    name: string,\n    value: unknown,\n    source?: EmitterSource,\n  ): Delta;\n  insertText(\n    index: number,\n    text: string,\n    name?: string | Record<string, unknown> | EmitterSource,\n    value?: unknown,\n    source?: EmitterSource,\n  ): Delta {\n    let formats: Record<string, unknown>;\n    // eslint-disable-next-line prefer-const\n    // @ts-expect-error\n    [index, , formats, source] = overload(index, 0, name, value, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertText(index, text, formats);\n      },\n      source,\n      index,\n      text.length,\n    );\n  }\n\n  isEnabled() {\n    return this.scroll.isEnabled();\n  }\n\n  off(...args: Parameters<(typeof Emitter)['prototype']['off']>) {\n    return this.emitter.off(...args);\n  }\n\n  on(\n    event: (typeof Emitter)['events']['TEXT_CHANGE'],\n    handler: (delta: Delta, oldContent: Delta, source: EmitterSource) => void,\n  ): Emitter;\n  on(\n    event: (typeof Emitter)['events']['SELECTION_CHANGE'],\n    handler: (range: Range, oldRange: Range, source: EmitterSource) => void,\n  ): Emitter;\n  on(\n    event: (typeof Emitter)['events']['EDITOR_CHANGE'],\n    handler: (\n      ...args:\n        | [\n            (typeof Emitter)['events']['TEXT_CHANGE'],\n            Delta,\n            Delta,\n            EmitterSource,\n          ]\n        | [\n            (typeof Emitter)['events']['SELECTION_CHANGE'],\n            Range,\n            Range,\n            EmitterSource,\n          ]\n    ) => void,\n  ): Emitter;\n  on(event: string, ...args: unknown[]): Emitter;\n  on(...args: Parameters<(typeof Emitter)['prototype']['on']>): Emitter {\n    return this.emitter.on(...args);\n  }\n\n  once(...args: Parameters<(typeof Emitter)['prototype']['once']>) {\n    return this.emitter.once(...args);\n  }\n\n  removeFormat(index: number, length: number, source?: EmitterSource): Delta {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.removeFormat(index, length);\n      },\n      source,\n      index,\n    );\n  }\n\n  scrollRectIntoView(rect: Rect) {\n    scrollRectIntoView(this.root, rect);\n  }\n\n  /**\n   * @deprecated Use Quill#scrollSelectionIntoView() instead.\n   */\n  scrollIntoView() {\n    console.warn(\n      'Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead.',\n    );\n    this.scrollSelectionIntoView();\n  }\n\n  /**\n   * Scroll the current selection into the visible area.\n   * If the selection is already visible, no scrolling will occur.\n   */\n  scrollSelectionIntoView() {\n    const range = this.selection.lastRange;\n    const bounds = range && this.selection.getBounds(range.index, range.length);\n    if (bounds) {\n      this.scrollRectIntoView(bounds);\n    }\n  }\n\n  setContents(\n    delta: Delta | Op[],\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        const length = this.getLength();\n        // Quill will set empty editor to \\n\n        const delete1 = this.editor.deleteText(0, length);\n        const applied = this.editor.insertContents(0, delta);\n        // Remove extra \\n from empty editor initialization\n        const delete2 = this.editor.deleteText(this.getLength() - 1, 1);\n        return delete1.compose(applied).compose(delete2);\n      },\n      source,\n    );\n  }\n  setSelection(range: Range | null, source?: EmitterSource): void;\n  setSelection(index: number, source?: EmitterSource): void;\n  setSelection(index: number, length?: number, source?: EmitterSource): void;\n  setSelection(index: number, source?: EmitterSource): void;\n  setSelection(\n    index: Range | null | number,\n    length?: EmitterSource | number,\n    source?: EmitterSource,\n  ): void {\n    if (index == null) {\n      // @ts-expect-error https://github.com/microsoft/TypeScript/issues/22609\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      // @ts-expect-error\n      [index, length, , source] = overload(index, length, source);\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.scrollSelectionIntoView();\n      }\n    }\n  }\n\n  setText(text: string, source: EmitterSource = Emitter.sources.API) {\n    const delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n\n  update(source: EmitterSource = Emitter.sources.USER) {\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    // TODO this is usually undefined\n    return change;\n  }\n\n  updateContents(\n    delta: Delta | Op[],\n    source: EmitterSource = Emitter.sources.API,\n  ): Delta {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        return this.editor.applyDelta(delta);\n      },\n      source,\n      true,\n    );\n  }\n}\n\nfunction resolveSelector(selector: string | HTMLElement | null | undefined) {\n  return typeof selector === 'string'\n    ? document.querySelector<HTMLElement>(selector)\n    : selector;\n}\n\nfunction expandModuleConfig(config: Record<string, unknown> | undefined) {\n  return Object.entries(config ?? {}).reduce(\n    (expanded, [key, value]) => ({\n      ...expanded,\n      [key]: value === true ? {} : value,\n    }),\n    {} as Record<string, unknown>,\n  );\n}\n\nfunction omitUndefinedValuesFromOptions(obj: QuillOptions) {\n  return Object.fromEntries(\n    Object.entries(obj).filter((entry) => entry[1] !== undefined),\n  );\n}\n\nfunction expandConfig(\n  containerOrSelector: HTMLElement | string,\n  options: QuillOptions,\n): ExpandedQuillOptions {\n  const container = resolveSelector(containerOrSelector);\n  if (!container) {\n    throw new Error('Invalid Quill container');\n  }\n\n  const shouldUseDefaultTheme =\n    !options.theme || options.theme === Quill.DEFAULTS.theme;\n  const theme = shouldUseDefaultTheme\n    ? Theme\n    : Quill.import(`themes/${options.theme}`);\n  if (!theme) {\n    throw new Error(`Invalid theme ${options.theme}. Did you register it?`);\n  }\n\n  const { modules: quillModuleDefaults, ...quillDefaults } = Quill.DEFAULTS;\n  const { modules: themeModuleDefaults, ...themeDefaults } = theme.DEFAULTS;\n\n  let userModuleOptions = expandModuleConfig(options.modules);\n  // Special case toolbar shorthand\n  if (\n    userModuleOptions != null &&\n    userModuleOptions.toolbar &&\n    userModuleOptions.toolbar.constructor !== Object\n  ) {\n    userModuleOptions = {\n      ...userModuleOptions,\n      toolbar: { container: userModuleOptions.toolbar },\n    };\n  }\n\n  const modules: ExpandedQuillOptions['modules'] = merge(\n    {},\n    expandModuleConfig(quillModuleDefaults),\n    expandModuleConfig(themeModuleDefaults),\n    userModuleOptions,\n  );\n\n  const config = {\n    ...quillDefaults,\n    ...omitUndefinedValuesFromOptions(themeDefaults),\n    ...omitUndefinedValuesFromOptions(options),\n  };\n\n  let registry = options.registry;\n  if (registry) {\n    if (options.formats) {\n      debug.warn('Ignoring \"formats\" option because \"registry\" is specified');\n    }\n  } else {\n    registry = options.formats\n      ? createRegistryWithFormats(options.formats, config.registry, debug)\n      : config.registry;\n  }\n\n  return {\n    ...config,\n    registry,\n    container,\n    theme,\n    modules: Object.entries(modules).reduce(\n      (modulesWithDefaults, [name, value]) => {\n        if (!value) return modulesWithDefaults;\n\n        const moduleClass = Quill.import(`modules/${name}`);\n        if (moduleClass == null) {\n          debug.error(\n            `Cannot load ${name} module. Are you sure you registered it?`,\n          );\n          return modulesWithDefaults;\n        }\n        return {\n          ...modulesWithDefaults,\n          // @ts-expect-error\n          [name]: merge({}, moduleClass.DEFAULTS || {}, value),\n        };\n      },\n      {},\n    ),\n    bounds: resolveSelector(config.bounds),\n  };\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(\n  modifier: () => Delta,\n  source: EmitterSource,\n  index: number | boolean,\n  shift: number | null,\n) {\n  if (\n    !this.isEnabled() &&\n    source === Emitter.sources.USER &&\n    !this.allowReadOnlyEdits\n  ) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  const oldDelta = this.editor.delta;\n  const change = modifier();\n  if (range != null) {\n    if (index === true) {\n      index = range.index; // eslint-disable-line prefer-destructuring\n    }\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      // @ts-expect-error index should always be number\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\n\ntype NormalizedIndexLength = [\n  number,\n  number,\n  Record<string, unknown>,\n  EmitterSource,\n];\nfunction overload(index: number, source?: EmitterSource): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  format: string,\n  value: unknown,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: number,\n  length: number,\n  format: Record<string, unknown>,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(range: Range, source?: EmitterSource): NormalizedIndexLength;\nfunction overload(\n  range: Range,\n  format: string,\n  value: unknown,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  range: Range,\n  format: Record<string, unknown>,\n  source?: EmitterSource,\n): NormalizedIndexLength;\nfunction overload(\n  index: Range | number,\n  length?: number | string | Record<string, unknown> | EmitterSource,\n  name?: string | unknown | Record<string, unknown> | EmitterSource,\n  value?: unknown | EmitterSource,\n  source?: EmitterSource,\n): NormalizedIndexLength {\n  let formats: Record<string, unknown> = {};\n  // @ts-expect-error\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      // @ts-expect-error\n      source = value;\n      value = name;\n      name = length;\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    } else {\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    }\n  } else if (typeof length !== 'number') {\n    // @ts-expect-error\n    source = value;\n    value = name;\n    name = length;\n    length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    // @ts-expect-error Fix me later\n    formats = name;\n    // @ts-expect-error\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      // @ts-expect-error\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  // @ts-expect-error\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range: Range, change: Delta, source?: EmitterSource): Range;\nfunction shiftRange(\n  range: Range,\n  index: number,\n  length?: number,\n  source?: EmitterSource,\n): Range;\nfunction shiftRange(\n  range: Range,\n  index: number | Delta,\n  lengthOrSource?: number | EmitterSource,\n  source?: EmitterSource,\n) {\n  const length = typeof lengthOrSource === 'number' ? lengthOrSource : 0;\n  if (range == null) return null;\n  let start;\n  let end;\n  // @ts-expect-error -- TODO: add a better type guard around `index`\n  if (index && typeof index.transformPosition === 'function') {\n    [start, end] = [range.index, range.index + range.length].map((pos) =>\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      index.transformPosition(pos, source !== Emitter.sources.USER),\n    );\n  } else {\n    [start, end] = [range.index, range.index + range.length].map((pos) => {\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      if (pos < index || (pos === index && source === Emitter.sources.USER))\n        return pos;\n      if (length >= 0) {\n        return pos + length;\n      }\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      return Math.max(index, pos + length);\n    });\n  }\n  return new Range(start, end - start);\n}\n\nexport type { Bounds, DebugLevel, EmitterSource };\nexport { Parchment, Range };\n\nexport { globalRegistry, expandConfig, overload, Quill as default };\n","import { ContainerBlot } from 'parchment';\n\nclass Container extends ContainerBlot {}\n\nexport default Container;\n","import { ContainerBlot, LeafBlot, Scope, ScrollBlot } from 'parchment';\nimport type { Blot, Parent, EmbedBlot, ParentBlot, Registry } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport type { EmitterSource } from '../core/emitter.js';\nimport Block, { BlockEmbed, bubbleFormats } from './block.js';\nimport Break from './break.js';\nimport Container from './container.js';\n\ntype RenderBlock =\n  | {\n      type: 'blockEmbed';\n      attributes: AttributeMap;\n      key: string;\n      value: unknown;\n    }\n  | { type: 'block'; attributes: AttributeMap; delta: Delta };\n\nfunction isLine(blot: unknown): blot is Block | BlockEmbed {\n  return blot instanceof Block || blot instanceof BlockEmbed;\n}\n\ninterface UpdatableEmbed {\n  updateContent(change: unknown): void;\n}\n\nfunction isUpdatable(blot: Blot): blot is Blot & UpdatableEmbed {\n  return typeof (blot as unknown as any).updateContent === 'function';\n}\n\nclass Scroll extends ScrollBlot {\n  static blotName = 'scroll';\n  static className = 'ql-editor';\n  static tagName = 'DIV';\n  static defaultChild = Block;\n  static allowedChildren = [Block, BlockEmbed, Container];\n\n  emitter: Emitter;\n  batch: false | MutationRecord[];\n\n  constructor(\n    registry: Registry,\n    domNode: HTMLDivElement,\n    { emitter }: { emitter: Emitter },\n  ) {\n    super(registry, domNode);\n    this.emitter = emitter;\n    this.batch = false;\n    this.optimize();\n    this.enable();\n    this.domNode.addEventListener('dragstart', (e) => this.handleDragStart(e));\n  }\n\n  batchStart() {\n    if (!Array.isArray(this.batch)) {\n      this.batch = [];\n    }\n  }\n\n  batchEnd() {\n    if (!this.batch) return;\n    const mutations = this.batch;\n    this.batch = false;\n    this.update(mutations);\n  }\n\n  emitMount(blot: Blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\n  }\n\n  emitUnmount(blot: Blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\n  }\n\n  emitEmbedUpdate(blot: Blot, change: unknown) {\n    this.emitter.emit(Emitter.events.SCROLL_EMBED_UPDATE, blot, change);\n  }\n\n  deleteAt(index: number, length: number) {\n    const [first, offset] = this.line(index);\n    const [last] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      const ref =\n        last.children.head instanceof Break ? null : last.children.head;\n      // @ts-expect-error\n      first.moveChildren(last, ref);\n      // @ts-expect-error\n      first.remove();\n    }\n    this.optimize();\n  }\n\n  enable(enabled = true) {\n    this.domNode.setAttribute('contenteditable', enabled ? 'true' : 'false');\n  }\n\n  formatAt(index: number, length: number, format: string, value: unknown) {\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n\n  insertAt(index: number, value: string, def?: unknown) {\n    if (index >= this.length()) {\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          blot.insertAt(0, value.slice(0, -1), def);\n        } else {\n          blot.insertAt(0, value, def);\n        }\n      } else {\n        const embed = this.scroll.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n\n  insertBefore(blot: Blot, ref?: Blot | null) {\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\n      const wrapper = this.scroll.create(\n        this.statics.defaultChild.blotName,\n      ) as Parent;\n      wrapper.appendChild(blot);\n      super.insertBefore(wrapper, ref);\n    } else {\n      super.insertBefore(blot, ref);\n    }\n  }\n\n  insertContents(index: number, delta: Delta) {\n    const renderBlocks = this.deltaToRenderBlocks(\n      delta.concat(new Delta().insert('\\n')),\n    );\n    const last = renderBlocks.pop();\n    if (last == null) return;\n\n    this.batchStart();\n\n    const first = renderBlocks.shift();\n    if (first) {\n      const shouldInsertNewlineChar =\n        first.type === 'block' &&\n        (first.delta.length() === 0 ||\n          (!this.descendant(BlockEmbed, index)[0] && index < this.length()));\n      const delta =\n        first.type === 'block'\n          ? first.delta\n          : new Delta().insert({ [first.key]: first.value });\n      insertInlineContents(this, index, delta);\n      const newlineCharLength = first.type === 'block' ? 1 : 0;\n      const lineEndIndex = index + delta.length() + newlineCharLength;\n      if (shouldInsertNewlineChar) {\n        this.insertAt(lineEndIndex - 1, '\\n');\n      }\n\n      const formats = bubbleFormats(this.line(index)[0]);\n      const attributes = AttributeMap.diff(formats, first.attributes) || {};\n      Object.keys(attributes).forEach((name) => {\n        this.formatAt(lineEndIndex - 1, 1, name, attributes[name]);\n      });\n\n      index = lineEndIndex;\n    }\n\n    let [refBlot, refBlotOffset] = this.children.find(index);\n    if (renderBlocks.length) {\n      if (refBlot) {\n        refBlot = refBlot.split(refBlotOffset);\n        refBlotOffset = 0;\n      }\n\n      renderBlocks.forEach((renderBlock) => {\n        if (renderBlock.type === 'block') {\n          const block = this.createBlock(\n            renderBlock.attributes,\n            refBlot || undefined,\n          );\n          insertInlineContents(block, 0, renderBlock.delta);\n        } else {\n          const blockEmbed = this.create(\n            renderBlock.key,\n            renderBlock.value,\n          ) as EmbedBlot;\n          this.insertBefore(blockEmbed, refBlot || undefined);\n          Object.keys(renderBlock.attributes).forEach((name) => {\n            blockEmbed.format(name, renderBlock.attributes[name]);\n          });\n        }\n      });\n    }\n\n    if (last.type === 'block' && last.delta.length()) {\n      const offset = refBlot\n        ? refBlot.offset(refBlot.scroll) + refBlotOffset\n        : this.length();\n      insertInlineContents(this, offset, last.delta);\n    }\n\n    this.batchEnd();\n    this.optimize();\n  }\n\n  isEnabled() {\n    return this.domNode.getAttribute('contenteditable') === 'true';\n  }\n\n  leaf(index: number): [LeafBlot | null, number] {\n    const last = this.path(index).pop();\n    if (!last) {\n      return [null, -1];\n    }\n\n    const [blot, offset] = last;\n    return blot instanceof LeafBlot ? [blot, offset] : [null, -1];\n  }\n\n  line(index: number): [Block | BlockEmbed | null, number] {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    // @ts-expect-error TODO: make descendant() generic\n    return this.descendant(isLine, index);\n  }\n\n  lines(index = 0, length = Number.MAX_VALUE): (Block | BlockEmbed)[] {\n    const getLines = (\n      blot: ParentBlot,\n      blotIndex: number,\n      blotLength: number,\n    ) => {\n      let lines: (Block | BlockEmbed)[] = [];\n      let lengthLeft = blotLength;\n      blot.children.forEachAt(\n        blotIndex,\n        blotLength,\n        (child, childIndex, childLength) => {\n          if (isLine(child)) {\n            lines.push(child);\n          } else if (child instanceof ContainerBlot) {\n            lines = lines.concat(getLines(child, childIndex, lengthLeft));\n          }\n          lengthLeft -= childLength;\n        },\n      );\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n\n  optimize(context?: { [key: string]: any }): void;\n  optimize(\n    mutations?: MutationRecord[],\n    context?: { [key: string]: any },\n  ): void;\n  optimize(mutations = [], context = {}) {\n    if (this.batch) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n\n  path(index: number) {\n    return super.path(index).slice(1); // Exclude self\n  }\n\n  remove() {\n    // Never remove self\n  }\n\n  update(source?: EmitterSource): void;\n  update(mutations?: MutationRecord[]): void;\n  update(mutations?: MutationRecord[] | EmitterSource): void {\n    if (this.batch) {\n      if (Array.isArray(mutations)) {\n        this.batch = this.batch.concat(mutations);\n      }\n      return;\n    }\n    let source: EmitterSource = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    mutations = mutations.filter(({ target }) => {\n      const blot = this.find(target, true);\n      return blot && !isUpdatable(blot);\n    });\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([])); // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n\n  updateEmbedAt(index: number, key: string, change: unknown) {\n    // Currently it only supports top-level embeds (BlockEmbed).\n    // We can update `ParentBlot` in parchment to support inline embeds.\n    const [blot] = this.descendant((b: Blot) => b instanceof BlockEmbed, index);\n    if (blot && blot.statics.blotName === key && isUpdatable(blot)) {\n      blot.updateContent(change);\n    }\n  }\n\n  protected handleDragStart(event: DragEvent) {\n    event.preventDefault();\n  }\n\n  private deltaToRenderBlocks(delta: Delta) {\n    const renderBlocks: RenderBlock[] = [];\n\n    let currentBlockDelta = new Delta();\n    delta.forEach((op) => {\n      const insert = op?.insert;\n      if (!insert) return;\n      if (typeof insert === 'string') {\n        const splitted = insert.split('\\n');\n        splitted.slice(0, -1).forEach((text) => {\n          currentBlockDelta.insert(text, op.attributes);\n          renderBlocks.push({\n            type: 'block',\n            delta: currentBlockDelta,\n            attributes: op.attributes ?? {},\n          });\n          currentBlockDelta = new Delta();\n        });\n        const last = splitted[splitted.length - 1];\n        if (last) {\n          currentBlockDelta.insert(last, op.attributes);\n        }\n      } else {\n        const key = Object.keys(insert)[0];\n        if (!key) return;\n        if (this.query(key, Scope.INLINE)) {\n          currentBlockDelta.push(op);\n        } else {\n          if (currentBlockDelta.length()) {\n            renderBlocks.push({\n              type: 'block',\n              delta: currentBlockDelta,\n              attributes: {},\n            });\n          }\n          currentBlockDelta = new Delta();\n          renderBlocks.push({\n            type: 'blockEmbed',\n            key,\n            value: insert[key],\n            attributes: op.attributes ?? {},\n          });\n        }\n      }\n    });\n\n    if (currentBlockDelta.length()) {\n      renderBlocks.push({\n        type: 'block',\n        delta: currentBlockDelta,\n        attributes: {},\n      });\n    }\n\n    return renderBlocks;\n  }\n\n  private createBlock(attributes: AttributeMap, refBlot?: Blot) {\n    let blotName: string | undefined;\n    const formats: AttributeMap = {};\n\n    Object.entries(attributes).forEach(([key, value]) => {\n      const isBlockBlot = this.query(key, Scope.BLOCK & Scope.BLOT) != null;\n      if (isBlockBlot) {\n        blotName = key;\n      } else {\n        formats[key] = value;\n      }\n    });\n\n    const block = this.create(\n      blotName || this.statics.defaultChild.blotName,\n      blotName ? attributes[blotName] : undefined,\n    ) as ParentBlot;\n\n    this.insertBefore(block, refBlot || undefined);\n\n    const length = block.length();\n    Object.entries(formats).forEach(([key, value]) => {\n      block.formatAt(0, length, key, value);\n    });\n\n    return block;\n  }\n}\n\nfunction insertInlineContents(\n  parent: ParentBlot,\n  index: number,\n  inlineContents: Delta,\n) {\n  inlineContents.reduce((index, op) => {\n    const length = Op.length(op);\n    let attributes = op.attributes || {};\n    if (op.insert != null) {\n      if (typeof op.insert === 'string') {\n        const text = op.insert;\n        parent.insertAt(index, text);\n        const [leaf] = parent.descendant(LeafBlot, index);\n        const formats = bubbleFormats(leaf);\n        attributes = AttributeMap.diff(formats, attributes) || {};\n      } else if (typeof op.insert === 'object') {\n        const key = Object.keys(op.insert)[0]; // There should only be one key\n        if (key == null) return index;\n        parent.insertAt(index, key, op.insert[key]);\n        const isInlineEmbed = parent.scroll.query(key, Scope.INLINE) != null;\n        if (isInlineEmbed) {\n          const [leaf] = parent.descendant(LeafBlot, index);\n          const formats = bubbleFormats(leaf);\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        }\n      }\n    }\n    Object.keys(attributes).forEach((key) => {\n      parent.formatAt(index, length, key, attributes[key]);\n    });\n    return index + length;\n  }, index);\n}\n\nexport default Scroll;\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify'],\n};\n\nconst AlignAttribute = new Attributor('align', 'align', config);\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\n\nexport { AlignAttribute, AlignClass, AlignStyle };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nclass ColorAttributor extends StyleAttributor {\n  value(domNode: HTMLElement) {\n    let value = super.value(domNode) as string;\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    const hex = value\n      .split(',')\n      .map((component) => `00${parseInt(component, 10).toString(16)}`.slice(-2))\n      .join('');\n    return `#${hex}`;\n  }\n}\n\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\n  scope: Scope.INLINE,\n});\nconst ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Scope.INLINE,\n});\n\nexport { ColorAttributor, ColorClass, ColorStyle };\n","import { ClassAttributor, Scope } from 'parchment';\nimport { ColorAttributor } from './color.js';\n\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\n  scope: Scope.INLINE,\n});\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Scope.INLINE,\n});\n\nexport { BackgroundClass, BackgroundStyle };\n","import Block from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport Cursor from '../blots/cursor.js';\nimport Inline from '../blots/inline.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\n\nclass CodeBlockContainer extends Container {\n  static create(value: string) {\n    const domNode = super.create(value) as Element;\n    domNode.setAttribute('spellcheck', 'false');\n    return domNode;\n  }\n\n  code(index: number, length: number) {\n    return (\n      this.children\n        // @ts-expect-error\n        .map((child) => (child.length() <= 1 ? '' : child.domNode.innerText))\n        .join('\\n')\n        .slice(index, index + length)\n    );\n  }\n\n  html(index: number, length: number) {\n    // `\\n`s are needed in order to support empty lines at the beginning and the end.\n    // https://html.spec.whatwg.org/multipage/syntax.html#element-restrictions\n    return `<pre>\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n}\n\nclass CodeBlock extends Block {\n  static TAB = '  ';\n\n  static register() {\n    Quill.register(CodeBlockContainer);\n  }\n}\n\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\nCodeBlock.blotName = 'code-block';\nCodeBlock.className = 'ql-code-block';\nCodeBlock.tagName = 'DIV';\nCodeBlockContainer.blotName = 'code-block-container';\nCodeBlockContainer.className = 'ql-code-block-container';\nCodeBlockContainer.tagName = 'DIV';\n\nCodeBlockContainer.allowedChildren = [CodeBlock];\n\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\nCodeBlock.requiredContainer = CodeBlockContainer;\n\nexport { Code, CodeBlockContainer, CodeBlock as default };\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['rtl'],\n};\n\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\n\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.INLINE,\n  whitelist: ['serif', 'monospace'],\n};\n\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\n\nclass FontStyleAttributor extends StyleAttributor {\n  value(node: HTMLElement) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\n\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexport { FontStyle, FontClass };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\n  scope: Scope.INLINE,\n  whitelist: ['small', 'large', 'huge'],\n});\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\n  scope: Scope.INLINE,\n  whitelist: ['10px', '18px', '32px'],\n});\n\nexport { SizeClass, SizeStyle };\n","import { cloneDeep, isEqual } from 'lodash-es';\nimport Delta, { AttributeMap } from 'quill-delta';\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\nimport type { Blot, BlockBlot } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport type { BlockEmbed } from '../blots/block.js';\nimport type { Range } from '../core/selection.js';\n\nconst debug = logger('quill:keyboard');\n\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\nexport interface Context {\n  collapsed: boolean;\n  empty: boolean;\n  offset: number;\n  prefix: string;\n  suffix: string;\n  format: Record<string, unknown>;\n  event: KeyboardEvent;\n  line: BlockEmbed | BlockBlot;\n}\n\ninterface BindingObject\n  extends Partial<Omit<Context, 'prefix' | 'suffix' | 'format'>> {\n  key: number | string | string[];\n  shortKey?: boolean | null;\n  shiftKey?: boolean | null;\n  altKey?: boolean | null;\n  metaKey?: boolean | null;\n  ctrlKey?: boolean | null;\n  prefix?: RegExp;\n  suffix?: RegExp;\n  format?: Record<string, unknown> | string[];\n  handler?: (\n    this: { quill: Quill },\n    range: Range,\n    curContext: Context,\n    // eslint-disable-next-line no-use-before-define\n    binding: NormalizedBinding,\n  ) => boolean | void;\n}\n\ntype Binding = BindingObject | string | number;\n\ninterface NormalizedBinding extends Omit<BindingObject, 'key' | 'shortKey'> {\n  key: string | number;\n}\n\ninterface KeyboardOptions {\n  bindings: Record<string, Binding>;\n}\n\ninterface KeyboardOptions {\n  bindings: Record<string, Binding>;\n}\n\nclass Keyboard extends Module<KeyboardOptions> {\n  static DEFAULTS: KeyboardOptions;\n\n  static match(evt: KeyboardEvent, binding: BindingObject) {\n    if (\n      (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'] as const).some((key) => {\n        return !!binding[key] !== evt[key] && binding[key] !== null;\n      })\n    ) {\n      return false;\n    }\n    return binding.key === evt.key || binding.key === evt.which;\n  }\n\n  bindings: Record<string, NormalizedBinding[]>;\n\n  constructor(quill: Quill, options: Partial<KeyboardOptions>) {\n    super(quill, options);\n    this.bindings = {};\n    // @ts-expect-error Fix me later\n    Object.keys(this.options.bindings).forEach((name) => {\n      // @ts-expect-error Fix me later\n      if (this.options.bindings[name]) {\n        // @ts-expect-error Fix me later\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({ key: 'Enter', shiftKey: null }, this.handleEnter);\n    this.addBinding(\n      { key: 'Enter', metaKey: null, ctrlKey: null, altKey: null },\n      () => {},\n    );\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true },\n        this.handleBackspace,\n      );\n      this.addBinding(\n        { key: 'Delete' },\n        { collapsed: true },\n        this.handleDelete,\n      );\n    } else {\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true, prefix: /^.?$/ },\n        this.handleBackspace,\n      );\n      this.addBinding(\n        { key: 'Delete' },\n        { collapsed: true, suffix: /^.?$/ },\n        this.handleDelete,\n      );\n    }\n    this.addBinding(\n      { key: 'Backspace' },\n      { collapsed: false },\n      this.handleDeleteRange,\n    );\n    this.addBinding(\n      { key: 'Delete' },\n      { collapsed: false },\n      this.handleDeleteRange,\n    );\n    this.addBinding(\n      {\n        key: 'Backspace',\n        altKey: null,\n        ctrlKey: null,\n        metaKey: null,\n        shiftKey: null,\n      },\n      { collapsed: true, offset: 0 },\n      this.handleBackspace,\n    );\n    this.listen();\n  }\n\n  addBinding(\n    keyBinding: Binding,\n    context:\n      | Required<BindingObject['handler']>\n      | Partial<Omit<BindingObject, 'key' | 'handler'>> = {},\n    handler:\n      | Required<BindingObject['handler']>\n      | Partial<Omit<BindingObject, 'key' | 'handler'>> = {},\n  ) {\n    const binding = normalize(keyBinding);\n    if (binding == null) {\n      debug.warn('Attempted to add invalid keyboard binding', binding);\n      return;\n    }\n    if (typeof context === 'function') {\n      context = { handler: context };\n    }\n    if (typeof handler === 'function') {\n      handler = { handler };\n    }\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\n    keys.forEach((key) => {\n      const singleBinding = {\n        ...binding,\n        key,\n        ...context,\n        ...handler,\n      };\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\n      this.bindings[singleBinding.key].push(singleBinding);\n    });\n  }\n\n  listen() {\n    this.quill.root.addEventListener('keydown', (evt) => {\n      if (evt.defaultPrevented || evt.isComposing) return;\n\n      // evt.isComposing is false when pressing Enter/Backspace when composing in Safari\n      // https://bugs.webkit.org/show_bug.cgi?id=165004\n      const isComposing =\n        evt.keyCode === 229 && (evt.key === 'Enter' || evt.key === 'Backspace');\n      if (isComposing) return;\n\n      const bindings = (this.bindings[evt.key] || []).concat(\n        this.bindings[evt.which] || [],\n      );\n      const matches = bindings.filter((binding) =>\n        Keyboard.match(evt, binding),\n      );\n      if (matches.length === 0) return;\n      // @ts-expect-error\n      const blot = Quill.find(evt.target, true);\n      if (blot && blot.scroll !== this.quill.scroll) return;\n      const range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      const [line, offset] = this.quill.getLine(range.index);\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      const [leafEnd, offsetEnd] =\n        range.length === 0\n          ? [leafStart, offsetStart]\n          : this.quill.getLeaf(range.index + range.length);\n      const prefixText =\n        leafStart instanceof TextBlot\n          ? leafStart.value().slice(0, offsetStart)\n          : '';\n      const suffixText =\n        leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\n      const curContext = {\n        collapsed: range.length === 0,\n        // @ts-expect-error Fix me later\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        line,\n        offset,\n        prefix: prefixText,\n        suffix: suffixText,\n        event: evt,\n      };\n      const prevented = matches.some((binding) => {\n        if (\n          binding.collapsed != null &&\n          binding.collapsed !== curContext.collapsed\n        ) {\n          return false;\n        }\n        if (binding.empty != null && binding.empty !== curContext.empty) {\n          return false;\n        }\n        if (binding.offset != null && binding.offset !== curContext.offset) {\n          return false;\n        }\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every((name) => curContext.format[name] == null)) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (\n            !Object.keys(binding.format).every((name) => {\n              // @ts-expect-error Fix me later\n              if (binding.format[name] === true)\n                return curContext.format[name] != null;\n              // @ts-expect-error Fix me later\n              if (binding.format[name] === false)\n                return curContext.format[name] == null;\n              // @ts-expect-error Fix me later\n              return isEqual(binding.format[name], curContext.format[name]);\n            })\n          ) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\n          return false;\n        }\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\n          return false;\n        }\n        // @ts-expect-error Fix me later\n        return binding.handler.call(this, range, curContext, binding) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n\n  handleBackspace(range: Range, context: Context) {\n    // Check for astral symbols\n    const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix)\n      ? 2\n      : 1;\n    if (range.index === 0 || this.quill.getLength() <= 1) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index - length).delete(length);\n    if (context.offset === 0) {\n      // Always deleting newline here, length always 1\n      const [prev] = this.quill.getLine(range.index - 1);\n      if (prev) {\n        const isPrevLineEmpty =\n          prev.statics.blotName === 'block' && prev.length() <= 1;\n        if (!isPrevLineEmpty) {\n          // @ts-expect-error Fix me later\n          const curFormats = line.formats();\n          const prevFormats = this.quill.getFormat(range.index - 1, 1);\n          formats = AttributeMap.diff(curFormats, prevFormats) || {};\n          if (Object.keys(formats).length > 0) {\n            // line.length() - 1 targets \\n in line, another -1 for newline being deleted\n            const formatDelta = new Delta()\n              // @ts-expect-error Fix me later\n              .retain(range.index + line.length() - 2)\n              .retain(1, formats);\n            delta = delta.compose(formatDelta);\n          }\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n\n  handleDelete(range: Range, context: Context) {\n    // Check for astral symbols\n    const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix)\n      ? 2\n      : 1;\n    if (range.index >= this.quill.getLength() - length) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index).delete(length);\n    // @ts-expect-error Fix me later\n    if (context.offset >= line.length() - 1) {\n      const [next] = this.quill.getLine(range.index + 1);\n      if (next) {\n        // @ts-expect-error Fix me later\n        const curFormats = line.formats();\n        const nextFormats = this.quill.getFormat(range.index, 1);\n        formats = AttributeMap.diff(curFormats, nextFormats) || {};\n        if (Object.keys(formats).length > 0) {\n          delta = delta.retain(next.length() - 1).retain(1, formats);\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n\n  handleDeleteRange(range: Range) {\n    deleteRange({ range, quill: this.quill });\n    this.quill.focus();\n  }\n\n  handleEnter(range: Range, context: Context) {\n    const lineFormats = Object.keys(context.format).reduce(\n      (formats: Record<string, unknown>, format) => {\n        if (\n          this.quill.scroll.query(format, Scope.BLOCK) &&\n          !Array.isArray(context.format[format])\n        ) {\n          formats[format] = context.format[format];\n        }\n        return formats;\n      },\n      {},\n    );\n    const delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .insert('\\n', lineFormats);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n    this.quill.focus();\n  }\n}\n\nconst defaultOptions: KeyboardOptions = {\n  bindings: {\n    bold: makeFormatHandler('bold'),\n    italic: makeFormatHandler('italic'),\n    underline: makeFormatHandler('underline'),\n    indent: {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: 'Tab',\n      format: ['blockquote', 'indent', 'list'],\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n        return false;\n      },\n    },\n    outdent: {\n      key: 'Tab',\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n        return false;\n      },\n    },\n    'outdent backspace': {\n      key: 'Backspace',\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      },\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: 'Tab',\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      },\n    },\n    tab: {\n      key: 'Tab',\n      handler(range, context) {\n        if (context.format.table) return true;\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index)\n          .delete(range.length)\n          .insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'blockquote empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['blockquote'],\n      empty: true,\n      handler() {\n        this.quill.format('blockquote', false, Quill.sources.USER);\n      },\n    },\n    'list empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler(range, context) {\n        const formats: Record<string, unknown> = { list: false };\n        if (context.format.indent) {\n          formats.indent = false;\n        }\n        this.quill.formatLine(\n          range.index,\n          range.length,\n          formats,\n          Quill.sources.USER,\n        );\n      },\n    },\n    'checklist enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: { list: 'checked' },\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const formats = {\n          // @ts-expect-error Fix me later\n          ...line.formats(),\n          list: 'checked',\n        };\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', formats)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - offset - 1)\n          .retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      },\n    },\n    'header enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler(range, context) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', context.format)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - offset - 1)\n          .retain(1, { header: null });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      },\n    },\n    'table backspace': {\n      key: 'Backspace',\n      format: ['table'],\n      collapsed: true,\n      offset: 0,\n      handler() {},\n    },\n    'table delete': {\n      key: 'Delete',\n      format: ['table'],\n      collapsed: true,\n      suffix: /^$/,\n      handler() {},\n    },\n    'table enter': {\n      key: 'Enter',\n      shiftKey: null,\n      format: ['table'],\n      handler(range) {\n        const module = this.quill.getModule('table');\n        if (module) {\n          // @ts-expect-error\n          const [table, row, cell, offset] = module.getTable(range);\n          const shift = tableSide(table, row, cell, offset);\n          if (shift == null) return;\n          let index = table.offset();\n          if (shift < 0) {\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(\n              range.index + 1,\n              range.length,\n              Quill.sources.SILENT,\n            );\n          } else if (shift > 0) {\n            index += table.length();\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(index, Quill.sources.USER);\n          }\n        }\n      },\n    },\n    'table tab': {\n      key: 'Tab',\n      shiftKey: null,\n      format: ['table'],\n      handler(range, context) {\n        const { event, line: cell } = context;\n        const offset = cell.offset(this.quill.scroll);\n        if (event.shiftKey) {\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\n        }\n      },\n    },\n    'list autofill': {\n      key: ' ',\n      shiftKey: null,\n      collapsed: true,\n      format: {\n        'code-block': false,\n        blockquote: false,\n        table: false,\n      },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler(range, context) {\n        if (this.quill.scroll.query('list') == null) return true;\n        const { length } = context.prefix;\n        const [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]':\n          case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':\n          case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index - offset)\n          .delete(length + 1)\n          // @ts-expect-error Fix me later\n          .retain(line.length() - 2 - offset)\n          .retain(1, { list: value });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'code exit': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /^$/,\n      suffix: /^\\s*$/,\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        let numLines = 2;\n        let cur = line;\n        while (\n          cur != null &&\n          cur.length() <= 1 &&\n          cur.formats()['code-block']\n        ) {\n          // @ts-expect-error\n          cur = cur.prev;\n          numLines -= 1;\n          // Requisite prev lines are empty\n          if (numLines <= 0) {\n            const delta = new Delta()\n              // @ts-expect-error Fix me later\n              .retain(range.index + line.length() - offset - 2)\n              .retain(1, { 'code-block': null })\n              .delete(1);\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\n            return false;\n          }\n        }\n        return true;\n      },\n    },\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\n    'table down': makeTableArrowHandler(false),\n    'table up': makeTableArrowHandler(true),\n  },\n};\n\nKeyboard.DEFAULTS = defaultOptions;\n\nfunction makeCodeBlockHandler(indent: boolean): BindingObject {\n  return {\n    key: 'Tab',\n    shiftKey: !indent,\n    format: { 'code-block': true },\n    handler(range, { event }) {\n      const CodeBlock = this.quill.scroll.query('code-block');\n      // @ts-expect-error\n      const { TAB } = CodeBlock;\n      if (range.length === 0 && !event.shiftKey) {\n        this.quill.insertText(range.index, TAB, Quill.sources.USER);\n        this.quill.setSelection(range.index + TAB.length, Quill.sources.SILENT);\n        return;\n      }\n\n      const lines =\n        range.length === 0\n          ? this.quill.getLines(range.index, 1)\n          : this.quill.getLines(range);\n      let { index, length } = range;\n      lines.forEach((line, i) => {\n        if (indent) {\n          line.insertAt(0, TAB);\n          if (i === 0) {\n            index += TAB.length;\n          } else {\n            length += TAB.length;\n          }\n          // @ts-expect-error Fix me later\n        } else if (line.domNode.textContent.startsWith(TAB)) {\n          line.deleteAt(0, TAB.length);\n          if (i === 0) {\n            index -= TAB.length;\n          } else {\n            length -= TAB.length;\n          }\n        }\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    },\n  };\n}\n\nfunction makeEmbedArrowHandler(\n  key: string,\n  shiftKey: boolean | null,\n): BindingObject {\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler(range) {\n      let { index } = range;\n      if (key === 'ArrowRight') {\n        index += range.length + 1;\n      }\n      const [leaf] = this.quill.getLeaf(index);\n      if (!(leaf instanceof EmbedBlot)) return true;\n      if (key === 'ArrowLeft') {\n        if (shiftKey) {\n          this.quill.setSelection(\n            range.index - 1,\n            range.length + 1,\n            Quill.sources.USER,\n          );\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else if (shiftKey) {\n        this.quill.setSelection(\n          range.index,\n          range.length + 1,\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.setSelection(\n          range.index + range.length + 1,\n          Quill.sources.USER,\n        );\n      }\n      return false;\n    },\n  };\n}\n\nfunction makeFormatHandler(format: string): BindingObject {\n  return {\n    key: format[0],\n    shortKey: true,\n    handler(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    },\n  };\n}\n\nfunction makeTableArrowHandler(up: boolean): BindingObject {\n  return {\n    key: up ? 'ArrowUp' : 'ArrowDown',\n    collapsed: true,\n    format: ['table'],\n    handler(range, context) {\n      // TODO move to table module\n      const key = up ? 'prev' : 'next';\n      const cell = context.line;\n      const targetRow = cell.parent[key];\n      if (targetRow != null) {\n        if (targetRow.statics.blotName === 'table-row') {\n          // @ts-expect-error\n          let targetCell = targetRow.children.head;\n          let cur = cell;\n          while (cur.prev != null) {\n            // @ts-expect-error\n            cur = cur.prev;\n            targetCell = targetCell.next;\n          }\n          const index =\n            targetCell.offset(this.quill.scroll) +\n            Math.min(context.offset, targetCell.length() - 1);\n          this.quill.setSelection(index, 0, Quill.sources.USER);\n        }\n      } else {\n        // @ts-expect-error\n        const targetLine = cell.table()[key];\n        if (targetLine != null) {\n          if (up) {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll) + targetLine.length() - 1,\n              0,\n              Quill.sources.USER,\n            );\n          } else {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll),\n              0,\n              Quill.sources.USER,\n            );\n          }\n        }\n      }\n      return false;\n    },\n  };\n}\n\nfunction normalize(binding: Binding): BindingObject | null {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    binding = { key: binding };\n  } else if (typeof binding === 'object') {\n    binding = cloneDeep(binding);\n  } else {\n    return null;\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n// TODO: Move into quill.ts or editor.ts\nfunction deleteRange({ quill, range }: { quill: Quill; range: Range }) {\n  const lines = quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    const firstFormats = lines[0].formats();\n    const lastFormats = lines[lines.length - 1].formats();\n    formats = AttributeMap.diff(lastFormats, firstFormats) || {};\n  }\n  quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  quill.setSelection(range.index, Quill.sources.SILENT);\n}\n\nfunction tableSide(_table: unknown, row: Blot, cell: Blot, offset: number) {\n  if (row.prev == null && row.next == null) {\n    if (cell.prev == null && cell.next == null) {\n      return offset === 0 ? -1 : 1;\n    }\n    return cell.prev == null ? -1 : 1;\n  }\n  if (row.prev == null) {\n    return -1;\n  }\n  if (row.next == null) {\n    return 1;\n  }\n  return null;\n}\n\nexport { Keyboard as default, SHORTKEY, normalize, deleteRange };\n","const normalWeightRegexp = /font-weight:\\s*normal/;\nconst blockTagNames = ['P', 'OL', 'UL'];\n\nconst isBlockElement = (element: Element | null) => {\n  return element && blockTagNames.includes(element.tagName);\n};\n\nconst normalizeEmptyLines = (doc: Document) => {\n  Array.from(doc.querySelectorAll('br'))\n    .filter(\n      (br) =>\n        isBlockElement(br.previousElementSibling) &&\n        isBlockElement(br.nextElementSibling),\n    )\n    .forEach((br) => {\n      br.parentNode?.removeChild(br);\n    });\n};\n\nconst normalizeFontWeight = (doc: Document) => {\n  Array.from(doc.querySelectorAll('b[style*=\"font-weight\"]'))\n    .filter((node) => node.getAttribute('style')?.match(normalWeightRegexp))\n    .forEach((node) => {\n      const fragment = doc.createDocumentFragment();\n      fragment.append(...node.childNodes);\n      node.parentNode?.replaceChild(fragment, node);\n    });\n};\n\nexport default function normalize(doc: Document) {\n  if (doc.querySelector('[id^=\"docs-internal-guid-\"]')) {\n    normalizeFontWeight(doc);\n    normalizeEmptyLines(doc);\n  }\n}\n","const ignoreRegexp = /\\bmso-list:[^;]*ignore/i;\nconst idRegexp = /\\bmso-list:[^;]*\\bl(\\d+)/i;\nconst indentRegexp = /\\bmso-list:[^;]*\\blevel(\\d+)/i;\n\nconst parseListItem = (element: Element, html: string) => {\n  const style = element.getAttribute('style');\n  const idMatch = style?.match(idRegexp);\n  if (!idMatch) {\n    return null;\n  }\n  const id = Number(idMatch[1]);\n\n  const indentMatch = style?.match(indentRegexp);\n  const indent = indentMatch ? Number(indentMatch[1]) : 1;\n\n  const typeRegexp = new RegExp(\n    `@list l${id}:level${indent}\\\\s*\\\\{[^\\\\}]*mso-level-number-format:\\\\s*([\\\\w-]+)`,\n    'i',\n  );\n  const typeMatch = html.match(typeRegexp);\n  const type = typeMatch && typeMatch[1] === 'bullet' ? 'bullet' : 'ordered';\n\n  return { id, indent, type, element };\n};\n\n// list items are represented as `p` tags with styles like `mso-list: l0 level1` where:\n// 1. \"0\" in \"l0\" means the list item id;\n// 2. \"1\" in \"level1\" means the indent level, starting from 1.\nconst normalizeListItem = (doc: Document) => {\n  const msoList = Array.from(doc.querySelectorAll('[style*=mso-list]'));\n  const ignored: Element[] = [];\n  const others: Element[] = [];\n  msoList.forEach((node) => {\n    const shouldIgnore = (node.getAttribute('style') || '').match(ignoreRegexp);\n    if (shouldIgnore) {\n      ignored.push(node);\n    } else {\n      others.push(node);\n    }\n  });\n\n  // Each list item contains a marker wrapped with \"mso-list: Ignore\".\n  ignored.forEach((node) => node.parentNode?.removeChild(node));\n\n  // The list stype is not defined inline with the tag, instead, it's in the\n  // style tag so we need to pass the html as a string.\n  const html = doc.documentElement.innerHTML;\n  const listItems = others\n    .map((element) => parseListItem(element, html))\n    .filter((parsed) => parsed);\n\n  while (listItems.length) {\n    const childListItems = [];\n\n    let current = listItems.shift();\n    // Group continuous items into the same group (aka \"ul\")\n    while (current) {\n      childListItems.push(current);\n      current =\n        listItems.length &&\n        listItems[0]?.element === current.element.nextElementSibling &&\n        // Different id means the next item doesn't belong to this group.\n        listItems[0].id === current.id\n          ? listItems.shift()\n          : null;\n    }\n\n    const ul = document.createElement('ul');\n    childListItems.forEach((listItem) => {\n      const li = document.createElement('li');\n      li.setAttribute('data-list', listItem.type);\n      if (listItem.indent > 1) {\n        li.setAttribute('class', `ql-indent-${listItem.indent - 1}`);\n      }\n      li.innerHTML = listItem.element.innerHTML;\n      ul.appendChild(li);\n    });\n\n    const element = childListItems[0]?.element;\n    const { parentNode } = element ?? {};\n    if (element) {\n      parentNode?.replaceChild(ul, element);\n    }\n    childListItems.slice(1).forEach(({ element: e }) => {\n      parentNode?.removeChild(e);\n    });\n  }\n};\n\nexport default function normalize(doc: Document) {\n  if (\n    doc.documentElement.getAttribute('xmlns:w') ===\n    'urn:schemas-microsoft-com:office:word'\n  ) {\n    normalizeListItem(doc);\n  }\n}\n","import googleDocs from './normalizers/googleDocs.js';\nimport msWord from './normalizers/msWord.js';\n\nconst NORMALIZERS = [msWord, googleDocs];\n\nconst normalizeExternalHTML = (doc: Document) => {\n  if (doc.documentElement) {\n    NORMALIZERS.forEach((normalize) => {\n      normalize(doc);\n    });\n  }\n};\n\nexport default normalizeExternalHTML;\n","import type { ScrollBlot } from 'parchment';\nimport {\n  Attributor,\n  BlockBlot,\n  ClassAttributor,\n  EmbedBlot,\n  Scope,\n  StyleAttributor,\n} from 'parchment';\nimport Delta from 'quill-delta';\nimport { BlockEmbed } from '../blots/block.js';\nimport type { EmitterSource } from '../core/emitter.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type { Range } from '../core/selection.js';\nimport { AlignAttribute, AlignStyle } from '../formats/align.js';\nimport { BackgroundStyle } from '../formats/background.js';\nimport CodeBlock from '../formats/code.js';\nimport { ColorStyle } from '../formats/color.js';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction.js';\nimport { FontStyle } from '../formats/font.js';\nimport { SizeStyle } from '../formats/size.js';\nimport { deleteRange } from './keyboard.js';\nimport normalizeExternalHTML from './normalizeExternalHTML/index.js';\n\nconst debug = logger('quill:clipboard');\n\ntype Selector = string | Node['TEXT_NODE'] | Node['ELEMENT_NODE'];\ntype Matcher = (node: Node, delta: Delta, scroll: ScrollBlot) => Delta;\n\nconst CLIPBOARD_CONFIG: [Selector, Matcher][] = [\n  [Node.TEXT_NODE, matchText],\n  [Node.TEXT_NODE, matchNewline],\n  ['br', matchBreak],\n  [Node.ELEMENT_NODE, matchNewline],\n  [Node.ELEMENT_NODE, matchBlot],\n  [Node.ELEMENT_NODE, matchAttributor],\n  [Node.ELEMENT_NODE, matchStyles],\n  ['li', matchIndent],\n  ['ol, ul', matchList],\n  ['pre', matchCodeBlock],\n  ['tr', matchTable],\n  ['b', createMatchAlias('bold')],\n  ['i', createMatchAlias('italic')],\n  ['strike', createMatchAlias('strike')],\n  ['style', matchIgnore],\n];\n\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce(\n  (memo: Record<string, Attributor>, attr) => {\n    memo[attr.keyName] = attr;\n    return memo;\n  },\n  {},\n);\n\nconst STYLE_ATTRIBUTORS = [\n  AlignStyle,\n  BackgroundStyle,\n  ColorStyle,\n  DirectionStyle,\n  FontStyle,\n  SizeStyle,\n].reduce((memo: Record<string, Attributor>, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\ninterface ClipboardOptions {\n  matchers: [Selector, Matcher][];\n}\n\nclass Clipboard extends Module<ClipboardOptions> {\n  static DEFAULTS: ClipboardOptions = {\n    matchers: [],\n  };\n\n  matchers: [Selector, Matcher][];\n\n  constructor(quill: Quill, options: Partial<ClipboardOptions>) {\n    super(quill, options);\n    this.quill.root.addEventListener('copy', (e) =>\n      this.onCaptureCopy(e, false),\n    );\n    this.quill.root.addEventListener('cut', (e) => this.onCaptureCopy(e, true));\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers ?? []).forEach(\n      ([selector, matcher]) => {\n        this.addMatcher(selector, matcher);\n      },\n    );\n  }\n\n  addMatcher(selector: Selector, matcher: Matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n\n  convert(\n    { html, text }: { html?: string; text?: string },\n    formats: Record<string, unknown> = {},\n  ) {\n    if (formats[CodeBlock.blotName]) {\n      return new Delta().insert(text || '', {\n        [CodeBlock.blotName]: formats[CodeBlock.blotName],\n      });\n    }\n    if (!html) {\n      return new Delta().insert(text || '', formats);\n    }\n    const delta = this.convertHTML(html);\n    // Remove trailing newline\n    if (\n      deltaEndsWith(delta, '\\n') &&\n      (delta.ops[delta.ops.length - 1].attributes == null || formats.table)\n    ) {\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    return delta;\n  }\n\n  protected normalizeHTML(doc: Document) {\n    normalizeExternalHTML(doc);\n  }\n\n  protected convertHTML(html: string) {\n    const doc = new DOMParser().parseFromString(html, 'text/html');\n    this.normalizeHTML(doc);\n    const container = doc.body;\n    const nodeMatches = new WeakMap();\n    const [elementMatchers, textMatchers] = this.prepareMatching(\n      container,\n      nodeMatches,\n    );\n    return traverse(\n      this.quill.scroll,\n      container,\n      elementMatchers,\n      textMatchers,\n      nodeMatches,\n    );\n  }\n\n  dangerouslyPasteHTML(html: string, source?: EmitterSource): void;\n  dangerouslyPasteHTML(\n    index: number,\n    html: string,\n    source?: EmitterSource,\n  ): void;\n  dangerouslyPasteHTML(\n    index: number | string,\n    html?: string,\n    source: EmitterSource = Quill.sources.API,\n  ) {\n    if (typeof index === 'string') {\n      const delta = this.convert({ html: index, text: '' });\n      // @ts-expect-error\n      this.quill.setContents(delta, html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      const paste = this.convert({ html, text: '' });\n      this.quill.updateContents(\n        new Delta().retain(index).concat(paste),\n        source,\n      );\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n\n  onCaptureCopy(e: ClipboardEvent, isCut = false) {\n    if (e.defaultPrevented) return;\n    e.preventDefault();\n    const [range] = this.quill.selection.getRange();\n    if (range == null) return;\n    const { html, text } = this.onCopy(range, isCut);\n    e.clipboardData?.setData('text/plain', text);\n    e.clipboardData?.setData('text/html', html);\n    if (isCut) {\n      deleteRange({ range, quill: this.quill });\n    }\n  }\n\n  /*\n   * https://www.iana.org/assignments/media-types/text/uri-list\n   */\n  private normalizeURIList(urlList: string) {\n    return (\n      urlList\n        .split(/\\r?\\n/)\n        // Ignore all comments\n        .filter((url) => url[0] !== '#')\n        .join('\\n')\n    );\n  }\n\n  onCapturePaste(e: ClipboardEvent) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    e.preventDefault();\n    const range = this.quill.getSelection(true);\n    if (range == null) return;\n    const html = e.clipboardData?.getData('text/html');\n    let text = e.clipboardData?.getData('text/plain');\n    if (!html && !text) {\n      const urlList = e.clipboardData?.getData('text/uri-list');\n      if (urlList) {\n        text = this.normalizeURIList(urlList);\n      }\n    }\n    const files = Array.from(e.clipboardData?.files || []);\n    if (!html && files.length > 0) {\n      this.quill.uploader.upload(range, files);\n      return;\n    }\n    if (html && files.length > 0) {\n      const doc = new DOMParser().parseFromString(html, 'text/html');\n      if (\n        doc.body.childElementCount === 1 &&\n        doc.body.firstElementChild?.tagName === 'IMG'\n      ) {\n        this.quill.uploader.upload(range, files);\n        return;\n      }\n    }\n    this.onPaste(range, { html, text });\n  }\n\n  onCopy(range: Range, isCut: boolean): { html: string; text: string };\n  onCopy(range: Range) {\n    const text = this.quill.getText(range);\n    const html = this.quill.getSemanticHTML(range);\n    return { html, text };\n  }\n\n  onPaste(range: Range, { text, html }: { text?: string; html?: string }) {\n    const formats = this.quill.getFormat(range.index);\n    const pastedDelta = this.convert({ text, html }, formats);\n    debug.log('onPaste', pastedDelta, { text, html });\n    const delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .concat(pastedDelta);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    // range.length contributes to delta.length()\n    this.quill.setSelection(\n      delta.length() - range.length,\n      Quill.sources.SILENT,\n    );\n    this.quill.scrollSelectionIntoView();\n  }\n\n  prepareMatching(container: Element, nodeMatches: WeakMap<Node, Matcher[]>) {\n    const elementMatchers: Matcher[] = [];\n    const textMatchers: Matcher[] = [];\n    this.matchers.forEach((pair) => {\n      const [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          Array.from(container.querySelectorAll(selector)).forEach((node) => {\n            if (nodeMatches.has(node)) {\n              const matches = nodeMatches.get(node);\n              matches?.push(matcher);\n            } else {\n              nodeMatches.set(node, [matcher]);\n            }\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\n\nfunction applyFormat(\n  delta: Delta,\n  format: string,\n  value: unknown,\n  scroll: ScrollBlot,\n): Delta {\n  if (!scroll.query(format)) {\n    return delta;\n  }\n\n  return delta.reduce((newDelta, op) => {\n    if (!op.insert) return newDelta;\n    if (op.attributes && op.attributes[format]) {\n      return newDelta.push(op);\n    }\n    const formats = value ? { [format]: value } : {};\n    return newDelta.insert(op.insert, { ...formats, ...op.attributes });\n  }, new Delta());\n}\n\nfunction deltaEndsWith(delta: Delta, text: string) {\n  let endText = '';\n  for (\n    let i = delta.ops.length - 1;\n    i >= 0 && endText.length < text.length;\n    --i // eslint-disable-line no-plusplus\n  ) {\n    const op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\n\nfunction isLine(node: Node, scroll: ScrollBlot) {\n  if (!(node instanceof Element)) return false;\n  const match = scroll.query(node);\n  // @ts-expect-error\n  if (match && match.prototype instanceof EmbedBlot) return false;\n\n  return [\n    'address',\n    'article',\n    'blockquote',\n    'canvas',\n    'dd',\n    'div',\n    'dl',\n    'dt',\n    'fieldset',\n    'figcaption',\n    'figure',\n    'footer',\n    'form',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'header',\n    'iframe',\n    'li',\n    'main',\n    'nav',\n    'ol',\n    'output',\n    'p',\n    'pre',\n    'section',\n    'table',\n    'td',\n    'tr',\n    'ul',\n    'video',\n  ].includes(node.tagName.toLowerCase());\n}\n\nfunction isBetweenInlineElements(node: HTMLElement, scroll: ScrollBlot) {\n  return (\n    node.previousElementSibling &&\n    node.nextElementSibling &&\n    !isLine(node.previousElementSibling, scroll) &&\n    !isLine(node.nextElementSibling, scroll)\n  );\n}\n\nconst preNodes = new WeakMap();\nfunction isPre(node: Node | null) {\n  if (node == null) return false;\n  if (!preNodes.has(node)) {\n    // @ts-expect-error\n    if (node.tagName === 'PRE') {\n      preNodes.set(node, true);\n    } else {\n      preNodes.set(node, isPre(node.parentNode));\n    }\n  }\n  return preNodes.get(node);\n}\n\nfunction traverse(\n  scroll: ScrollBlot,\n  node: ChildNode,\n  elementMatchers: Matcher[],\n  textMatchers: Matcher[],\n  nodeMatches: WeakMap<Node, Matcher[]>,\n): Delta {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce((delta: Delta, matcher) => {\n      return matcher(node, delta, scroll);\n    }, new Delta());\n  }\n  if (node.nodeType === node.ELEMENT_NODE) {\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\n      let childrenDelta = traverse(\n        scroll,\n        childNode,\n        elementMatchers,\n        textMatchers,\n        nodeMatches,\n      );\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\n          return matcher(childNode as HTMLElement, reducedDelta, scroll);\n        }, childrenDelta);\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce(\n          (reducedDelta, matcher) => {\n            return matcher(childNode, reducedDelta, scroll);\n          },\n          childrenDelta,\n        );\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  }\n  return new Delta();\n}\n\nfunction createMatchAlias(format: string) {\n  return (_node: Element, delta: Delta, scroll: ScrollBlot) => {\n    return applyFormat(delta, format, true, scroll);\n  };\n}\n\nfunction matchAttributor(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  const attributes = Attributor.keys(node);\n  const classes = ClassAttributor.keys(node);\n  const styles = StyleAttributor.keys(node);\n  const formats: Record<string, string | undefined> = {};\n  attributes\n    .concat(classes)\n    .concat(styles)\n    .forEach((name) => {\n      let attr = scroll.query(name, Scope.ATTRIBUTE) as Attributor;\n      if (attr != null) {\n        formats[attr.attrName] = attr.value(node);\n        if (formats[attr.attrName]) return;\n      }\n      attr = ATTRIBUTE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n      attr = STYLE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        attr = STYLE_ATTRIBUTORS[name];\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n    });\n\n  return Object.entries(formats).reduce(\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\n    delta,\n  );\n}\n\nfunction matchBlot(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query(node);\n  if (match == null) return delta;\n  // @ts-expect-error\n  if (match.prototype instanceof EmbedBlot) {\n    const embed = {};\n    // @ts-expect-error\n    const value = match.value(node);\n    if (value != null) {\n      // @ts-expect-error\n      embed[match.blotName] = value;\n      // @ts-expect-error\n      return new Delta().insert(embed, match.formats(node, scroll));\n    }\n  } else {\n    // @ts-expect-error\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\n      delta.insert('\\n');\n    }\n    if (\n      'blotName' in match &&\n      'formats' in match &&\n      typeof match.formats === 'function'\n    ) {\n      return applyFormat(\n        delta,\n        match.blotName,\n        match.formats(node, scroll),\n        scroll,\n      );\n    }\n  }\n  return delta;\n}\n\nfunction matchBreak(node: Node, delta: Delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchCodeBlock(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query('code-block');\n  const language =\n    match && 'formats' in match && typeof match.formats === 'function'\n      ? match.formats(node, scroll)\n      : true;\n  return applyFormat(delta, 'code-block', language, scroll);\n}\n\nfunction matchIgnore() {\n  return new Delta();\n}\n\nfunction matchIndent(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const match = scroll.query(node);\n  if (\n    match == null ||\n    // @ts-expect-error\n    match.blotName !== 'list' ||\n    !deltaEndsWith(delta, '\\n')\n  ) {\n    return delta;\n  }\n  let indent = -1;\n  let parent = node.parentNode;\n  while (parent != null) {\n    // @ts-expect-error\n    if (['OL', 'UL'].includes(parent.tagName)) {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.reduce((composed, op) => {\n    if (!op.insert) return composed;\n    if (op.attributes && typeof op.attributes.indent === 'number') {\n      return composed.push(op);\n    }\n    return composed.insert(op.insert, { indent, ...(op.attributes || {}) });\n  }, new Delta());\n}\n\nfunction matchList(node: Node, delta: Delta, scroll: ScrollBlot) {\n  const element = node as Element;\n  let list = element.tagName === 'OL' ? 'ordered' : 'bullet';\n\n  const checkedAttr = element.getAttribute('data-checked');\n  if (checkedAttr) {\n    list = checkedAttr === 'true' ? 'checked' : 'unchecked';\n  }\n\n  return applyFormat(delta, 'list', list, scroll);\n}\n\nfunction matchNewline(node: Node, delta: Delta, scroll: ScrollBlot) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (\n      isLine(node, scroll) &&\n      (node.childNodes.length > 0 || node instanceof HTMLParagraphElement)\n    ) {\n      return delta.insert('\\n');\n    }\n    if (delta.length() > 0 && node.nextSibling) {\n      let nextSibling: Node | null = node.nextSibling;\n      while (nextSibling != null) {\n        if (isLine(nextSibling, scroll)) {\n          return delta.insert('\\n');\n        }\n        const match = scroll.query(nextSibling);\n        // @ts-expect-error\n        if (match && match.prototype instanceof BlockEmbed) {\n          return delta.insert('\\n');\n        }\n        nextSibling = nextSibling.firstChild;\n      }\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  const formats: Record<string, unknown> = {};\n  const style: Partial<CSSStyleDeclaration> = node.style || {};\n  if (style.fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.textDecoration === 'underline') {\n    formats.underline = true;\n  }\n  if (style.textDecoration === 'line-through') {\n    formats.strike = true;\n  }\n  if (\n    style.fontWeight?.startsWith('bold') ||\n    // @ts-expect-error Fix me later\n    parseInt(style.fontWeight, 10) >= 700\n  ) {\n    formats.bold = true;\n  }\n  delta = Object.entries(formats).reduce(\n    (newDelta, [name, value]) => applyFormat(newDelta, name, value, scroll),\n    delta,\n  );\n  // @ts-expect-error\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    return new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchTable(\n  node: HTMLTableRowElement,\n  delta: Delta,\n  scroll: ScrollBlot,\n) {\n  const table =\n    node.parentElement?.tagName === 'TABLE'\n      ? node.parentElement\n      : node.parentElement?.parentElement;\n  if (table != null) {\n    const rows = Array.from(table.querySelectorAll('tr'));\n    const row = rows.indexOf(node) + 1;\n    return applyFormat(delta, 'table', row, scroll);\n  }\n  return delta;\n}\n\nfunction matchText(node: HTMLElement, delta: Delta, scroll: ScrollBlot) {\n  // @ts-expect-error\n  let text = node.data as string;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentElement?.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (!isPre(node)) {\n    if (\n      text.trim().length === 0 &&\n      text.includes('\\n') &&\n      !isBetweenInlineElements(node, scroll)\n    ) {\n      return delta;\n    }\n    // convert all non-nbsp whitespace into regular space\n    text = text.replace(/[^\\S\\u00a0]/g, ' ');\n    // collapse consecutive spaces into one\n    text = text.replace(/ {2,}/g, ' ');\n    if (\n      (node.previousSibling == null &&\n        node.parentElement != null &&\n        isLine(node.parentElement, scroll)) ||\n      (node.previousSibling instanceof Element &&\n        isLine(node.previousSibling, scroll))\n    ) {\n      // block structure means we don't need leading space\n      text = text.replace(/^ /, '');\n    }\n    if (\n      (node.nextSibling == null &&\n        node.parentElement != null &&\n        isLine(node.parentElement, scroll)) ||\n      (node.nextSibling instanceof Element && isLine(node.nextSibling, scroll))\n    ) {\n      // block structure means we don't need trailing space\n      text = text.replace(/ $/, '');\n    }\n    // done removing whitespace and can normalize all to regular space\n    text = text.replaceAll('\\u00a0', ' ');\n  }\n  return delta.insert(text);\n}\n\nexport {\n  Clipboard as default,\n  matchAttributor,\n  matchBlot,\n  matchNewline,\n  matchText,\n  traverse,\n};\n","import { Scope } from 'parchment';\nimport type Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type Scroll from '../blots/scroll.js';\nimport type { Range } from '../core/selection.js';\n\nexport interface HistoryOptions {\n  userOnly: boolean;\n  delay: number;\n  maxStack: number;\n}\n\nexport interface StackItem {\n  delta: Delta;\n  range: Range | null;\n}\n\ninterface Stack {\n  undo: StackItem[];\n  redo: StackItem[];\n}\n\nclass History extends Module<HistoryOptions> {\n  static DEFAULTS: HistoryOptions = {\n    delay: 1000,\n    maxStack: 100,\n    userOnly: false,\n  };\n\n  lastRecorded = 0;\n  ignoreChange = false;\n  stack: Stack = { undo: [], redo: [] };\n  currentRange: Range | null = null;\n\n  constructor(quill: Quill, options: Partial<HistoryOptions>) {\n    super(quill, options);\n    this.quill.on(\n      Quill.events.EDITOR_CHANGE,\n      (eventName, value, oldValue, source) => {\n        if (eventName === Quill.events.SELECTION_CHANGE) {\n          if (value && source !== Quill.sources.SILENT) {\n            this.currentRange = value;\n          }\n        } else if (eventName === Quill.events.TEXT_CHANGE) {\n          if (!this.ignoreChange) {\n            if (!this.options.userOnly || source === Quill.sources.USER) {\n              this.record(value, oldValue);\n            } else {\n              this.transform(value);\n            }\n          }\n\n          this.currentRange = transformRange(this.currentRange, value);\n        }\n      },\n    );\n\n    this.quill.keyboard.addBinding(\n      { key: 'z', shortKey: true },\n      this.undo.bind(this),\n    );\n    this.quill.keyboard.addBinding(\n      { key: ['z', 'Z'], shortKey: true, shiftKey: true },\n      this.redo.bind(this),\n    );\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding(\n        { key: 'y', shortKey: true },\n        this.redo.bind(this),\n      );\n    }\n\n    this.quill.root.addEventListener('beforeinput', (event) => {\n      if (event.inputType === 'historyUndo') {\n        this.undo();\n        event.preventDefault();\n      } else if (event.inputType === 'historyRedo') {\n        this.redo();\n        event.preventDefault();\n      }\n    });\n  }\n\n  change(source: 'undo' | 'redo', dest: 'redo' | 'undo') {\n    if (this.stack[source].length === 0) return;\n    const item = this.stack[source].pop();\n    if (!item) return;\n    const base = this.quill.getContents();\n    const inverseDelta = item.delta.invert(base);\n    this.stack[dest].push({\n      delta: inverseDelta,\n      range: transformRange(item.range, inverseDelta),\n    });\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(item.delta, Quill.sources.USER);\n    this.ignoreChange = false;\n\n    this.restoreSelection(item);\n  }\n\n  clear() {\n    this.stack = { undo: [], redo: [] };\n  }\n\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n\n  record(changeDelta: Delta, oldDelta: Delta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = changeDelta.invert(oldDelta);\n    let undoRange = this.currentRange;\n    const timestamp = Date.now();\n    if (\n      // @ts-expect-error Fix me later\n      this.lastRecorded + this.options.delay > timestamp &&\n      this.stack.undo.length > 0\n    ) {\n      const item = this.stack.undo.pop();\n      if (item) {\n        undoDelta = undoDelta.compose(item.delta);\n        undoRange = item.range;\n      }\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    if (undoDelta.length() === 0) return;\n    this.stack.undo.push({ delta: undoDelta, range: undoRange });\n    // @ts-expect-error Fix me later\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  redo() {\n    this.change('redo', 'undo');\n  }\n\n  transform(delta: Delta) {\n    transformStack(this.stack.undo, delta);\n    transformStack(this.stack.redo, delta);\n  }\n\n  undo() {\n    this.change('undo', 'redo');\n  }\n\n  protected restoreSelection(stackItem: StackItem) {\n    if (stackItem.range) {\n      this.quill.setSelection(stackItem.range, Quill.sources.USER);\n    } else {\n      const index = getLastChangeIndex(this.quill.scroll, stackItem.delta);\n      this.quill.setSelection(index, Quill.sources.USER);\n    }\n  }\n}\n\nfunction transformStack(stack: StackItem[], delta: Delta) {\n  let remoteDelta = delta;\n  for (let i = stack.length - 1; i >= 0; i -= 1) {\n    const oldItem = stack[i];\n    stack[i] = {\n      delta: remoteDelta.transform(oldItem.delta, true),\n      range: oldItem.range && transformRange(oldItem.range, remoteDelta),\n    };\n    remoteDelta = oldItem.delta.transform(remoteDelta);\n    if (stack[i].delta.length() === 0) {\n      stack.splice(i, 1);\n    }\n  }\n}\n\nfunction endsWithNewlineChange(scroll: Scroll, delta: Delta) {\n  const lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some((attr) => {\n      return scroll.query(attr, Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(scroll: Scroll, delta: Delta) {\n  const deleteLength = delta.reduce((length, op) => {\n    return length + (op.delete || 0);\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(scroll, delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\nfunction transformRange(range: Range | null, delta: Delta) {\n  if (!range) return range;\n  const start = delta.transformPosition(range.index);\n  const end = delta.transformPosition(range.index + range.length);\n  return { index: start, length: end - start };\n}\n\nexport { History as default, getLastChangeIndex };\n","import Delta from 'quill-delta';\nimport type Quill from '../core/quill.js';\nimport Emitter from '../core/emitter.js';\nimport Module from '../core/module.js';\nimport type { Range } from '../core/selection.js';\n\ninterface UploaderOptions {\n  mimetypes: string[];\n  handler: (this: { quill: Quill }, range: Range, files: File[]) => void;\n}\n\nclass Uploader extends Module<UploaderOptions> {\n  static DEFAULTS: UploaderOptions;\n\n  constructor(quill: Quill, options: Partial<UploaderOptions>) {\n    super(quill, options);\n    quill.root.addEventListener('drop', (e) => {\n      e.preventDefault();\n      let native: ReturnType<typeof document.createRange> | null = null;\n      if (document.caretRangeFromPoint) {\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\n        // @ts-expect-error\n      } else if (document.caretPositionFromPoint) {\n        // @ts-expect-error\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\n        native = document.createRange();\n        native.setStart(position.offsetNode, position.offset);\n        native.setEnd(position.offsetNode, position.offset);\n      }\n\n      const normalized = native && quill.selection.normalizeNative(native);\n      if (normalized) {\n        const range = quill.selection.normalizedToRange(normalized);\n        if (e.dataTransfer?.files) {\n          this.upload(range, e.dataTransfer.files);\n        }\n      }\n    });\n  }\n\n  upload(range: Range, files: FileList | File[]) {\n    const uploads: File[] = [];\n    Array.from(files).forEach((file) => {\n      if (file && this.options.mimetypes?.includes(file.type)) {\n        uploads.push(file);\n      }\n    });\n    if (uploads.length > 0) {\n      // @ts-expect-error Fix me later\n      this.options.handler.call(this, range, uploads);\n    }\n  }\n}\n\nUploader.DEFAULTS = {\n  mimetypes: ['image/png', 'image/jpeg'],\n  handler(range: Range, files: File[]) {\n    if (!this.quill.scroll.query('image')) {\n      return;\n    }\n    const promises = files.map<Promise<string>>((file) => {\n      return new Promise((resolve) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n          resolve(reader.result as string);\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(promises).then((images) => {\n      const update = images.reduce((delta: Delta, image) => {\n        return delta.insert({ image });\n      }, new Delta().retain(range.index).delete(range.length)) as Delta;\n      this.quill.updateContents(update, Emitter.sources.USER);\n      this.quill.setSelection(\n        range.index + images.length,\n        Emitter.sources.SILENT,\n      );\n    });\n  },\n};\n\nexport default Uploader;\n","import Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport type { Range } from '../core/selection.js';\nimport { deleteRange } from './keyboard.js';\n\nconst INSERT_TYPES = ['insertText', 'insertReplacementText'];\n\nclass Input extends Module {\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    quill.root.addEventListener('beforeinput', (event) => {\n      this.handleBeforeInput(event);\n    });\n\n    // Gboard with English input on Android triggers `compositionstart` sometimes even\n    // users are not going to type anything.\n    if (!/Android/i.test(navigator.userAgent)) {\n      quill.on(Quill.events.COMPOSITION_BEFORE_START, () => {\n        this.handleCompositionStart();\n      });\n    }\n  }\n\n  private deleteRange(range: Range) {\n    deleteRange({ range, quill: this.quill });\n  }\n\n  private replaceText(range: Range, text = '') {\n    if (range.length === 0) return false;\n\n    if (text) {\n      // Follow the native behavior that inherits the formats of the first character\n      const formats = this.quill.getFormat(range.index, 1);\n      this.deleteRange(range);\n      this.quill.updateContents(\n        new Delta().retain(range.index).insert(text, formats),\n        Quill.sources.USER,\n      );\n    } else {\n      this.deleteRange(range);\n    }\n\n    this.quill.setSelection(range.index + text.length, 0, Quill.sources.SILENT);\n    return true;\n  }\n\n  private handleBeforeInput(event: InputEvent) {\n    if (\n      this.quill.composition.isComposing ||\n      event.defaultPrevented ||\n      !INSERT_TYPES.includes(event.inputType)\n    ) {\n      return;\n    }\n\n    const staticRange = event.getTargetRanges\n      ? event.getTargetRanges()[0]\n      : null;\n    if (!staticRange || staticRange.collapsed === true) {\n      return;\n    }\n\n    const text = getPlainTextFromInputEvent(event);\n    if (text == null) {\n      return;\n    }\n    const normalized = this.quill.selection.normalizeNative(staticRange);\n    const range = normalized\n      ? this.quill.selection.normalizedToRange(normalized)\n      : null;\n    if (range && this.replaceText(range, text)) {\n      event.preventDefault();\n    }\n  }\n\n  private handleCompositionStart() {\n    const range = this.quill.getSelection();\n    if (range) {\n      this.replaceText(range);\n    }\n  }\n}\n\nfunction getPlainTextFromInputEvent(event: InputEvent) {\n  // When `inputType` is \"insertText\":\n  // - `event.data` should be string (Safari uses `event.dataTransfer`).\n  // - `event.dataTransfer` should be null.\n  // When `inputType` is \"insertReplacementText\":\n  // - `event.data` should be null.\n  // - `event.dataTransfer` should contain \"text/plain\" data.\n\n  if (typeof event.data === 'string') {\n    return event.data;\n  }\n  if (event.dataTransfer?.types.includes('text/plain')) {\n    return event.dataTransfer.getData('text/plain');\n  }\n  return null;\n}\n\nexport default Input;\n","import { ParentBlot } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\n\nconst isMac = /Mac/i.test(navigator.platform);\n\n// Export for testing\nexport const TTL_FOR_VALID_SELECTION_CHANGE = 100;\n\n// A loose check to determine if the shortcut can move the caret before a UI node:\n// <ANY_PARENT>[CARET]<div class=\"ql-ui\"></div>[CONTENT]</ANY_PARENT>\nconst canMoveCaretBeforeUINode = (event: KeyboardEvent) => {\n  if (\n    event.key === 'ArrowLeft' ||\n    event.key === 'ArrowRight' || // RTL scripts or moving from the end of the previous line\n    event.key === 'ArrowUp' ||\n    event.key === 'ArrowDown' ||\n    event.key === 'Home'\n  ) {\n    return true;\n  }\n\n  if (isMac && event.key === 'a' && event.ctrlKey === true) {\n    return true;\n  }\n\n  return false;\n};\n\nclass UINode extends Module {\n  isListening = false;\n  selectionChangeDeadline = 0;\n\n  constructor(quill: Quill, options: Record<string, never>) {\n    super(quill, options);\n\n    this.handleArrowKeys();\n    this.handleNavigationShortcuts();\n  }\n\n  private handleArrowKeys() {\n    this.quill.keyboard.addBinding({\n      key: ['ArrowLeft', 'ArrowRight'],\n      offset: 0,\n      shiftKey: null,\n      handler(range, { line, event }) {\n        if (!(line instanceof ParentBlot) || !line.uiNode) {\n          return true;\n        }\n\n        const isRTL = getComputedStyle(line.domNode)['direction'] === 'rtl';\n        if (\n          (isRTL && event.key !== 'ArrowRight') ||\n          (!isRTL && event.key !== 'ArrowLeft')\n        ) {\n          return true;\n        }\n\n        this.quill.setSelection(\n          range.index - 1,\n          range.length + (event.shiftKey ? 1 : 0),\n          Quill.sources.USER,\n        );\n        return false;\n      },\n    });\n  }\n\n  private handleNavigationShortcuts() {\n    this.quill.root.addEventListener('keydown', (event) => {\n      if (!event.defaultPrevented && canMoveCaretBeforeUINode(event)) {\n        this.ensureListeningToSelectionChange();\n      }\n    });\n  }\n\n  /**\n   * We only listen to the `selectionchange` event when\n   * there is an intention of moving the caret to the beginning using shortcuts.\n   * This is primarily implemented to prevent infinite loops, as we are changing\n   * the selection within the handler of a `selectionchange` event.\n   */\n  private ensureListeningToSelectionChange() {\n    this.selectionChangeDeadline = Date.now() + TTL_FOR_VALID_SELECTION_CHANGE;\n\n    if (this.isListening) return;\n    this.isListening = true;\n\n    const listener = () => {\n      this.isListening = false;\n\n      if (Date.now() <= this.selectionChangeDeadline) {\n        this.handleSelectionChange();\n      }\n    };\n\n    document.addEventListener('selectionchange', listener, {\n      once: true,\n    });\n  }\n\n  private handleSelectionChange() {\n    const selection = document.getSelection();\n    if (!selection) return;\n    const range = selection.getRangeAt(0);\n    if (range.collapsed !== true || range.startOffset !== 0) return;\n\n    const line = this.quill.scroll.find(range.startContainer);\n    if (!(line instanceof ParentBlot) || !line.uiNode) return;\n\n    const newRange = document.createRange();\n    newRange.setStartAfter(line.uiNode);\n    newRange.setEndAfter(line.uiNode);\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n}\n\nexport default UINode;\n","import Quill, { Parchment, Range } from './core/quill.js';\nimport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n} from './core/quill.js';\n\nimport Block, { BlockEmbed } from './blots/block.js';\nimport Break from './blots/break.js';\nimport Container from './blots/container.js';\nimport Cursor from './blots/cursor.js';\nimport Embed from './blots/embed.js';\nimport Inline from './blots/inline.js';\nimport Scroll from './blots/scroll.js';\nimport TextBlot from './blots/text.js';\n\nimport Clipboard from './modules/clipboard.js';\nimport History from './modules/history.js';\nimport Keyboard from './modules/keyboard.js';\nimport Uploader from './modules/uploader.js';\nimport Delta, { Op, OpIterator, AttributeMap } from 'quill-delta';\nimport Input from './modules/input.js';\nimport UINode from './modules/uiNode.js';\n\nexport { default as Module } from './core/module.js';\nexport { Delta, Op, OpIterator, AttributeMap, Parchment, Range };\nexport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n};\n\nQuill.register({\n  'blots/block': Block,\n  'blots/block/embed': BlockEmbed,\n  'blots/break': Break,\n  'blots/container': Container,\n  'blots/cursor': Cursor,\n  'blots/embed': Embed,\n  'blots/inline': Inline,\n  'blots/scroll': Scroll,\n  'blots/text': TextBlot,\n\n  'modules/clipboard': Clipboard,\n  'modules/history': History,\n  'modules/keyboard': Keyboard,\n  'modules/uploader': Uploader,\n  'modules/input': Input,\n  'modules/uiNode': UINode,\n});\n\nexport default Quill;\n","import { ClassAttributor, Scope } from 'parchment';\n\nclass IndentAttributor extends ClassAttributor {\n  add(node: HTMLElement, value: string | number) {\n    let normalizedValue = 0;\n    if (value === '+1' || value === '-1') {\n      const indent = this.value(node) || 0;\n      normalizedValue = value === '+1' ? indent + 1 : indent - 1;\n    } else if (typeof value === 'number') {\n      normalizedValue = value;\n    }\n    if (normalizedValue === 0) {\n      this.remove(node);\n      return true;\n    }\n    return super.add(node, normalizedValue.toString());\n  }\n\n  canAdd(node: HTMLElement, value: string) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\n  }\n\n  value(node: HTMLElement) {\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\n  }\n}\n\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\n  scope: Scope.BLOCK,\n  // @ts-expect-error\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8],\n});\n\nexport default IndentClass;\n","import Block from '../blots/block.js';\n\nclass Blockquote extends Block {\n  static blotName = 'blockquote';\n  static tagName = 'blockquote';\n}\n\nexport default Blockquote;\n","import Block from '../blots/block.js';\n\nclass Header extends Block {\n  static blotName = 'header';\n  static tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\n  static formats(domNode: Element) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n}\n\nexport default Header;\n","import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nimport type Scroll from '../blots/scroll.js';\nimport Quill from '../core/quill.js';\n\nclass ListContainer extends Container {}\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\n\nclass ListItem extends Block {\n  static create(value: string) {\n    const node = super.create() as HTMLElement;\n    node.setAttribute('data-list', value);\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n\n  static register() {\n    Quill.register(ListContainer);\n  }\n\n  constructor(scroll: Scroll, domNode: HTMLElement) {\n    super(scroll, domNode);\n    const ui = domNode.ownerDocument.createElement('span');\n    const listEventHandler = (e: Event) => {\n      if (!scroll.isEnabled()) return;\n      const format = this.statics.formats(domNode, scroll);\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n        e.preventDefault();\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n        e.preventDefault();\n      }\n    };\n    ui.addEventListener('mousedown', listEventHandler);\n    ui.addEventListener('touchstart', listEventHandler);\n    this.attachUI(ui);\n  }\n\n  format(name: string, value: string) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\n\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\n\nexport { ListContainer, ListItem as default };\n","import Inline from '../blots/inline.js';\n\nclass Bold extends Inline {\n  static blotName = 'bold';\n  static tagName = ['STRONG', 'B'];\n\n  static create() {\n    return super.create();\n  }\n\n  static formats() {\n    return true;\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\n\nexport default Bold;\n","import Bold from './bold.js';\n\nclass Italic extends Bold {\n  static blotName = 'italic';\n  static tagName = ['EM', 'I'];\n}\n\nexport default Italic;\n","import Inline from '../blots/inline.js';\n\nclass Link extends Inline {\n  static blotName = 'link';\n  static tagName = 'A';\n  static SANITIZED_URL = 'about:blank';\n  static PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel', 'sms'];\n\n  static create(value: string) {\n    const node = super.create(value) as HTMLElement;\n    node.setAttribute('href', this.sanitize(value));\n    node.setAttribute('rel', 'noopener noreferrer');\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    return domNode.getAttribute('href');\n  }\n\n  static sanitize(url: string) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n\n  format(name: string, value: unknown) {\n    if (name !== this.statics.blotName || !value) {\n      super.format(name, value);\n    } else {\n      // @ts-expect-error\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\n    }\n  }\n}\n\nfunction sanitize(url: string, protocols: string[]) {\n  const anchor = document.createElement('a');\n  anchor.href = url;\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\nexport { Link as default, sanitize };\n","import Inline from '../blots/inline.js';\n\nclass Script extends Inline {\n  static blotName = 'script';\n  static tagName = ['SUB', 'SUP'];\n\n  static create(value: 'super' | 'sub' | (string & {})) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    }\n    if (value === 'sub') {\n      return document.createElement('sub');\n    }\n    return super.create(value);\n  }\n\n  static formats(domNode: HTMLElement) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n}\n\nexport default Script;\n","import Bold from './bold.js';\n\nclass Strike extends Bold {\n  static blotName = 'strike';\n  static tagName = ['S', 'STRIKE'];\n}\n\nexport default Strike;\n","import Inline from '../blots/inline.js';\n\nclass Underline extends Inline {\n  static blotName = 'underline';\n  static tagName = 'U';\n}\n\nexport default Underline;\n","import Embed from '../blots/embed.js';\n\nclass Formula extends Embed {\n  static blotName = 'formula';\n  static className = 'ql-formula';\n  static tagName = 'SPAN';\n\n  static create(value: string) {\n    // @ts-expect-error\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    const node = super.create(value) as Element;\n    if (typeof value === 'string') {\n      // @ts-expect-error\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00',\n      });\n      node.setAttribute('data-value', value);\n    }\n    return node;\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('data-value');\n  }\n\n  html() {\n    const { formula } = this.value();\n    return `<span>${formula}</span>`;\n  }\n}\n\nexport default Formula;\n","import { EmbedBlot } from 'parchment';\nimport { sanitize } from './link.js';\n\nconst ATTRIBUTES = ['alt', 'height', 'width'];\n\nclass Image extends EmbedBlot {\n  static blotName = 'image';\n  static tagName = 'IMG';\n\n  static create(value: string) {\n    const node = super.create(value) as Element;\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n\n  static formats(domNode: Element) {\n    return ATTRIBUTES.reduce(\n      (formats: Record<string, string | null>, attribute) => {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      },\n      {},\n    );\n  }\n\n  static match(url: string) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n\n  static sanitize(url: string) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('src');\n  }\n\n  domNode: HTMLImageElement;\n\n  format(name: string, value: string) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\n\nexport default Image;\n","import { BlockEmbed } from '../blots/block.js';\nimport Link from './link.js';\n\nconst ATTRIBUTES = ['height', 'width'];\n\nclass Video extends BlockEmbed {\n  static blotName = 'video';\n  static className = 'ql-video';\n  static tagName = 'IFRAME';\n\n  static create(value: string) {\n    const node = super.create(value) as Element;\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', 'true');\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n\n  static formats(domNode: Element) {\n    return ATTRIBUTES.reduce(\n      (formats: Record<string, string | null>, attribute) => {\n        if (domNode.hasAttribute(attribute)) {\n          formats[attribute] = domNode.getAttribute(attribute);\n        }\n        return formats;\n      },\n      {},\n    );\n  }\n\n  static sanitize(url: string) {\n    return Link.sanitize(url);\n  }\n\n  static value(domNode: Element) {\n    return domNode.getAttribute('src');\n  }\n\n  domNode: HTMLVideoElement;\n\n  format(name: string, value: string) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  html() {\n    const { video } = this.value();\n    return `<a href=\"${video}\">${video}</a>`;\n  }\n}\n\nexport default Video;\n","import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport type { Blot, ScrollBlot } from 'parchment';\nimport Inline from '../blots/inline.js';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { blockDelta } from '../blots/block.js';\nimport BreakBlot from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code.js';\nimport { traverse } from './clipboard.js';\n\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE,\n});\nclass CodeToken extends Inline {\n  static formats(node: Element, scroll: ScrollBlot) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(CodeBlock.className)) {\n        // @ts-expect-error\n        return super.formats(node, scroll);\n      }\n      // @ts-expect-error\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n\n  constructor(scroll: ScrollBlot, domNode: Node, value: unknown) {\n    // @ts-expect-error\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n\n  format(format: string, value: unknown) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n\n  optimize(...args: unknown[]) {\n    // @ts-expect-error\n    super.optimize(...args);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\n\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value: unknown) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n\n  static formats(domNode: Node) {\n    // @ts-expect-error\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n\n  static register() {} // Syntax module will register\n\n  format(name: string, value: unknown) {\n    if (name === this.statics.blotName && value) {\n      // @ts-expect-error\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  replaceWith(name: string | Blot, value?: any) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\n\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  forceNext?: boolean;\n  cachedText?: string | null;\n\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    // @ts-expect-error\n    this.scroll.emitMount(this);\n  }\n\n  format(name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach((child) => {\n        // @ts-expect-error\n        child.format(name, value);\n      });\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: unknown) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n\n  highlight(\n    highlight: (text: string, language: string) => Delta,\n    forced = false,\n  ) {\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(\n      (node) => node !== this.uiNode,\n    );\n    const text = `${nodes.map((node) => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          // @ts-expect-error\n          return delta.concat(blockDelta(child, false));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, { retain, attributes }) => {\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach((format) => {\n              if (\n                [SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)\n              ) {\n                // @ts-expect-error\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          // @ts-expect-error\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n\n  html(index: number, length: number) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock\n      ? SyntaxCodeBlock.formats(codeBlock.domNode)\n      : 'plain';\n\n    return `<pre data-language=\"${language}\">\\n${escapeText(\n      this.code(index, length),\n    )}\\n</pre>`;\n  }\n\n  optimize(context: Record<string, any>) {\n    super.optimize(context);\n    if (\n      this.parent != null &&\n      this.children.head != null &&\n      this.uiNode != null\n    ) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      // @ts-expect-error\n      if (language !== this.uiNode.value) {\n        // @ts-expect-error\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\n\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\n\ninterface SyntaxOptions {\n  interval: number;\n  languages: { key: string; label: string }[];\n  hljs: any;\n}\n\nconst highlight = (lib: any, language: string, text: string) => {\n  if (typeof lib.versionString === 'string') {\n    const majorVersion = lib.versionString.split('.')[0];\n    if (parseInt(majorVersion, 10) >= 11) {\n      return lib.highlight(text, { language }).value;\n    }\n  }\n  return lib.highlight(language, text).value;\n};\n\nclass Syntax extends Module<SyntaxOptions> {\n  static DEFAULTS: SyntaxOptions & { hljs: any };\n\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n\n  languages: Record<string, true>;\n\n  constructor(quill: Quill, options: Partial<SyntaxOptions>) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error(\n        'Syntax module requires highlight.js. Please include the library on the page before Quill.',\n      );\n    }\n    // @ts-expect-error Fix me later\n    this.languages = this.options.languages.reduce(\n      (memo: Record<string, unknown>, { key }) => {\n        memo[key] = true;\n        return memo;\n      },\n      {},\n    );\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, (blot: Blot) => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      // @ts-expect-error Fix me later\n      this.options.languages.forEach(({ key, label }) => {\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n\n  initTimer() {\n    let timer: ReturnType<typeof setTimeout> | null = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n\n  highlight(blot: SyntaxCodeBlockContainer | null = null, force = false) {\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots =\n      blot == null\n        ? this.quill.scroll.descendants(SyntaxCodeBlockContainer)\n        : [blot];\n    blots.forEach((container) => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n\n  highlightBlot(text: string, language = 'plain') {\n    language = this.languages[language] ? language : 'plain';\n    if (language === 'plain') {\n      return escapeText(text)\n        .split('\\n')\n        .reduce((delta, line, i) => {\n          if (i !== 0) {\n            delta.insert('\\n', { [CodeBlock.blotName]: language });\n          }\n          return delta.insert(line);\n        }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = highlight(this.options.hljs, language, text);\n    return traverse(\n      this.quill.scroll,\n      container,\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          const value = TokenAttributor.value(node);\n          if (value) {\n            return delta.compose(\n              new Delta().retain(delta.length(), {\n                [CodeToken.blotName]: value,\n              }),\n            );\n          }\n          return delta;\n        },\n      ],\n      [\n        (node, delta) => {\n          // @ts-expect-error\n          return node.data.split('\\n').reduce((memo, nodeText, i) => {\n            if (i !== 0) memo.insert('\\n', { [CodeBlock.blotName]: language });\n            return memo.insert(nodeText);\n          }, delta);\n        },\n      ],\n      new WeakMap(),\n    );\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [\n    { key: 'plain', label: 'Plain' },\n    { key: 'bash', label: 'Bash' },\n    { key: 'cpp', label: 'C++' },\n    { key: 'cs', label: 'C#' },\n    { key: 'css', label: 'CSS' },\n    { key: 'diff', label: 'Diff' },\n    { key: 'xml', label: 'HTML/XML' },\n    { key: 'java', label: 'Java' },\n    { key: 'javascript', label: 'JavaScript' },\n    { key: 'markdown', label: 'Markdown' },\n    { key: 'php', label: 'PHP' },\n    { key: 'python', label: 'Python' },\n    { key: 'ruby', label: 'Ruby' },\n    { key: 'sql', label: 'SQL' },\n  ],\n};\n\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n","import type { LinkedList } from 'parchment';\nimport Block from '../blots/block.js';\nimport Container from '../blots/container.js';\n\nclass TableCell extends Block {\n  static blotName = 'table';\n  static tagName = 'TD';\n\n  static create(value: string) {\n    const node = super.create() as HTMLElement;\n    if (value) {\n      node.setAttribute('data-row', value);\n    } else {\n      node.setAttribute('data-row', tableId());\n    }\n    return node;\n  }\n\n  static formats(domNode: HTMLElement) {\n    if (domNode.hasAttribute('data-row')) {\n      return domNode.getAttribute('data-row');\n    }\n    return undefined;\n  }\n\n  next: this | null;\n\n  cellOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n\n  format(name: string, value: string) {\n    if (name === TableCell.blotName && value) {\n      this.domNode.setAttribute('data-row', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  row(): TableRow {\n    return this.parent as TableRow;\n  }\n\n  rowOffset() {\n    if (this.row()) {\n      return this.row().rowOffset();\n    }\n    return -1;\n  }\n\n  table() {\n    return this.row() && this.row().table();\n  }\n}\n\nclass TableRow extends Container {\n  static blotName = 'table-row';\n  static tagName = 'TR';\n\n  children: LinkedList<TableCell>;\n  next: this | null;\n\n  checkMerge() {\n    // @ts-expect-error\n    if (super.checkMerge() && this.next.children.head != null) {\n      // @ts-expect-error\n      const thisHead = this.children.head.formats();\n      // @ts-expect-error\n      const thisTail = this.children.tail.formats();\n      // @ts-expect-error\n      const nextHead = this.next.children.head.formats();\n      // @ts-expect-error\n      const nextTail = this.next.children.tail.formats();\n      return (\n        thisHead.table === thisTail.table &&\n        thisHead.table === nextHead.table &&\n        thisHead.table === nextTail.table\n      );\n    }\n    return false;\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.children.forEach((child) => {\n      if (child.next == null) return;\n      const childFormats = child.formats();\n      const nextFormats = child.next.formats();\n      if (childFormats.table !== nextFormats.table) {\n        const next = this.splitAfter(child);\n        if (next) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          next.optimize();\n        }\n        // We might be able to merge with prev now\n        if (this.prev) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          this.prev.optimize();\n        }\n      }\n    });\n  }\n\n  rowOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n\n  table() {\n    return this.parent && this.parent.parent;\n  }\n}\n\nclass TableBody extends Container {\n  static blotName = 'table-body';\n  static tagName = 'TBODY';\n\n  children: LinkedList<TableRow>;\n}\n\nclass TableContainer extends Container {\n  static blotName = 'table-container';\n  static tagName = 'TABLE';\n\n  children: LinkedList<TableBody>;\n\n  balanceCells() {\n    const rows = this.descendants(TableRow);\n    const maxColumns = rows.reduce((max, row) => {\n      return Math.max(row.children.length, max);\n    }, 0);\n    rows.forEach((row) => {\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\n        let value;\n        if (row.children.head != null) {\n          value = TableCell.formats(row.children.head.domNode);\n        }\n        const blot = this.scroll.create(TableCell.blotName, value);\n        row.appendChild(blot);\n        // @ts-expect-error TODO: parameters of optimize() should be a optional\n        blot.optimize(); // Add break blot\n      });\n    });\n  }\n\n  cells(column: number) {\n    return this.rows().map((row) => row.children.at(column));\n  }\n\n  deleteColumn(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    body.children.forEach((row) => {\n      const cell = row.children.at(index);\n      if (cell != null) {\n        cell.remove();\n      }\n    });\n  }\n\n  insertColumn(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    body.children.forEach((row) => {\n      const ref = row.children.at(index);\n      // @ts-expect-error\n      const value = TableCell.formats(row.children.head.domNode);\n      const cell = this.scroll.create(TableCell.blotName, value);\n      row.insertBefore(cell, ref);\n    });\n  }\n\n  insertRow(index: number) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody) as TableBody[];\n    if (body == null || body.children.head == null) return;\n    const id = tableId();\n    const row = this.scroll.create(TableRow.blotName) as TableRow;\n    body.children.head.children.forEach(() => {\n      const cell = this.scroll.create(TableCell.blotName, id);\n      row.appendChild(cell);\n    });\n    const ref = body.children.at(index);\n    body.insertBefore(row, ref);\n  }\n\n  rows() {\n    const body = this.children.head;\n    if (body == null) return [];\n    return body.children.map((row) => row);\n  }\n}\n\nTableContainer.allowedChildren = [TableBody];\nTableBody.requiredContainer = TableContainer;\n\nTableBody.allowedChildren = [TableRow];\nTableRow.requiredContainer = TableBody;\n\nTableRow.allowedChildren = [TableCell];\nTableCell.requiredContainer = TableRow;\n\nfunction tableId() {\n  const id = Math.random().toString(36).slice(2, 6);\n  return `row-${id}`;\n}\n\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\n","import Delta from 'quill-delta';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport {\n  TableCell,\n  TableRow,\n  TableBody,\n  TableContainer,\n  tableId,\n} from '../formats/table.js';\n\nclass Table extends Module {\n  static register() {\n    Quill.register(TableCell);\n    Quill.register(TableRow);\n    Quill.register(TableBody);\n    Quill.register(TableContainer);\n  }\n\n  constructor(...args: ConstructorParameters<typeof Module>) {\n    super(...args);\n    this.listenBalanceCells();\n  }\n\n  balanceTables() {\n    this.quill.scroll.descendants(TableContainer).forEach((table) => {\n      table.balanceCells();\n    });\n  }\n\n  deleteColumn() {\n    const [table, , cell] = this.getTable();\n    if (cell == null) return;\n    // @ts-expect-error\n    table.deleteColumn(cell.cellOffset());\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteRow() {\n    const [, row] = this.getTable();\n    if (row == null) return;\n    row.remove();\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteTable() {\n    const [table] = this.getTable();\n    if (table == null) return;\n    // @ts-expect-error\n    const offset = table.offset();\n    // @ts-expect-error\n    table.remove();\n    this.quill.update(Quill.sources.USER);\n    this.quill.setSelection(offset, Quill.sources.SILENT);\n  }\n\n  getTable(\n    range = this.quill.getSelection(),\n  ): [null, null, null, -1] | [Table, TableRow, TableCell, number] {\n    if (range == null) return [null, null, null, -1];\n    const [cell, offset] = this.quill.getLine(range.index);\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\n      return [null, null, null, -1];\n    }\n    const row = cell.parent;\n    const table = row.parent.parent;\n    // @ts-expect-error\n    return [table, row, cell, offset];\n  }\n\n  insertColumn(offset: number) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const column = cell.cellOffset();\n    table.insertColumn(column + offset);\n    this.quill.update(Quill.sources.USER);\n    let shift = row.rowOffset();\n    if (offset === 0) {\n      shift += 1;\n    }\n    this.quill.setSelection(\n      range.index + shift,\n      range.length,\n      Quill.sources.SILENT,\n    );\n  }\n\n  insertColumnLeft() {\n    this.insertColumn(0);\n  }\n\n  insertColumnRight() {\n    this.insertColumn(1);\n  }\n\n  insertRow(offset: number) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const index = row.rowOffset();\n    table.insertRow(index + offset);\n    this.quill.update(Quill.sources.USER);\n    if (offset > 0) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(\n        range.index + row.children.length,\n        range.length,\n        Quill.sources.SILENT,\n      );\n    }\n  }\n\n  insertRowAbove() {\n    this.insertRow(0);\n  }\n\n  insertRowBelow() {\n    this.insertRow(1);\n  }\n\n  insertTable(rows: number, columns: number) {\n    const range = this.quill.getSelection();\n    if (range == null) return;\n    const delta = new Array(rows).fill(0).reduce((memo) => {\n      const text = new Array(columns).fill('\\n').join('');\n      return memo.insert(text, { table: tableId() });\n    }, new Delta().retain(range.index));\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\n    this.balanceTables();\n  }\n\n  listenBalanceCells() {\n    this.quill.on(\n      Quill.events.SCROLL_OPTIMIZE,\n      (mutations: MutationRecord[]) => {\n        mutations.some((mutation) => {\n          if (\n            ['TD', 'TR', 'TBODY', 'TABLE'].includes(\n              (mutation.target as HTMLElement).tagName,\n            )\n          ) {\n            this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\n              if (source !== Quill.sources.USER) return;\n              this.balanceTables();\n            });\n            return true;\n          }\n          return false;\n        });\n      },\n    );\n  }\n}\n\nexport default Table;\n","import Delta from 'quill-delta';\nimport { EmbedBlot, Scope } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport type { Range } from '../core/selection.js';\n\nconst debug = logger('quill:toolbar');\n\ntype Handler = (this: Toolbar, value: any) => void;\n\nexport type ToolbarConfig = Array<\n  string[] | Array<string | Record<string, unknown>>\n>;\nexport interface ToolbarProps {\n  container?: HTMLElement | ToolbarConfig | null;\n  handlers?: Record<string, Handler>;\n  option?: number;\n  module?: boolean;\n  theme?: boolean;\n}\n\nclass Toolbar extends Module<ToolbarProps> {\n  static DEFAULTS: ToolbarProps;\n\n  container?: HTMLElement | null;\n  controls: [string, HTMLElement][];\n  handlers: Record<string, Handler>;\n\n  constructor(quill: Quill, options: Partial<ToolbarProps>) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      container.setAttribute('role', 'toolbar');\n      addControls(container, this.options.container);\n      quill.container?.parentNode?.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      debug.error('Container required for toolbar', this.options);\n      return;\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    if (this.options.handlers) {\n      Object.keys(this.options.handlers).forEach((format) => {\n        const handler = this.options.handlers?.[format];\n        if (handler) {\n          this.addHandler(format, handler);\n        }\n      });\n    }\n    Array.from(this.container.querySelectorAll('button, select')).forEach(\n      (input) => {\n        // @ts-expect-error\n        this.attach(input);\n      },\n    );\n    this.quill.on(Quill.events.EDITOR_CHANGE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n\n  addHandler(format: string, handler: Handler) {\n    this.handlers[format] = handler;\n  }\n\n  attach(input: HTMLElement) {\n    let format = Array.from(input.classList).find((className) => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (\n      this.handlers[format] == null &&\n      this.quill.scroll.query(format) == null\n    ) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, (e) => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        // @ts-expect-error\n        if (input.selectedIndex < 0) return;\n        // @ts-expect-error\n        const selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          // @ts-expect-error\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (\n        // @ts-expect-error\n        this.quill.scroll.query(format).prototype instanceof EmbedBlot\n      ) {\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\n        if (!value) return;\n        this.quill.updateContents(\n          new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index)\n            // @ts-expect-error Fix me later\n            .delete(range.length)\n            .insert({ [format]: value }),\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n\n  update(range: Range | null) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach((pair) => {\n      const [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option: HTMLOptionElement | null = null;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          // @ts-expect-error TODO fix me later\n          input.value = ''; // TODO make configurable?\n          // @ts-expect-error TODO fix me later\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n        input.setAttribute('aria-pressed', 'false');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const value = formats[format] as boolean | number | string | object;\n        const isActive =\n          value === input.getAttribute('value') ||\n          (value != null && value.toString() === input.getAttribute('value')) ||\n          (value == null && !input.getAttribute('value'));\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      } else {\n        const isActive = formats[format] != null;\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\n\nfunction addButton(container: HTMLElement, format: string, value?: string) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(`ql-${format}`);\n  input.setAttribute('aria-pressed', 'false');\n  if (value != null) {\n    input.value = value;\n    input.setAttribute('aria-label', `${format}: ${value}`);\n  } else {\n    input.setAttribute('aria-label', format);\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(\n  container: HTMLElement,\n  groups:\n    | (string | Record<string, unknown>)[][]\n    | (string | Record<string, unknown>)[],\n) {\n  if (!Array.isArray(groups[0])) {\n    // @ts-expect-error\n    groups = [groups];\n  }\n  groups.forEach((controls: any) => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach((control: any) => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(\n  container: HTMLElement,\n  format: string,\n  values: Array<string | boolean>,\n) {\n  const input = document.createElement('select');\n  input.classList.add(`ql-${format}`);\n  values.forEach((value) => {\n    const option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', String(value));\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach((name) => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\n            this.quill.format(name, false, Quill.sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range.index, range.length, Quill.sources.USER);\n      }\n    },\n    direction(value) {\n      const { align } = this.quill.getFormat();\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      // @ts-expect-error\n      const indent = parseInt(formats.indent || 0, 10);\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list(value) {\n      const range = this.quill.getSelection();\n      // @ts-expect-error\n      const formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    },\n  },\n};\n\nexport { Toolbar as default, addControls };\n","import alignLeftIcon from '../assets/icons/align-left.svg';\nimport alignCenterIcon from '../assets/icons/align-center.svg';\nimport alignRightIcon from '../assets/icons/align-right.svg';\nimport alignJustifyIcon from '../assets/icons/align-justify.svg';\nimport backgroundIcon from '../assets/icons/background.svg';\nimport blockquoteIcon from '../assets/icons/blockquote.svg';\nimport boldIcon from '../assets/icons/bold.svg';\nimport cleanIcon from '../assets/icons/clean.svg';\nimport codeIcon from '../assets/icons/code.svg';\nimport colorIcon from '../assets/icons/color.svg';\nimport directionLeftToRightIcon from '../assets/icons/direction-ltr.svg';\nimport directionRightToLeftIcon from '../assets/icons/direction-rtl.svg';\nimport formulaIcon from '../assets/icons/formula.svg';\nimport headerIcon from '../assets/icons/header.svg';\nimport header2Icon from '../assets/icons/header-2.svg';\nimport header3Icon from '../assets/icons/header-3.svg';\nimport header4Icon from '../assets/icons/header-4.svg';\nimport header5Icon from '../assets/icons/header-5.svg';\nimport header6Icon from '../assets/icons/header-6.svg';\nimport italicIcon from '../assets/icons/italic.svg';\nimport imageIcon from '../assets/icons/image.svg';\nimport indentIcon from '../assets/icons/indent.svg';\nimport outdentIcon from '../assets/icons/outdent.svg';\nimport linkIcon from '../assets/icons/link.svg';\nimport listBulletIcon from '../assets/icons/list-bullet.svg';\nimport listCheckIcon from '../assets/icons/list-check.svg';\nimport listOrderedIcon from '../assets/icons/list-ordered.svg';\nimport subscriptIcon from '../assets/icons/subscript.svg';\nimport superscriptIcon from '../assets/icons/superscript.svg';\nimport strikeIcon from '../assets/icons/strike.svg';\nimport tableIcon from '../assets/icons/table.svg';\nimport underlineIcon from '../assets/icons/underline.svg';\nimport videoIcon from '../assets/icons/video.svg';\n\nexport default {\n  align: {\n    '': alignLeftIcon,\n    center: alignCenterIcon,\n    right: alignRightIcon,\n    justify: alignJustifyIcon,\n  },\n  background: backgroundIcon,\n  blockquote: blockquoteIcon,\n  bold: boldIcon,\n  clean: cleanIcon,\n  code: codeIcon,\n  'code-block': codeIcon,\n  color: colorIcon,\n  direction: {\n    '': directionLeftToRightIcon,\n    rtl: directionRightToLeftIcon,\n  },\n  formula: formulaIcon,\n  header: {\n    '1': headerIcon,\n    '2': header2Icon,\n    '3': header3Icon,\n    '4': header4Icon,\n    '5': header5Icon,\n    '6': header6Icon,\n  },\n  italic: italicIcon,\n  image: imageIcon,\n  indent: {\n    '+1': indentIcon,\n    '-1': outdentIcon,\n  },\n  link: linkIcon,\n  list: {\n    bullet: listBulletIcon,\n    check: listCheckIcon,\n    ordered: listOrderedIcon,\n  },\n  script: {\n    sub: subscriptIcon,\n    super: superscriptIcon,\n  },\n  strike: strikeIcon,\n  table: tableIcon,\n  underline: underlineIcon,\n  video: videoIcon,\n};\n","import DropdownIcon from '../assets/icons/dropdown.svg';\n\nlet optionsCounter = 0;\n\nfunction toggleAriaAttribute(element: HTMLElement, attribute: string) {\n  element.setAttribute(\n    attribute,\n    `${!(element.getAttribute(attribute) === 'true')}`,\n  );\n}\n\nclass Picker {\n  select: HTMLSelectElement;\n  container: HTMLElement;\n  label: HTMLElement;\n\n  constructor(select: HTMLSelectElement) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    // @ts-expect-error Fix me later\n    this.select.parentNode.insertBefore(this.container, this.select);\n\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', (event) => {\n      switch (event.key) {\n        case 'Enter':\n          this.togglePicker();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded');\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    // @ts-expect-error\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n\n  buildItem(option: HTMLOptionElement) {\n    const item = document.createElement('span');\n    // @ts-expect-error\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n    item.classList.add('ql-picker-item');\n    const value = option.getAttribute('value');\n    if (value) {\n      item.setAttribute('data-value', value);\n    }\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', (event) => {\n      switch (event.key) {\n        case 'Enter':\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n\n    return item;\n  }\n\n  buildLabel() {\n    const label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = DropdownIcon;\n    // @ts-expect-error\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n\n  buildOptions() {\n    const options = document.createElement('span');\n    options.classList.add('ql-picker-options');\n\n    // Don't want screen readers to read this until options are visible\n    options.setAttribute('aria-hidden', 'true');\n    // @ts-expect-error\n    options.tabIndex = '-1';\n\n    // Need a unique id for aria-controls\n    options.id = `ql-picker-options-${optionsCounter}`;\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n\n    // @ts-expect-error\n    this.options = options;\n\n    Array.from(this.select.options).forEach((option) => {\n      const item = this.buildItem(option);\n      options.appendChild(item);\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n\n  buildPicker() {\n    Array.from(this.select.attributes).forEach((item) => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close();\n    // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n    setTimeout(() => this.label.focus(), 1);\n  }\n\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    // @ts-expect-error\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n\n  selectItem(item: HTMLElement | null, trigger = false) {\n    const selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    // @ts-expect-error Fix me later\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(\n      item,\n    );\n    if (item.hasAttribute('data-value')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.close();\n    }\n  }\n\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      const item =\n        // @ts-expect-error Fix me later\n        this.container.querySelector('.ql-picker-options').children[\n          this.select.selectedIndex\n        ];\n      option = this.select.options[this.select.selectedIndex];\n      // @ts-expect-error\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    const isActive =\n      option != null &&\n      option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n}\n\nexport default Picker;\n","import Picker from './picker.js';\n\nclass ColorPicker extends Picker {\n  constructor(select: HTMLSelectElement, label: string) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item'))\n      .slice(0, 7)\n      .forEach((item) => {\n        item.classList.add('ql-primary');\n      });\n  }\n\n  buildItem(option: HTMLOptionElement) {\n    const item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n\n  selectItem(item: HTMLElement | null, trigger?: boolean) {\n    super.selectItem(item, trigger);\n    const colorLabel = this.label.querySelector<HTMLElement>('.ql-color-label');\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n}\n\nexport default ColorPicker;\n","import Picker from './picker.js';\n\nclass IconPicker extends Picker {\n  defaultItem: HTMLElement | null;\n\n  constructor(select: HTMLSelectElement, icons: Record<string, string>) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(\n      (item) => {\n        item.innerHTML = icons[item.getAttribute('data-value') || ''];\n      },\n    );\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n\n  selectItem(target: HTMLElement | null, trigger?: boolean) {\n    super.selectItem(target, trigger);\n    const item = target || this.defaultItem;\n    if (item != null) {\n      if (this.label.innerHTML === item.innerHTML) return;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }\n}\n\nexport default IconPicker;\n","import type Quill from '../core.js';\nimport type { Bounds } from '../core/selection.js';\n\nconst isScrollable = (el: Element) => {\n  const { overflowY } = getComputedStyle(el, null);\n  return overflowY !== 'visible' && overflowY !== 'clip';\n};\n\nclass Tooltip {\n  quill: Quill;\n  boundsContainer: HTMLElement;\n  root: HTMLDivElement;\n\n  constructor(quill: Quill, boundsContainer?: HTMLElement) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    // @ts-expect-error\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (isScrollable(this.quill.root)) {\n      this.quill.root.addEventListener('scroll', () => {\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\n      });\n    }\n    this.hide();\n  }\n\n  hide() {\n    this.root.classList.add('ql-hidden');\n  }\n\n  position(reference: Bounds) {\n    const left =\n      reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n    // root.scrollTop should be 0 if scrollContainer !== root\n    const top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = `${left}px`;\n    this.root.style.top = `${top}px`;\n    this.root.classList.remove('ql-flip');\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\n    const rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.bottom > containerBounds.bottom) {\n      const height = rootBounds.bottom - rootBounds.top;\n      const verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = `${top - verticalShift}px`;\n      this.root.classList.add('ql-flip');\n    }\n    return shift;\n  }\n\n  show() {\n    this.root.classList.remove('ql-editing');\n    this.root.classList.remove('ql-hidden');\n  }\n}\n\nexport default Tooltip;\n","import { merge } from 'lodash-es';\nimport type Quill from '../core/quill.js';\nimport Emitter from '../core/emitter.js';\nimport Theme from '../core/theme.js';\nimport type { ThemeOptions } from '../core/theme.js';\nimport ColorPicker from '../ui/color-picker.js';\nimport IconPicker from '../ui/icon-picker.js';\nimport Picker from '../ui/picker.js';\nimport Tooltip from '../ui/tooltip.js';\nimport type { Range } from '../core/selection.js';\nimport type Clipboard from '../modules/clipboard.js';\nimport type History from '../modules/history.js';\nimport type Keyboard from '../modules/keyboard.js';\nimport type Uploader from '../modules/uploader.js';\nimport type Selection from '../core/selection.js';\n\nconst ALIGNS = [false, 'center', 'right', 'justify'];\n\nconst COLORS = [\n  '#000000',\n  '#e60000',\n  '#ff9900',\n  '#ffff00',\n  '#008a00',\n  '#0066cc',\n  '#9933ff',\n  '#ffffff',\n  '#facccc',\n  '#ffebcc',\n  '#ffffcc',\n  '#cce8cc',\n  '#cce0f5',\n  '#ebd6ff',\n  '#bbbbbb',\n  '#f06666',\n  '#ffc266',\n  '#ffff66',\n  '#66b966',\n  '#66a3e0',\n  '#c285ff',\n  '#888888',\n  '#a10000',\n  '#b26b00',\n  '#b2b200',\n  '#006100',\n  '#0047b2',\n  '#6b24b2',\n  '#444444',\n  '#5c0000',\n  '#663d00',\n  '#666600',\n  '#003700',\n  '#002966',\n  '#3d1466',\n];\n\nconst FONTS = [false, 'serif', 'monospace'];\n\nconst HEADERS = ['1', '2', '3', false];\n\nconst SIZES = ['small', false, 'large', 'huge'];\n\nclass BaseTheme extends Theme {\n  pickers: Picker[];\n  tooltip?: Tooltip;\n\n  constructor(quill: Quill, options: ThemeOptions) {\n    super(quill, options);\n    const listener = (e: MouseEvent) => {\n      if (!document.body.contains(quill.root)) {\n        document.body.removeEventListener('click', listener);\n        return;\n      }\n      if (\n        this.tooltip != null &&\n        // @ts-expect-error\n        !this.tooltip.root.contains(e.target) &&\n        // @ts-expect-error\n        document.activeElement !== this.tooltip.textbox &&\n        !this.quill.hasFocus()\n      ) {\n        this.tooltip.hide();\n      }\n      if (this.pickers != null) {\n        this.pickers.forEach((picker) => {\n          // @ts-expect-error\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n\n  addModule(name: 'clipboard'): Clipboard;\n  addModule(name: 'keyboard'): Keyboard;\n  addModule(name: 'uploader'): Uploader;\n  addModule(name: 'history'): History;\n  addModule(name: 'selection'): Selection;\n  addModule(name: string): unknown;\n  addModule(name: string) {\n    const module = super.addModule(name);\n    if (name === 'toolbar') {\n      // @ts-expect-error\n      this.extendToolbar(module);\n    }\n    return module;\n  }\n\n  buildButtons(\n    buttons: NodeListOf<HTMLElement>,\n    icons: Record<string, Record<string, string> | string>,\n  ) {\n    Array.from(buttons).forEach((button) => {\n      const className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach((name) => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n        if (name === 'direction') {\n          // @ts-expect-error\n          button.innerHTML = icons[name][''] + icons[name].rtl;\n        } else if (typeof icons[name] === 'string') {\n          // @ts-expect-error\n          button.innerHTML = icons[name];\n        } else {\n          // @ts-expect-error\n          const value = button.value || '';\n          // @ts-expect-error\n          if (value != null && icons[name][value]) {\n            // @ts-expect-error\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n\n  buildPickers(\n    selects: NodeListOf<HTMLSelectElement>,\n    icons: Record<string, string | Record<string, string>>,\n  ) {\n    this.pickers = Array.from(selects).map((select) => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n        if (typeof icons.align === 'object') {\n          return new IconPicker(select, icons.align);\n        }\n      }\n      if (\n        select.classList.contains('ql-background') ||\n        select.classList.contains('ql-color')\n      ) {\n        const format = select.classList.contains('ql-background')\n          ? 'background'\n          : 'color';\n        if (select.querySelector('option') == null) {\n          fillSelect(\n            select,\n            COLORS,\n            format === 'background' ? '#ffffff' : '#000000',\n          );\n        }\n        return new ColorPicker(select, icons[format] as string);\n      }\n      if (select.querySelector('option') == null) {\n        if (select.classList.contains('ql-font')) {\n          fillSelect(select, FONTS);\n        } else if (select.classList.contains('ql-header')) {\n          fillSelect(select, HEADERS);\n        } else if (select.classList.contains('ql-size')) {\n          fillSelect(select, SIZES);\n        }\n      }\n      return new Picker(select);\n    });\n    const update = () => {\n      this.pickers.forEach((picker) => {\n        picker.update();\n      });\n    };\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\n  }\n}\nBaseTheme.DEFAULTS = merge({}, Theme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image() {\n          let fileInput = this.container.querySelector(\n            'input.ql-image[type=file]',\n          );\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute(\n              'accept',\n              this.quill.uploader.options.mimetypes.join(', '),\n            );\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              const range = this.quill.getSelection(true);\n              this.quill.uploader.upload(range, fileInput.files);\n              fileInput.value = '';\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video() {\n          this.quill.theme.tooltip.edit('video');\n        },\n      },\n    },\n  },\n});\n\nclass BaseTooltip extends Tooltip {\n  textbox: HTMLInputElement | null;\n  linkRange?: Range;\n\n  constructor(quill: Quill, boundsContainer?: HTMLElement) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n\n  listen() {\n    // @ts-expect-error Fix me later\n    this.textbox.addEventListener('keydown', (event) => {\n      if (event.key === 'Enter') {\n        this.save();\n        event.preventDefault();\n      } else if (event.key === 'Escape') {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n\n  cancel() {\n    this.hide();\n    this.restoreFocus();\n  }\n\n  edit(mode = 'link', preview: string | null = null) {\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n    if (this.textbox == null) return;\n\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n    const bounds = this.quill.getBounds(this.quill.selection.savedRange);\n    if (bounds != null) {\n      this.position(bounds);\n    }\n    this.textbox.select();\n    this.textbox.setAttribute(\n      'placeholder',\n      this.textbox.getAttribute(`data-${mode}`) || '',\n    );\n    this.root.setAttribute('data-mode', mode);\n  }\n\n  restoreFocus() {\n    this.quill.focus({ preventScroll: true });\n  }\n\n  save() {\n    // @ts-expect-error Fix me later\n    let { value } = this.textbox;\n    switch (this.root.getAttribute('data-mode')) {\n      case 'link': {\n        const { scrollTop } = this.quill.root;\n        if (this.linkRange) {\n          this.quill.formatText(\n            this.linkRange,\n            'link',\n            value,\n            Emitter.sources.USER,\n          );\n          delete this.linkRange;\n        } else {\n          this.restoreFocus();\n          this.quill.format('link', value, Emitter.sources.USER);\n        }\n        this.quill.root.scrollTop = scrollTop;\n        break;\n      }\n      case 'video': {\n        value = extractVideoUrl(value);\n      } // eslint-disable-next-line no-fallthrough\n      case 'formula': {\n        if (!value) break;\n        const range = this.quill.getSelection(true);\n        if (range != null) {\n          const index = range.index + range.length;\n          this.quill.insertEmbed(\n            index,\n            // @ts-expect-error Fix me later\n            this.root.getAttribute('data-mode'),\n            value,\n            Emitter.sources.USER,\n          );\n          if (this.root.getAttribute('data-mode') === 'formula') {\n            this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\n          }\n          this.quill.setSelection(index + 2, Emitter.sources.USER);\n        }\n        break;\n      }\n      default:\n    }\n    // @ts-expect-error Fix me later\n    this.textbox.value = '';\n    this.hide();\n  }\n}\n\nfunction extractVideoUrl(url: string) {\n  let match =\n    url.match(\n      /^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/,\n    ) ||\n    url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return `${match[1] || 'https'}://www.youtube.com/embed/${\n      match[2]\n    }?showinfo=0`;\n  }\n  // eslint-disable-next-line no-cond-assign\n  if ((match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/))) {\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\n  }\n  return url;\n}\n\nfunction fillSelect(\n  select: HTMLSelectElement,\n  values: Array<string | boolean>,\n  defaultValue: unknown = false,\n) {\n  values.forEach((value) => {\n    const option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', String(value));\n    }\n    select.appendChild(option);\n  });\n}\n\nexport { BaseTooltip, BaseTheme as default };\n","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport { Range } from '../core/selection.js';\nimport type { Bounds } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nimport type { ThemeOptions } from '../core/theme.js';\nimport type Toolbar from '../modules/toolbar.js';\nimport type { ToolbarConfig } from '../modules/toolbar.js';\n\nconst TOOLBAR_CONFIG: ToolbarConfig = [\n  ['bold', 'italic', 'link'],\n  [{ header: 1 }, { header: 2 }, 'blockquote'],\n];\n\nclass BubbleTooltip extends BaseTooltip {\n  static TEMPLATE = [\n    '<span class=\"ql-tooltip-arrow\"></span>',\n    '<div class=\"ql-tooltip-editor\">',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-close\"></a>',\n    '</div>',\n  ].join('');\n\n  constructor(quill: Quill, bounds?: HTMLElement) {\n    super(quill, bounds);\n    this.quill.on(\n      Emitter.events.EDITOR_CHANGE,\n      (type, range, oldRange, source) => {\n        if (type !== Emitter.events.SELECTION_CHANGE) return;\n        if (\n          range != null &&\n          range.length > 0 &&\n          source === Emitter.sources.USER\n        ) {\n          this.show();\n          // Lock our width so we will expand beyond our offsetParent boundaries\n          this.root.style.left = '0px';\n          this.root.style.width = '';\n          this.root.style.width = `${this.root.offsetWidth}px`;\n          const lines = this.quill.getLines(range.index, range.length);\n          if (lines.length === 1) {\n            const bounds = this.quill.getBounds(range);\n            if (bounds != null) {\n              this.position(bounds);\n            }\n          } else {\n            const lastLine = lines[lines.length - 1];\n            const index = this.quill.getIndex(lastLine);\n            const length = Math.min(\n              lastLine.length() - 1,\n              range.index + range.length - index,\n            );\n            const indexBounds = this.quill.getBounds(new Range(index, length));\n            if (indexBounds != null) {\n              this.position(indexBounds);\n            }\n          }\n        } else if (\n          document.activeElement !== this.textbox &&\n          this.quill.hasFocus()\n        ) {\n          this.hide();\n        }\n      },\n    );\n  }\n\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        const range = this.quill.getSelection();\n        if (range != null) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        }\n      }, 1);\n    });\n  }\n\n  cancel() {\n    this.show();\n  }\n\n  position(reference: Bounds) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\n    // @ts-expect-error\n    arrow.style.marginLeft = '';\n    if (shift !== 0) {\n      // @ts-expect-error\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\n    }\n    return shift;\n  }\n}\n\nclass BubbleTheme extends BaseTheme {\n  tooltip: BubbleTooltip;\n\n  constructor(quill: Quill, options: ThemeOptions) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n\n  extendToolbar(toolbar: Toolbar) {\n    // @ts-expect-error\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    if (toolbar.container != null) {\n      this.tooltip.root.appendChild<HTMLElement>(toolbar.container);\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n    }\n  }\n}\nBubbleTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value: string) {\n          if (!value) {\n            this.quill.format('link', false, Quill.sources.USER);\n          } else {\n            // @ts-expect-error\n            this.quill.theme.tooltip.edit();\n          }\n        },\n      },\n    },\n  },\n} satisfies ThemeOptions);\n\nexport { BubbleTooltip, BubbleTheme as default };\n","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport LinkBlot from '../formats/link.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nimport Quill from '../core/quill.js';\nimport type { Context } from '../modules/keyboard.js';\nimport type Toolbar from '../modules/toolbar.js';\nimport type { ToolbarConfig } from '../modules/toolbar.js';\nimport type { ThemeOptions } from '../core/theme.js';\n\nconst TOOLBAR_CONFIG: ToolbarConfig = [\n  [{ header: ['1', '2', '3', false] }],\n  ['bold', 'italic', 'underline', 'link'],\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  ['clean'],\n];\n\nclass SnowTooltip extends BaseTooltip {\n  static TEMPLATE = [\n    '<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>',\n    '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n    '<a class=\"ql-action\"></a>',\n    '<a class=\"ql-remove\"></a>',\n  ].join('');\n\n  preview = this.root.querySelector('a.ql-preview');\n\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root\n      .querySelector('a.ql-action')\n      .addEventListener('click', (event) => {\n        if (this.root.classList.contains('ql-editing')) {\n          this.save();\n        } else {\n          // @ts-expect-error Fix me later\n          this.edit('link', this.preview.textContent);\n        }\n        event.preventDefault();\n      });\n    // @ts-expect-error Fix me later\n    this.root\n      .querySelector('a.ql-remove')\n      .addEventListener('click', (event) => {\n        if (this.linkRange != null) {\n          const range = this.linkRange;\n          this.restoreFocus();\n          this.quill.formatText(range, 'link', false, Emitter.sources.USER);\n          delete this.linkRange;\n        }\n        event.preventDefault();\n        this.hide();\n      });\n    this.quill.on(\n      Emitter.events.SELECTION_CHANGE,\n      (range, oldRange, source) => {\n        if (range == null) return;\n        if (range.length === 0 && source === Emitter.sources.USER) {\n          const [link, offset] = this.quill.scroll.descendant(\n            LinkBlot,\n            range.index,\n          );\n          if (link != null) {\n            this.linkRange = new Range(range.index - offset, link.length());\n            const preview = LinkBlot.formats(link.domNode);\n            // @ts-expect-error Fix me later\n            this.preview.textContent = preview;\n            // @ts-expect-error Fix me later\n            this.preview.setAttribute('href', preview);\n            this.show();\n            const bounds = this.quill.getBounds(this.linkRange);\n            if (bounds != null) {\n              this.position(bounds);\n            }\n            return;\n          }\n        } else {\n          delete this.linkRange;\n        }\n        this.hide();\n      },\n    );\n  }\n\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n}\n\nclass SnowTheme extends BaseTheme {\n  constructor(quill: Quill, options: ThemeOptions) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n\n  extendToolbar(toolbar: Toolbar) {\n    if (toolbar.container != null) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n      // @ts-expect-error\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding(\n          { key: 'k', shortKey: true },\n          (_range: Range, context: Context) => {\n            toolbar.handlers.link.call(toolbar, !context.format.link);\n          },\n        );\n      }\n    }\n  }\n}\nSnowTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value: string) {\n          if (value) {\n            const range = this.quill.getSelection();\n            if (range == null || range.length === 0) return;\n            let preview = this.quill.getText(range);\n            if (\n              /^\\S+@\\S+\\.\\S+$/.test(preview) &&\n              preview.indexOf('mailto:') !== 0\n            ) {\n              preview = `mailto:${preview}`;\n            }\n            // @ts-expect-error\n            const { tooltip } = this.quill.theme;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false, Quill.sources.USER);\n          }\n        },\n      },\n    },\n  },\n} satisfies ThemeOptions);\n\nexport default SnowTheme;\n","import Quill from './core.js';\nimport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n} from './core.js';\n\nimport { AlignClass, AlignStyle } from './formats/align.js';\nimport {\n  DirectionAttribute,\n  DirectionClass,\n  DirectionStyle,\n} from './formats/direction.js';\nimport Indent from './formats/indent.js';\n\nimport Blockquote from './formats/blockquote.js';\nimport Header from './formats/header.js';\nimport List from './formats/list.js';\n\nimport { BackgroundClass, BackgroundStyle } from './formats/background.js';\nimport { ColorClass, ColorStyle } from './formats/color.js';\nimport { FontClass, FontStyle } from './formats/font.js';\nimport { SizeClass, SizeStyle } from './formats/size.js';\n\nimport Bold from './formats/bold.js';\nimport Italic from './formats/italic.js';\nimport Link from './formats/link.js';\nimport Script from './formats/script.js';\nimport Strike from './formats/strike.js';\nimport Underline from './formats/underline.js';\n\nimport Formula from './formats/formula.js';\nimport Image from './formats/image.js';\nimport Video from './formats/video.js';\n\nimport CodeBlock, { Code as InlineCode } from './formats/code.js';\n\nimport Syntax from './modules/syntax.js';\nimport Table from './modules/table.js';\nimport Toolbar from './modules/toolbar.js';\n\nimport Icons from './ui/icons.js';\nimport Picker from './ui/picker.js';\nimport ColorPicker from './ui/color-picker.js';\nimport IconPicker from './ui/icon-picker.js';\nimport Tooltip from './ui/tooltip.js';\n\nimport BubbleTheme from './themes/bubble.js';\nimport SnowTheme from './themes/snow.js';\n\nQuill.register(\n  {\n    'attributors/attribute/direction': DirectionAttribute,\n\n    'attributors/class/align': AlignClass,\n    'attributors/class/background': BackgroundClass,\n    'attributors/class/color': ColorClass,\n    'attributors/class/direction': DirectionClass,\n    'attributors/class/font': FontClass,\n    'attributors/class/size': SizeClass,\n\n    'attributors/style/align': AlignStyle,\n    'attributors/style/background': BackgroundStyle,\n    'attributors/style/color': ColorStyle,\n    'attributors/style/direction': DirectionStyle,\n    'attributors/style/font': FontStyle,\n    'attributors/style/size': SizeStyle,\n  },\n  true,\n);\n\nQuill.register(\n  {\n    'formats/align': AlignClass,\n    'formats/direction': DirectionClass,\n    'formats/indent': Indent,\n\n    'formats/background': BackgroundStyle,\n    'formats/color': ColorStyle,\n    'formats/font': FontClass,\n    'formats/size': SizeClass,\n\n    'formats/blockquote': Blockquote,\n    'formats/code-block': CodeBlock,\n    'formats/header': Header,\n    'formats/list': List,\n\n    'formats/bold': Bold,\n    'formats/code': InlineCode,\n    'formats/italic': Italic,\n    'formats/link': Link,\n    'formats/script': Script,\n    'formats/strike': Strike,\n    'formats/underline': Underline,\n\n    'formats/formula': Formula,\n    'formats/image': Image,\n    'formats/video': Video,\n\n    'modules/syntax': Syntax,\n    'modules/table': Table,\n    'modules/toolbar': Toolbar,\n\n    'themes/bubble': BubbleTheme,\n    'themes/snow': SnowTheme,\n\n    'ui/icons': Icons,\n    'ui/picker': Picker,\n    'ui/icon-picker': IconPicker,\n    'ui/color-picker': ColorPicker,\n    'ui/tooltip': Tooltip,\n  },\n  true,\n);\n\nexport {\n  AttributeMap,\n  Delta,\n  Module,\n  Op,\n  OpIterator,\n  Parchment,\n  Range,\n} from './core.js';\nexport type {\n  Bounds,\n  DebugLevel,\n  EmitterSource,\n  ExpandedQuillOptions,\n  QuillOptions,\n};\n\nexport default Quill;\n","// @ts-nocheck\nimport ExtensionPage, {ExtensionPageAttrs} from \"flarum/admin/components/ExtensionPage\";\nimport Mithril from \"mithril\";\nimport app from 'flarum/admin/app'\nimport Quill from 'quill';\n\nexport default class SendEmailPage extends ExtensionPage {\n  oninit(vnode: Mithril.Vnode<ExtensionPageAttrs, this>) {\n    super.oninit(vnode);\n    this.loading = false\n    this.getLastNewsletterDetails()\n    this.getTotalSubscribers()\n    this.lastNewsletterdetail = null\n    this.totalSubscribers = 0;\n    this.toolbarOptions = [\n      [{ font: [] }],\n      [{ header: [1, 2, 3] }],\n      [\"bold\", \"italic\", \"underline\", \"strike\"],\n      [{ color: [] }, { background: [] }],\n      [{ list: \"ordered\" }, { list: \"bullet\" }, { list: \"check\" }],\n      [\"blockquote\", \"code-block\"],\n      [\"link\"],\n      [{ align: [] }],\n    ];\n    console.log(this.lastNewsletterdetail)\n  }\n\n  oncreate(vnode: Mithril.VnodeDOM<ExtensionPageAttrs, this>) {\n    super.oncreate(vnode);\n\n\n    this.quill = new Quill(\"#editor-container\", {\n      theme: \"snow\",\n      modules: {\n        toolbar: this.toolbarOptions,\n      },\n    });\n\n    this.quill.on(\"text-change\", () => {\n      this.body = this.quill.getSemanticHTML();\n      m.redraw();\n    });\n  }\n\n  content(vnode: Mithril.VnodeDOM<ExtensionPageAttrs, this>): JSX.Element {\n    return (\n      <div className=\"container\">\n        <div className='newsletter-stats-container'>\n          <div className='newsletter-stats-card'>\n            <h3>{app.translator.trans('justoverclock-newsletter.admin.totalSubscribers')}</h3>\n            <small>{app.translator.trans('justoverclock-newsletter.admin.totalSubscribersCount')}</small>\n            <h2 className='stats-number'>{this.totalSubscribers}</h2>\n            <p>\n              {app.translator.trans('justoverclock-newsletter.admin.newsletterCountText')}\n            </p>\n          </div>\n          <div className='newsletter-stats-card'>\n            <h3>{app.translator.trans('justoverclock-newsletter.admin.lastNewsletterSent')}</h3>\n            <small>{app.translator.trans('justoverclock-newsletter.admin.lastNewsletterSentDescription')}</small>\n            <h2 className='stats-number'>\n              {this.lastNewsletterdetail\n                ? this.lastNewsletterdetail.attributes.title\n                : app.translator.trans('justoverclock-newsletter.admin.noNewsletterSent')}\n            </h2>\n            {this.lastNewsletterdetail\n              ? `${app.translator.trans('justoverclock-newsletter.admin.lastNewsletterSentText')} ${new Date(this.lastNewsletterdetail.attributes.createdAt).toISOString().slice(0,16)}`\n              : app.translator.trans('justoverclock-newsletter.admin.noNewsletterSent')}\n          </div>\n        </div>\n        <div className=\"Form-group\">\n          <label>{app.translator.trans('justoverclock-newsletter.admin.emailTitle')}</label>\n          <input\n            className=\"FormControl\"\n            type=\"text\"\n            placeholder=\"newsletter title\"\n            oninput={(e: { target: { value: any; }; }) => (this.subject = e.target.value)}\n          />\n        </div>\n        <div className=\"Form-group\">\n          <label>{app.translator.trans('justoverclock-newsletter.admin.textOrHtml')}</label>\n          <div className='editor-container FormControl' id='editor-container'></div>\n        </div>\n        <button\n          className=\"Button Button--primary\"\n          onclick={this.sendEmail.bind(this)}\n          disabled={!this.subject || !this.body}\n        >\n          {this.loading ? `${app.translator.trans('justoverclock-newsletter.admin.sendingText')}` : `${app.translator.trans('justoverclock-newsletter.admin.sendEmailButtonText')}`}\n        </button>\n      </div>\n    )\n  }\n\n  getTotalSubscribers() {\n    app.request({\n      method: 'GET',\n      url: app.forum.attribute('apiUrl') + '/newsletter/subscribers',\n    }).then(data => {\n      this.totalSubscribers = data.data.length\n      m.redraw()\n    })\n  }\n\n  getLastNewsletterDetails() {\n    app.request({\n      method: 'GET',\n      url: app.forum.attribute('apiUrl') + '/last-newsletter/get',\n    }).then(data => {\n      this.lastNewsletterdetail = data.data.length > 0 ? data.data[0] : null;\n      console.log(data.data)\n      m.redraw()\n    })\n  }\n\n  sendEmail() {\n    this.loading = true\n    this.body = this.quill.getSemanticHTML();\n    app.request({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/newsletter/sendall',\n      body: {\n        email: this.email,\n        subject: this.subject,\n        body: this.body,\n        html: this.html,\n      },\n    })\n      .then(() => {\n        this.loading = false\n        app.alerts.show({type: 'success'}, `${app.translator.trans('justoverclock-newsletter.admin.emailSentSuccessMessage')}`);\n      })\n      .catch(() => {\n        app.alerts.show({type: 'error'}, `${app.translator.trans('justoverclock-newsletter.admin.emailSentErrorMessage')}`);\n      });\n  }\n}\n","import app from 'flarum/admin/app';\nimport SendEmailPage from \"./components/SendEmailPage\";\n\napp.initializers.add('justoverclock/newsletter', () => {\n  app\n    .extensionData\n    .for('justoverclock-newsletter')\n    .registerPage(SendEmailPage)\n});\n"],"names":["has","Object","prototype","hasOwnProperty","prefix","Events","EE","fn","context","once","this","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","create","__proto__","eventNames","events","name","names","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","undefined","apply","j","on","removeAllListeners","off","prefixed","module","exports","DIFF_DELETE","diff_main","text1","text2","cursor_pos","cleanup","_fix_unicode","editdiff","oldText","newText","oldRange","index","newRange","oldLength","newLength","oldCursor","oldBefore","oldAfter","maybeNewCursor","newCursor","newBefore","newAfter","prefixLength","Math","min","oldPrefix","newPrefix","make_edit_splice","cursor","suffixLength","oldSuffix","newSuffix","find_cursor_edit_diff","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","longtext","shorttext","indexOf","hm","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","floor","best_common","text1_a","text1_b","text2_a","text2_b","hm1","ceil","hm2","diff_halfMatch_","mid_common","diffs_a","diffs_b","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","x","delta","front","k1start","k1end","k2start","k2end","d","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","diff_bisect_","diff_compute_","unshift","diff_cleanupMerge","changes","equalities","equalitiesLength","lastequality","pointer","length_insertions1","length_deletions1","length_insertions2","length_deletions2","max","splice","diff_cleanupSemanticScore_","one","two","char1","char2","nonAlphaNumeric1","match","nonAlphaNumericRegex_","nonAlphaNumeric2","whitespace1","whitespaceRegex_","whitespace2","lineBreak1","linebreakRegex_","lineBreak2","blankLine1","blanklineEndRegex_","blankLine2","blanklineStartRegex_","equality1","edit","equality2","commonOffset","commonString","bestEquality1","bestEdit","bestEquality2","bestScore","score","diff_cleanupSemanticLossless","deletion","insertion","overlap_length1","diff_commonOverlap_","overlap_length2","diff_cleanupSemantic","y","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","pointermid","pointerstart","is_surrogate_pair_start","charCodeAt","text_length","best","pattern","found","pointerend","is_surrogate_pair_end","fix_unicode","count_delete","count_insert","text_delete","text_insert","previous_equality","ends_with_pair_start","stray","k","starts_with_pair_end","n","pop","charCode","str","before","oldMiddle","newMiddle","after","tuples","ret","remove_empty_tuples","diff","INSERT","DELETE","EQUAL","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","boolTag","dateTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","global","freeSelf","self","root","Function","freeExports","nodeType","freeModule","moduleExports","addMapEntry","map","pair","set","addSetEntry","value","add","arrayReduce","array","iteratee","accumulator","initAccum","isHostObject","result","toString","e","mapToArray","size","forEach","key","overArg","func","transform","arg","setToArray","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","exec","keys","IE_PROTO","funcToString","objectToString","reIsNative","RegExp","replace","Buffer","Symbol","Uint8Array","getPrototype","getPrototypeOf","objectCreate","propertyIsEnumerable","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeKeys","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","entries","clear","entry","ListCache","MapCache","Stack","__data__","assignValue","object","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","stack","isObject","isArr","isArray","constructor","input","initCloneArray","source","copyArray","tag","getTag","isFunc","buffer","copy","cloneBuffer","isPrototype","proto","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","symbol","Ctor","cloneArrayBuffer","dataView","byteOffset","byteLength","cloneDataView","typedArray","cloneTypedArray","cloneMap","regexp","lastIndex","cloneRegExp","cloneSet","initCloneByTag","stacked","get","props","keysFunc","symbolsFunc","values","offset","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","arrayBuffer","newValue","getMapData","type","data","getValue","isFunction","test","baseIsNative","cache","pairs","LARGE_ARRAY_SIZE","isIndex","other","ArrayBuffer","resolve","ctorString","isArrayLike","isLength","inherited","isObjectLike","isArrayLikeObject","isArguments","baseTimes","String","skipIndexes","arrayLikeKeys","baseKeys","arrayTag","errorTag","typedArrayTags","freeProcess","process","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","predicate","nativeObjectToString","symToStringTag","toStringTag","SetCache","baseGetTag","isOwn","unmasked","getRawTag","baseIsArguments","baseIsEqual","bitmask","equalFunc","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","message","convert","isPartial","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","objLength","skipCtor","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","arrLength","othLength","seen","arrValue","othIndex","isMasked","resIndex","arrayFilter","baseUnary","isArg","isBuff","isType","AttributeMap","cloneDeep","require","isEqual","compose","a","b","keepNull","attributes","reduce","attrs","invert","attr","base","baseInverted","memo","priority","AttributeMap_1","Op_1","OpIterator_1","NULL_CHARACTER","fromCharCode","getEmbedTypeAndData","Error","embedType","Delta","ops","registerEmbed","handler","unregisterEmbed","getHandler","_proto","insert","newOp","retain","lastOp","chop","filter","partition","passed","failed","op","initialValue","changeLength","elem","start","end","Infinity","iter","hasNext","nextOp","next","thisIter","otherIter","firstOther","peek","firstLeft","peekType","peekLength","thisOp","otherOp","_newOp$action","action","_getEmbedTypeAndData","thisData","otherData","rest","strings","join","retDelta","diffResult","component","opLength","eachLine","newline","line","inverted","baseIndex","baseOp","_inverted$retain","_getEmbedTypeAndData2","opData","baseOpData","transformPosition","transformedData","_transformedData","nextType","Op","OpIterator","Iterator","retOp","substr","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","id","loaded","__webpack_modules__","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","window","obj","prop","r","nmd","paths","children","flarum","core","compat","app","console","log","_setPrototypeOf","t","setPrototypeOf","bind","_inheritsLoose","_objectWithoutPropertiesLoose","includes","_extends","assign","baseAssignValue","iterable","allocUnsafe","baseCreate","objectCtorString","types","isNew","nativeKeysIn","isProto","baseKeysIn","srcIndex","mergeFunc","safeGet","srcValue","assignMergeValue","isCommon","isTyped","isPlainObject","keysIn","toPlainObject","baseMerge","baseFor","baseMergeDeep","nativeMax","string","identity","nativeNow","Date","now","baseSetToString","count","lastCalled","stamp","remaining","setToString","otherArgs","thisArg","overRest","assigner","baseRest","sources","guard","isIterateeCall","_assertThisInitialized","ReferenceError","_typeof","iterator","toPropertyKey","toPrimitive","_defineProperties","configurable","writable","_getPrototypeOf","_isNativeReflectConstruct","Boolean","Reflect","construct","_wrapNativeSuper","isNativeFunction","Wrapper","isNativeReflectConstruct","p","Scope","Scope2","TYPE","LEVEL","ATTRIBUTE","BLOT","INLINE","BLOCK","BLOCK_BLOT","INLINE_BLOT","BLOCK_ATTRIBUTE","INLINE_ATTRIBUTE","ANY","Attributor","attrName","keyName","options","attributeBit","scope","whitelist","node","from","item","canAdd","setAttribute","_node","remove","removeAttribute","getAttribute","ParchmentError","_Error","_this","_Registry","classes","tags","find","bubble","blots","parentNode","_unused","_proto2","scroll","match2","query","blotClass","Node","TEXT_NODE","blot","domNode","_this2","Text","text","block","inline","Element","split","some","tagName","register","_this3","_len","definitions","_key","isBlot","isAttr","blotName","className","toUpperCase","Registry","ClassAttributor$1","_Attributor","ClassAttributor","_proto3","classList","camelize","parts","part","StyleAttributor$1","_Attributor2","StyleAttributor","trim","_proto4","style","AttributorStore$1","AttributorStore","build","_proto5","attribute","_this4","styles","target","_this5","format","move","_this6","_this7","_ShadowBlot","prev","rawValue","parseInt","document","createElement","_proto6","attach","clone","cloneNode","detach","parent","removeChild","deleteAt","isolate","formatAt","wrap","statics","insertAt","def","ref","insertBefore","optimize","_context","requiredContainer","replaceWith","replacement","_force","update","_mutations","wrapper","appendChild","ShadowBlot","_LeafBlot","_ShadowBlot2","_domNode","_proto7","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","position","_inclusive","childNodes","_ref","LeafBlot$1","LinkedList","head","tail","_proto8","append","_len2","nodes","_key2","at","cur","contains","refNode","curNode","inclusive","callback","forEachAt","_this$find","startNode","curIndex","curLength","makeAttachedBlot","_unused2","child","replaceChild","_ParentBlot","_ShadowBlot3","_this8","uiNode","_proto9","attachUI","uiClass","firstChild","_this9","reverse","err","childLength","descendant","criteria","_this$children$find","descendants","Number","MAX_VALUE","lengthLeft","childIndex","enforceAllowedChildren","_this10","done","allowedChildren","splitAfter","unwrap","_this$children$find2","childBlot","refBlot","refDomNode","nextSibling","moveChildren","targetParent","defaultChild","path","_this$children$find3","force","_length","mutations","_this11","addedNodes","removedNodes","mutation","body","sort","DOCUMENT_POSITION_FOLLOWING","ParentBlot$1","_InlineBlot","_ParentBlot$","_this12","formats","toLowerCase","_proto10","_this13","obj1","obj2","_this14","InlineBlot$1","_BlockBlot","_ParentBlot$2","_this15","_proto11","_this16","BlockBlot$1","_ContainerBlot","_ParentBlot$3","_proto12","checkMerge","ContainerBlot$1","EmbedBlot$1","_LeafBlot$","EmbedBlot","_scroll","_proto13","OBSERVER_CONFIG","characterData","characterDataOldValue","childList","subtree","_ScrollBlot","_ParentBlot$4","registry","_this17","observer","MutationObserver","observe","_proto14","_this$registry","disconnect","_this18","mutationsMap","records","takeRecords","mark","markParent","previousSibling","grandChild","_this19","ScrollBlot$1","_TextBlot","_LeafBlot$2","_this20","createTextNode","_proto15","splitText","_this21","TextBlot$1","stubArray","getSymbolsIn","nodeIsMap","isMap","nodeIsSet","isSet","isFlat","copySymbolsIn","baseAssignIn","getAllKeysIn","CLONE_DEEP_FLAG","arrStacked","othStacked","objStacked","Break","_EmbedBlot","TextBlot","entityMap","escapeText","s","Inline","compare","selfIndex","order","otherIndex","InlineBlot","_Inline","Block","blockDelta","lines","shift","lineIndex","BlockBlot","BlockEmbed","blocks","LeafBlot","leaf","bubbleFormats","Cursor","selection","textNode","CONTENTS","savedLength","restore","composing","range","getNativeRange","lastChild","mergedTextBlot","prevTextBlot","prevTextLength","nextTextBlot","nextText","newTextNode","remapOffset","startOffset","endNode","endOffset","levels","level","debug","method","_console","namespace","ns","logger","newLevel","eventName","addEventListener","querySelectorAll","_quill$emitter","quill","instances","handleDOM","Emitter","_EventEmitter","domListeners","error","_debug$log","_EventEmitter$prototy","_len3","_key3","listenDOM","EDITOR_CHANGE","SCROLL_BEFORE_UPDATE","SCROLL_BLOT_MOUNT","SCROLL_BLOT_UNMOUNT","SCROLL_OPTIMIZE","SCROLL_UPDATE","SCROLL_EMBED_UPDATE","SELECTION_CHANGE","TEXT_CHANGE","COMPOSITION_BEFORE_START","COMPOSITION_START","COMPOSITION_BEFORE_END","COMPOSITION_END","API","SILENT","USER","Range","Selection","mouseDown","savedRange","lastRange","lastNative","handleComposition","handleDragging","setTimeout","hasFocus","native","setNativeRange","triggeredByTyping","ignored","_context$range","focus","preventScroll","setRange","nativeRange","collapsed","getBounds","scrollLength","_this$scroll$leaf","_leaf$position","createRange","setStart","_this$scroll$leaf3","_leaf$position2","setEnd","getBoundingClientRect","rect","side","bottom","top","height","left","right","width","getSelection","rangeCount","getRangeAt","normalizeNative","info","getRange","isConnected","normalized","normalizedToRange","activeElement","positions","indexes","startContainer","endContainer","rangeToNative","getPosition","_this5$scroll$leaf","leafOffset","removeAllRanges","addRange","blur","_this$getRange","_this$emitter","_this$emitter2","ASCII","convertListHTML","items","lastIndent","endTag","getListType","_items$","indent","_getListType2","convertHTML","previousType","isRoot","html","replaceAll","ParentBlot","list","_blot$domNode","outerHTML","innerHTML","_outerHTML$split","combineFormats","combined","merged","combinedValue","normalizeDelta","normalizedDelta","shiftRange","amount","Editor","getDelta","applyDelta","batchStart","deleteDelta","isImplicitNewlinePrepended","isImplicitNewlineAppended","endsWith","_this$scroll$line","merge","isInlineEmbed","_this$scroll$descenda","updateEmbedAt","prependedLength","addedLength","batchEnd","deleteText","formatLine","formatText","getContents","getFormat","leaves","_map","getHTML","_this$scroll$line2","lineOffset","lineLength","getText","insertContents","contents","change","insertEmbed","embed","_Delta$retain$insert","insertText","isBlank","removeFormat","_this$scroll$line3","suffix","selectionInfo","oldDelta","textBlot","oldValue","CursorBlot","relativeSelectionInfo","Module","DEFAULTS","GUARD_TEXT","Embed","contentNode","childNode","leftGuard","rightGuard","prevLength","Composition","isComposing","setupListeners","handleCompositionStart","queueMicrotask","handleCompositionEnd","Theme","modules","init","addModule","ModuleClass","_Theme","themes","default","getElementRect","element","scaleX","abs","offsetWidth","scaleY","offsetHeight","clientWidth","clientHeight","paddingValueToInt","number","isNaN","getScrollDistance","targetStart","targetEnd","scrollStart","scrollEnd","scrollPaddingStart","scrollPaddingEnd","CORE_FORMATS","globalRegistry","Parchment","Quill","container","expandConfig","addContainer","scrollBlotName","ScrollBlot","editor","composition","theme","keyboard","clipboard","history","uploader","toggle","modify","_Delta$retain$retain","setContents","placeholder","readOnly","disable","allowReadOnlyEdits","limit","imports","overwrite","warn","startsWith","_overload","overload","enable","editReadOnly","modifier","enabled","scrollSelectionIntoView","_this4$editor$formatL","_this4$editor$formatT","setSelection","_overload2","_overload3","bounds","containerBounds","getLength","_overload4","getIndex","getLeaf","getLine","getLines","getModule","getSemanticHTML","_overload5","_length2","_overload6","_overload7","isEnabled","_this$emitter3","_overload8","scrollRectIntoView","targetRect","ownerDocument","current","_window$visualViewpor","_window$visualViewpor2","_window$visualViewpor3","_window$visualViewpor4","isDocumentBody","bounding","visualViewport","documentElement","getComputedStyle","scrollDistanceX","scrollPaddingLeft","scrollPaddingRight","scrollDistanceY","scrollPaddingTop","scrollPaddingBottom","_document$defaultView","defaultView","scrollBy","_current","scrollLeft","scrollTop","scrolledLeft","scrolledTop","parentElement","getRootNode","host","scrollIntoView","delete1","applied","delete2","_overload9","setText","updateContents","resolveSelector","selector","querySelector","expandModuleConfig","config","expanded","_extends2","omitUndefinedValuesFromOptions","fromEntries","containerOrSelector","_Quill$DEFAULTS","quillModuleDefaults","quillDefaults","_excluded","_theme$DEFAULTS","themeModuleDefaults","themeDefaults","_excluded2","userModuleOptions","toolbar","sourceRegistry","coreBlot","iterations","_format$requiredConta","createRegistryWithFormats","modulesWithDefaults","_ref2","_extends3","moduleClass","_this$emitter4","_this$emitter5","lengthOrSource","pos","_map2","version","parchment","Container","ContainerBlot","isLine","isUpdatable","updateContent","Scroll","batch","handleDragStart","emitMount","emitUnmount","emitEmbedUpdate","_this$line","first","last","renderBlocks","deltaToRenderBlocks","_Delta$insert","shouldInsertNewlineChar","insertInlineContents","newlineCharLength","lineEndIndex","refBlotOffset","renderBlock","createBlock","blockEmbed","blotIndex","blotLength","preventDefault","currentBlockDelta","splitted","_op$attributes","_op$attributes2","_ref3","_ref4","inlineContents","AlignAttribute","AlignClass","AlignStyle","ColorAttributor","_StyleAttributor","ColorClass","ColorStyle","BackgroundClass","BackgroundStyle","CodeBlockContainer","_Container","code","innerText","CodeBlock","_Block","TAB","Code","DirectionAttribute","DirectionClass","DirectionStyle","FontClass","FontStyle","FontStyleAttributor","SizeClass","SizeStyle","SHORTKEY","navigator","platform","Keyboard","_Module","bindings","addBinding","shiftKey","handleEnter","metaKey","ctrlKey","altKey","userAgent","handleBackspace","handleDelete","handleDeleteRange","listen","which","keyBinding","shortKey","normalize","singleBinding","defaultPrevented","keyCode","matches","_this3$quill$getLine","_this3$quill$getLeaf","leafStart","offsetStart","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","every","curFormats","prevFormats","formatDelta","nextFormats","deleteRange","lineFormats","defaultOptions","bold","makeFormatHandler","italic","underline","outdent","makeCodeBlockHandler","tab","table","cutoff","_this$quill$getLine5","_this$quill$getLine6","header","row","cell","_module$getTable","getTable","blockquote","_this$quill$getLine7","_this$quill$getLine8","numLines","makeEmbedArrowHandler","makeTableArrowHandler","textContent","up","targetRow","targetCell","targetLine","firstFormats","lastFormats","normalWeightRegexp","blockTagNames","isBlockElement","ignoreRegexp","idRegexp","indentRegexp","NORMALIZERS","doc","msoList","others","_node$parentNode","listItems","idMatch","indentMatch","typeRegexp","typeMatch","parseListItem","parsed","_loop","_childListItems$","childListItems","_listItems$","nextElementSibling","ul","listItem","li","normalizeListItem","_node$getAttribute","fragment","createDocumentFragment","normalizeFontWeight","br","previousElementSibling","_br$parentNode","normalizeEmptyLines","CLIPBOARD_CONFIG","_node$parentElement3","isPre","isBetweenInlineElements","matchNewline","deltaEndsWith","ELEMENT_NODE","applyFormat","ATTRIBUTE_ATTRIBUTORS","STYLE_ATTRIBUTORS","newDelta","_style$fontWeight","fontStyle","textDecoration","strike","fontWeight","_ref5","parseFloat","textIndent","composed","checkedAttr","_node$parentElement","_node$parentElement2","createMatchAlias","Clipboard","_this$options$matcher","onCaptureCopy","onCapturePaste","matchers","matcher","addMatcher","normalizeHTML","normalizeExternalHTML","DOMParser","parseFromString","nodeMatches","_this$prepareMatching","prepareMatching","elementMatchers","textMatchers","traverse","dangerouslyPasteHTML","paste","_e$clipboardData","_e$clipboardData2","isCut","_this$onCopy","onCopy","clipboardData","setData","normalizeURIList","urlList","url","_e$clipboardData3","_e$clipboardData4","_e$clipboardData6","getData","_e$clipboardData5","files","upload","_doc$body$firstElemen","childElementCount","firstElementChild","onPaste","pastedDelta","_ref6","endText","preNodes","childrenDelta","reducedDelta","HTMLParagraphElement","History","lastRecorded","ignoreChange","undo","redo","currentRange","userOnly","record","transformRange","inputType","dest","inverseDelta","restoreSelection","changeDelta","undoDelta","undoRange","timestamp","delay","maxStack","transformStack","stackItem","deleteLength","changeIndex","endsWithNewlineChange","remoteDelta","oldItem","Uploader","caretRangeFromPoint","clientX","clientY","caretPositionFromPoint","offsetNode","_e$dataTransfer","dataTransfer","uploads","file","_this2$options$mimety","mimetypes","promises","reader","FileReader","onload","readAsDataURL","all","then","images","image","INSERT_TYPES","Input","handleBeforeInput","replaceText","staticRange","getTargetRanges","_event$dataTransfer","getPlainTextFromInputEvent","isMac","UINode","isListening","selectionChangeDeadline","handleArrowKeys","handleNavigationShortcuts","isRTL","canMoveCaretBeforeUINode","ensureListeningToSelectionChange","handleSelectionChange","setStartAfter","setEndAfter","IndentAttributor","_ClassAttributor","normalizedValue","Blockquote","Header","ListContainer","ListItem","ui","listEventHandler","Bold","Italic","_Bold","Link","sanitize","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","Script","Strike","Underline","Formula","_Embed","katex","render","throwOnError","errorColor","formula","ATTRIBUTES","Image","hasAttribute","Video","_BlockEmbed","video","TokenAttributor","CodeToken","SyntaxCodeBlock","_CodeBlock","SyntaxCodeBlockContainer","_CodeBlockContainer","forceNext","highlight","forced","language","cachedText","codeBlock","BreakBlot","Syntax","hljs","languages","highlightBlot","initListener","initTimer","select","label","option","timer","clearTimeout","interval","_delta$insert","lib","versionString","majorVersion","_Delta$retain","nodeText","_memo$insert","TableCell","tableId","cellOffset","rowOffset","TableRow","thisHead","thisTail","nextHead","nextTail","childFormats","TableBody","_Container2","TableContainer","_Container3","balanceCells","rows","maxColumns","fill","cells","column","deleteColumn","insertColumn","insertRow","random","Table","listenBalanceCells","balanceTables","_this$getTable","deleteRow","deleteTable","_this$quill$getLine","_this$getTable4","insertColumnLeft","insertColumnRight","_this$getTable5","insertRowAbove","insertRowBelow","insertTable","columns","old","Toolbar","_quill$container","groups","controls","group","control","addButton","addSelect","addControls","HTMLElement","_this$options$handler","addHandler","selectedIndex","selected","_Delta$retain$delete$","prompt","isActive","clean","direction","align","link","center","justify","background","codeIcon","color","rtl","bullet","check","ordered","script","sub","super","optionsCounter","toggleAriaAttribute","Picker","buildPicker","display","togglePicker","escape","buildItem","tabIndex","selectItem","buildLabel","buildOptions","close","trigger","dispatchEvent","Event","_Picker","ColorPicker","backgroundColor","colorLabel","stroke","IconPicker","icons","defaultItem","Tooltip","boundsContainer","el","overflowY","TEMPLATE","marginTop","hide","reference","rootBounds","verticalShift","show","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","tooltip","textbox","pickers","picker","removeEventListener","extendToolbar","buildButtons","buttons","button","buildPickers","selects","fillSelect","fileInput","click","BaseTooltip","_Tooltip","save","cancel","restoreFocus","mode","preview","linkRange","extractVideoUrl","defaultValue","TOOLBAR_CONFIG","BubbleTooltip","_BaseTooltip","lastLine","indexBounds","arrow","marginLeft","BubbleTheme","_BaseTheme","SnowTooltip","_this2$quill$scroll$d","LinkBlot","SnowTheme","_range","Indent","List","InlineCode","Icons","SendEmailPage","_ExtensionPage","oninit","vnode","loading","getLastNewsletterDetails","getTotalSubscribers","lastNewsletterdetail","totalSubscribers","toolbarOptions","font","oncreate","m","redraw","content","trans","title","createdAt","toISOString","oninput","subject","onclick","sendEmail","disabled","email","ExtensionPage","registerPage"],"sourceRoot":""}